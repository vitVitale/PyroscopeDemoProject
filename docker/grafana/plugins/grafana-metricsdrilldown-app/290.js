"use strict";(self.webpackChunkgrafana_metricsdrilldown_app=self.webpackChunkgrafana_metricsdrilldown_app||[]).push([[290],{2290:(e,t,r)=>{r.r(t),r.d(t,{sortSeries:()=>b,wasmSupported:()=>v});var n=r(6944),o=r(7781),a=r(3241),l=r(2388),s=r(6024);function i(e){var t;const r=null===(t=e.fields[1])||void 0===t?void 0:t.labels;if(!r)return null;const n=Object.keys(r);return 0===n.length?null:r[n[0]]}var c=r(5935);const u=(e,t="asc")=>{const r="asc"===t?(e,t)=>(0,s._)(e,t):(e,t)=>(0,s._)(t,e);return e.sort((e,t)=>{const n=i(e);if(!n)return 0;const o=i(t);return o?r(n,o):0})},p=(e,t,r="asc")=>{const n=o.fieldReducers.get(t),a=e.map(e=>{var r;const a=e.fields[1];if(!a)return{value:0,dataFrame:e};var l;var s;return{value:null!==(s=(null!==(l=null===(r=n.reduce)||void 0===r?void 0:r.call(n,a,!0,!0))&&void 0!==l?l:(0,o.doStandardCalcs)(a,!0,!0))[t])&&void 0!==s?s:0,dataFrame:e}});return a.sort("asc"===r?(e,t)=>e.value-t.value:(e,t)=>t.value-e.value),a.map(({dataFrame:e})=>e)},f=e=>{const t=(0,o.outerJoinDataFrames)({frames:e});if(!t)throw new Error("Error while joining frames into a single one");const r=t.fields.filter(e=>e.type===o.FieldType.number).map(e=>new Float64Array(e.values));return n.OutlierDetector.dbscan({sensitivity:.9}).detect(r)},d=(e,t)=>e.seriesResults[t].isOutlier?-e.seriesResults[t].outlierIntervals.length:0,b=(0,a.memoize)((e,t,r="asc")=>{if(!e.length)return[];const n=[...e];if("alphabetical"===t)return u(n,"asc");if("alphabetical-reversed"===t)return u(n,"desc");if("outliers"===t)try{return((e,t="asc")=>{if(!v())throw new Error("WASM not supported");const r=f(e),n=e.map((e,t)=>({value:d(r,t),dataFrame:e}));return n.sort("asc"===t?(e,t)=>e.value-t.value:(e,t)=>t.value-e.value),n.map(({dataFrame:e})=>e)})(n,r)}catch(e){const t=`Error while sorting by outlying series: "${e.toString()}"!`;return(0,l.HA)([t,"Falling back to standard deviation to identify the most variable series."]),p(n,o.ReducerID.stdDev,r)}return p(n,t,r)},(e,t,r="asc")=>{const n=y(e)?e[0].fields[0].values[0]:0,o=y(e)?e[e.length-1].fields[0].values[e[e.length-1].fields[0].values.length-1]:0;return`${e.length>0?i(e[0]):""}_${e.length>0?i(e[e.length-1]):""}_${n}_${o}_${e.length}_${t}_${r}`});function y(e){return e.length>0&&e[0].fields.length>0&&e[0].fields[0].values.length>0}const v=()=>{const e="object"==typeof WebAssembly;return e||(0,c.z)("wasm_not_supported",{}),e}},2388:(e,t,r)=>{r.d(t,{HA:()=>c,jx:()=>i,qq:()=>u});var n=r(7781),o=r(8531),a=r(8705);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function i(e,t){const r=t.reduce((e,t,r)=>s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}({},e),{[`info${r+1}`]:t}),{handheldBy:"displayError"});a.v.error(e,r),(0,o.getAppEvents)().publish({type:n.AppEvents.alertError.name,payload:t})}function c(e){a.v.warn(e),(0,o.getAppEvents)().publish({type:n.AppEvents.alertWarning.name,payload:e})}function u(e){(0,o.getAppEvents)().publish({type:n.AppEvents.alertSuccess.name,payload:e})}},3179:(e,t,r)=>{r.d(t,{A:()=>a,j:()=>o});var n=r(8531);const o={sidebarOpenByDefault:"metricsDrilldownDefaultOpenSidebar"};function a(e){var t;return null!==(t=n.config.featureToggles[e])&&void 0!==t&&t}},5935:(e,t,r)=>{r.d(t,{h:()=>b,z:()=>f});var n=r(8531),o=r(2075),a=r(5176),l=r(8943),s=r(3179);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}const p="grafana_explore_metrics_";function f(e,t){var r;((0,n.reportInteraction)(`${p}${e}`,u(c({},t),{meta:{appRelease:n.config.apps[l.s].version,appVersion:a.t}})),e.includes("sidebar"))&&(null===(r=(0,o.n1)())||void 0===r||r.api.pushEvent(e,u(c({},Object.fromEntries(Object.entries(t).map(([e,t])=>[e,String(t)]))),{defaultOpenSidebar:String((0,s.A)(s.j.sidebarOpenByDefault))})))}function d(e,t){f("label_filter_changed",{label:e,action:t,cause:"adhoc_filter"})}function b(e,t){e.length===t.length?function(e,t){for(const r of t)for(const t of e)r.key===t.key&&r.value!==t.value&&d(r.key,"changed")}(e,t):e.length<t.length?function(e,t){for(const r of t)e.some(e=>e.key===r.key)||d(r.key,"removed")}(e,t):function(e,t){for(const r of e)!t.some(e=>e.key===r.key)&&d(r.key,"added")}(e,t)}},6024:(e,t,r)=>{r.d(t,{_:()=>n});const n=new Intl.Collator("en",{sensitivity:"base"}).compare}}]);
//# sourceMappingURL=290.js.map?_cache=91bfb31e190fe1da1985