{"version":3,"file":"module.js","mappings":"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","sources":["webpack://grafana-metricsdrilldown-app/webpack/runtime/create fake namespace object","webpack://grafana-metricsdrilldown-app/webpack/runtime/load script","webpack://grafana-metricsdrilldown-app/external amd \"react-router\"","webpack://grafana-metricsdrilldown-app/external amd \"rxjs\"","webpack://grafana-metricsdrilldown-app/external amd \"module\"","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/ui\"","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/is.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/json.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/date.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/deepEqual.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/exceptions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/exceptions/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/utils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/logs/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/reactive.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/types.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/globalObject/globalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/registerFaro.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/internalFaroGlobalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/sdk/faroGlobalObject.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/shortId.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/ItemBuffer.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/userAction.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/userActions/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/traces/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/meta/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/logs/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/measurements/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/api/events/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/noop.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/createInternalLogger.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/internalLogger/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/version.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/batchExecutor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/unpatchedConsole/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/metas/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/initialize.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/metas/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/sourceMaps.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/registerInitial.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/config/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/consts.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/buildStackFrame.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getDataFromSafariExtensions.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/getStackFramesFromError.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/stackFrames/parseStacktrace.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/consts.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/browser/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/k6/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/page/meta.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/extensions/baseExtension.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/base.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/transports/utils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/throttle.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/webStorage.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/semantic.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sampling.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/sessionManagerUtils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/PersistentSessionsManager.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/VolatileSessionManager.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/sessionManager/getSessionManagerByConfig.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/transports/fetch/transport.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/promiseBuffer.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/instrumentations/base.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/utils/url.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/httpRequestMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/instrumentationConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceConstants.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/performanceUtils.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/resource.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/performance/navigation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/processUserActionEventHandler.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/domMutationMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/performanceEntriesMonitor.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/util.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/userActions/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/const.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getErrorDetails.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/getValueAndTypeFromMessage.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnunhandledrejection.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/errors/registerOnerror.js","webpack://grafana-metricsdrilldown-app/../node_modules/web-vitals/dist/web-vitals.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/webVitalsBasic.js","webpack://grafana-metricsdrilldown-app/../node_modules/web-vitals/dist/web-vitals.attribution.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/webVitalsWithAttribution.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/webVitals/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/session/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/metas/session/createSession.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/view/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/csp/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/instrumentations/console/instrumentation.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/config/getWebInstrumentations.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/config/makeCoreConfig.js","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-web-sdk/dist/esm/initialize.js","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/faro-environments.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/faro.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/faro/getFaroEnvironment.ts","webpack://grafana-metricsdrilldown-app/external amd \"lodash\"","webpack://grafana-metricsdrilldown-app/./shared/constants/routes.ts","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/prometheus/dist/esm/escaping.mjs","webpack://grafana-metricsdrilldown-app/./extensions/parseMatcher.ts","webpack://grafana-metricsdrilldown-app/./extensions/links.ts","webpack://grafana-metricsdrilldown-app/./shared/logger/getEnvironment.ts","webpack://grafana-metricsdrilldown-app/./version.ts","webpack://grafana-metricsdrilldown-app/../node_modules/@grafana/faro-core/dist/esm/utils/logLevels.js","webpack://grafana-metricsdrilldown-app/external amd \"react\"","webpack://grafana-metricsdrilldown-app/external amd \"@emotion/css\"","webpack://grafana-metricsdrilldown-app/./shared/utils/utils.promql.ts","webpack://grafana-metricsdrilldown-app/../node_modules/ua-parser-js/src/ua-parser.js","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/data\"","webpack://grafana-metricsdrilldown-app/external amd \"react-dom\"","webpack://grafana-metricsdrilldown-app/external amd \"@grafana/runtime\"","webpack://grafana-metricsdrilldown-app/./shared/logger/logger.ts","webpack://grafana-metricsdrilldown-app/./shared/constants/plugin.ts","webpack://grafana-metricsdrilldown-app/webpack/bootstrap","webpack://grafana-metricsdrilldown-app/webpack/runtime/amd options","webpack://grafana-metricsdrilldown-app/webpack/runtime/compat get default export","webpack://grafana-metricsdrilldown-app/webpack/runtime/define property getters","webpack://grafana-metricsdrilldown-app/webpack/runtime/ensure chunk","webpack://grafana-metricsdrilldown-app/webpack/runtime/get javascript chunk filename","webpack://grafana-metricsdrilldown-app/webpack/runtime/global","webpack://grafana-metricsdrilldown-app/webpack/runtime/hasOwnProperty shorthand","webpack://grafana-metricsdrilldown-app/webpack/runtime/make namespace object","webpack://grafana-metricsdrilldown-app/webpack/runtime/node module decorator","webpack://grafana-metricsdrilldown-app/webpack/runtime/publicPath","webpack://grafana-metricsdrilldown-app/webpack/runtime/compat","webpack://grafana-metricsdrilldown-app/webpack/runtime/jsonp chunk loading","webpack://grafana-metricsdrilldown-app/./node_modules/grafana-public-path.js","webpack://grafana-metricsdrilldown-app/./exposedComponents/LabelBreakdown/LazyLabelBreakdown.tsx","webpack://grafana-metricsdrilldown-app/./exposedComponents/LabelBreakdown/config.ts","webpack://grafana-metricsdrilldown-app/./exposedComponents/components.ts","webpack://grafana-metricsdrilldown-app/./module.tsx"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"grafana-metricsdrilldown-app:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t\tif (script.src.indexOf(window.location.origin + '/') !== 0) {\n\t\t\tscript.crossOrigin = \"anonymous\";\n\t\t}\n\t\tscript.integrity = __webpack_require__.sriHashes[chunkId];\n\t\tscript.crossOrigin = \"anonymous\";\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","module.exports = __WEBPACK_EXTERNAL_MODULE__1159__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1308__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","export var TransportItemType;\n(function (TransportItemType) {\n    TransportItemType[\"EXCEPTION\"] = \"exception\";\n    TransportItemType[\"LOG\"] = \"log\";\n    TransportItemType[\"MEASUREMENT\"] = \"measurement\";\n    TransportItemType[\"TRACE\"] = \"trace\";\n    TransportItemType[\"EVENT\"] = \"event\";\n})(TransportItemType || (TransportItemType = {}));\nexport const transportItemTypeToBodyKey = {\n    [TransportItemType.EXCEPTION]: 'exceptions',\n    [TransportItemType.LOG]: 'logs',\n    [TransportItemType.MEASUREMENT]: 'measurements',\n    [TransportItemType.TRACE]: 'traces',\n    [TransportItemType.EVENT]: 'events',\n};\n//# sourceMappingURL=const.js.map","export function isTypeof(value, type) {\n    return typeof value === type;\n}\nexport function isToString(value, type) {\n    return Object.prototype.toString.call(value) === `[object ${type}]`;\n}\nexport function isInstanceOf(value, reference) {\n    try {\n        return value instanceof reference;\n    }\n    catch (err) {\n        return false;\n    }\n}\nexport const isUndefined = ((value) => isTypeof(value, 'undefined'));\nexport const isNull = ((value) => isTypeof(value, 'null'));\nexport const isString = ((value) => isTypeof(value, 'string'));\nexport const isNumber = ((value) => (isTypeof(value, 'number') && !isNaN(value)) || isTypeof(value, 'bigint'));\nexport const isInt = ((value) => isNumber(value) && Number.isInteger(value));\nexport const isBoolean = ((value) => isTypeof(value, 'boolean'));\nexport const isSymbol = ((value) => isTypeof(value, 'symbol'));\nexport const isObject = ((value) => !isNull(value) && isTypeof(value, 'object'));\nexport const isFunction = ((value) => isTypeof(value, 'function'));\nexport const isArray = ((value) => isToString(value, 'Array'));\nexport const isRegExp = ((value) => isToString(value, 'RegExp'));\nexport const isThenable = ((value) => isFunction(value === null || value === void 0 ? void 0 : value.then));\nexport const isPrimitive = ((value) => !isObject(value) && !isFunction(value));\nexport const isEventDefined = typeof Event !== 'undefined';\nexport const isEvent = ((value) => isEventDefined && isInstanceOf(value, Event));\nexport const isErrorDefined = typeof Error !== 'undefined';\nexport const isError = ((value) => isErrorDefined && isInstanceOf(value, Error));\nexport const isErrorEvent = ((value) => isToString(value, 'ErrorEvent'));\nexport const isDomError = ((value) => isToString(value, 'DOMError'));\nexport const isDomException = ((value) => isToString(value, 'DOMException'));\nexport const isElementDefined = typeof Element !== 'undefined';\nexport const isElement = ((value) => isElementDefined && isInstanceOf(value, Element));\nexport const isMapDefined = typeof Map !== 'undefined';\nexport const isMap = ((value) => isMapDefined && isInstanceOf(value, Map));\nexport const isSyntheticEvent = ((value) => isObject(value) &&\n    'nativeEvent' in value &&\n    'preventDefault' in value &&\n    'stopPropagation' in value);\nexport function isEmpty(value) {\n    if (value == null) {\n        return true;\n    }\n    if (isArray(value) || isString(value)) {\n        return value.length === 0;\n    }\n    if (isObject(value)) {\n        return Object.keys(value).length === 0;\n    }\n    return false;\n}\n//# sourceMappingURL=is.js.map","import { isObject } from './is';\nexport function getCircularDependencyReplacer() {\n    const valueSeen = new WeakSet();\n    return function (_key, value) {\n        if (isObject(value) && value !== null) {\n            if (valueSeen.has(value)) {\n                return null;\n            }\n            valueSeen.add(value);\n        }\n        return value;\n    };\n}\nexport function stringifyExternalJson(json = {}) {\n    return JSON.stringify(json !== null && json !== void 0 ? json : {}, getCircularDependencyReplacer());\n}\nexport function stringifyObjectValues(obj = {}) {\n    const o = {};\n    for (const [key, value] of Object.entries(obj)) {\n        o[key] = isObject(value) && value !== null ? stringifyExternalJson(value) : String(value);\n    }\n    return o;\n}\n//# sourceMappingURL=json.js.map","export function dateNow() {\n    return Date.now();\n}\nexport function getCurrentTimestamp() {\n    return new Date().toISOString();\n}\nexport function timestampToIsoString(value) {\n    return new Date(value).toISOString();\n}\n//# sourceMappingURL=date.js.map","import { isArray, isObject, isTypeof } from './is';\n// This function was inspired by fast-deep-equal\n// fast-deep-equal has issues with Rollup and also it checks for some edge cases that we don't need\nexport function deepEqual(a, b) {\n    if (a === b) {\n        return true;\n    }\n    // Using isTypeOf instead of isNumber as isNumber also checks against NaN\n    if (isTypeof(a, 'number') && isNaN(a)) {\n        return isTypeof(b, 'number') && isNaN(b);\n    }\n    const aIsArray = isArray(a);\n    const bIsArray = isArray(b);\n    if (aIsArray !== bIsArray) {\n        return false;\n    }\n    if (aIsArray && bIsArray) {\n        const length = a.length;\n        if (length !== b.length) {\n            return false;\n        }\n        for (let idx = length; idx-- !== 0;) {\n            if (!deepEqual(a[idx], b[idx])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    const aIsObject = isObject(a);\n    const bIsObject = isObject(b);\n    if (aIsObject !== bIsObject) {\n        return false;\n    }\n    if (a && b && aIsObject && bIsObject) {\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        const aLength = aKeys.length;\n        const bLength = bKeys.length;\n        if (aLength !== bLength) {\n            return false;\n        }\n        for (let aKey of aKeys) {\n            if (!bKeys.includes(aKey)) {\n                return false;\n            }\n        }\n        for (let aKey of aKeys) {\n            if (!deepEqual(a[aKey], b[aKey])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=deepEqual.js.map","import { isObject, stringifyExternalJson } from '../../utils';\nexport const defaultExceptionType = 'Error';\nexport const defaultErrorArgsSerializer = (args) => {\n    return args\n        .map((arg) => {\n        if (isObject(arg)) {\n            return stringifyExternalJson(arg);\n        }\n        return String(arg);\n    })\n        .join(' ');\n};\n//# sourceMappingURL=const.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isArray, isEmpty, isError, isNull, isObject, stringifyExternalJson, stringifyObjectValues, } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { shouldIgnoreEvent } from '../utils';\nimport { defaultExceptionType } from './const';\nlet stacktraceParser;\nexport function initializeExceptionsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    var _a;\n    internalLogger.debug('Initializing exceptions API');\n    let lastPayload = null;\n    stacktraceParser = (_a = config.parseStacktrace) !== null && _a !== void 0 ? _a : stacktraceParser;\n    const changeStacktraceParser = (newStacktraceParser) => {\n        internalLogger.debug('Changing stacktrace parser');\n        stacktraceParser = newStacktraceParser !== null && newStacktraceParser !== void 0 ? newStacktraceParser : stacktraceParser;\n    };\n    const getStacktraceParser = () => stacktraceParser;\n    const { ignoreErrors = [], preserveOriginalError } = config;\n    const pushError = (error, { skipDedupe, stackFrames, type, context, spanContext, timestampOverwriteMs, originalError } = {}) => {\n        if (isErrorIgnored(ignoreErrors, originalError !== null && originalError !== void 0 ? originalError : error)) {\n            return;\n        }\n        try {\n            const ctx = stringifyObjectValues(Object.assign(Object.assign({}, parseCause(originalError !== null && originalError !== void 0 ? originalError : error)), (context !== null && context !== void 0 ? context : {})));\n            const item = {\n                meta: metas.value,\n                payload: Object.assign(Object.assign({ type: type || error.name || defaultExceptionType, value: error.message, timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(), trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext() }, (isEmpty(ctx) ? {} : { context: ctx })), (preserveOriginalError ? { originalError } : {})),\n                type: TransportItemType.EXCEPTION,\n            };\n            stackFrames = stackFrames !== null && stackFrames !== void 0 ? stackFrames : (error.stack ? stacktraceParser === null || stacktraceParser === void 0 ? void 0 : stacktraceParser(error).frames : undefined);\n            if (stackFrames === null || stackFrames === void 0 ? void 0 : stackFrames.length) {\n                item.payload.stacktrace = {\n                    frames: stackFrames,\n                };\n            }\n            const testingPayload = {\n                type: item.payload.type,\n                value: item.payload.value,\n                stackTrace: item.payload.stacktrace,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping error push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing exception\\n', item);\n            const activeUserAction = userActionsApi.getActiveUserAction();\n            if (activeUserAction) {\n                activeUserAction.addItem(item);\n            }\n            else {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing event', err);\n        }\n    };\n    changeStacktraceParser(config.parseStacktrace);\n    return {\n        changeStacktraceParser,\n        getStacktraceParser,\n        pushError,\n    };\n}\nfunction parseCause(error) {\n    let cause = error.cause;\n    if (isError(cause)) {\n        cause = error.cause.toString();\n        // typeof operator on null returns \"object\". This is a well-known quirk in JavaScript and is considered a bug that cannot be fixed due to backward compatibility issues.\n        // MDN: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof#typeof_null\n    }\n    else if (cause !== null && (isObject(error.cause) || isArray(error.cause))) {\n        cause = stringifyExternalJson(error.cause);\n    }\n    else if (cause != null) {\n        cause = error.cause.toString();\n    }\n    return cause == null ? {} : { cause };\n}\nfunction isErrorIgnored(ignoreErrors, error) {\n    const { message, name, stack } = error;\n    return shouldIgnoreEvent(ignoreErrors, message + ' ' + name + ' ' + stack);\n}\n//# sourceMappingURL=initialize.js.map","import { isString } from '../utils/is';\nexport function shouldIgnoreEvent(patterns, msg) {\n    return patterns.some((pattern) => {\n        return isString(pattern) ? msg.includes(pattern) : !!msg.match(pattern);\n    });\n}\n//# sourceMappingURL=utils.js.map","export const defaultLogArgsSerializer = (args) => args\n    .map((arg) => {\n    try {\n        return String(arg);\n    }\n    catch (err) {\n        return '';\n    }\n})\n    .join(' ');\n//# sourceMappingURL=const.js.map","export class Observable {\n    constructor() {\n        this.subscribers = [];\n    }\n    subscribe(subscriber) {\n        this.subscribers.push(subscriber);\n        return {\n            unsubscribe: () => this.unsubscribe(subscriber),\n        };\n    }\n    unsubscribe(subscriber) {\n        this.subscribers = this.subscribers.filter((sub) => sub !== subscriber);\n    }\n    notify(value) {\n        this.subscribers.forEach((subscriber) => subscriber(value));\n    }\n    first() {\n        const result = new Observable();\n        const internalSubscriber = (data) => {\n            result.notify(data);\n            subscription.unsubscribe();\n        };\n        const subscription = this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    takeWhile(predicate) {\n        const result = new Observable();\n        const internalSubscriber = (value) => {\n            if (predicate(value)) {\n                result.notify(value);\n            }\n            else {\n                result.unsubscribe(internalSubscriber);\n            }\n        };\n        this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    filter(predicate) {\n        const result = new Observable();\n        const internalSubscriber = (value) => {\n            if (predicate(value)) {\n                result.notify(value);\n            }\n        };\n        this.subscribe(internalSubscriber);\n        const resultUnsubscribeFn = result.unsubscribe.bind(result);\n        return this.withUnsubscribeOverride(result, resultUnsubscribeFn, internalSubscriber);\n    }\n    merge(...observables) {\n        const mergerObservable = new Observable();\n        const subscriptions = [];\n        observables.forEach((observable) => {\n            const subscription = observable.subscribe((value) => {\n                mergerObservable.notify(value);\n            });\n            subscriptions.push(subscription);\n        });\n        const originalUnsubscribeAll = mergerObservable.unsubscribeAll.bind(mergerObservable);\n        mergerObservable.unsubscribe = () => {\n            subscriptions.forEach((subscription) => subscription.unsubscribe());\n            originalUnsubscribeAll();\n        };\n        return mergerObservable;\n    }\n    withUnsubscribeOverride(observable, resultUnsubscribeFn, internalSubscriber) {\n        observable.unsubscribe = (subscriber) => {\n            resultUnsubscribeFn(subscriber);\n            this.unsubscribe(internalSubscriber);\n        };\n        return observable;\n    }\n    unsubscribeAll() {\n        this.subscribers = [];\n    }\n}\n//# sourceMappingURL=reactive.js.map","export const userActionStartByApiCallEventName = 'faroApiCall';\nexport const userActionStart = 'user_action_start';\nexport var UserActionSeverity;\n(function (UserActionSeverity) {\n    UserActionSeverity[\"Normal\"] = \"normal\";\n    UserActionSeverity[\"Critical\"] = \"critical\";\n})(UserActionSeverity || (UserActionSeverity = {}));\n//# sourceMappingURL=const.js.map","import {} from '../../transports';\nimport { UserActionSeverity, userActionStartByApiCallEventName } from './const';\nexport var UserActionState;\n(function (UserActionState) {\n    UserActionState[UserActionState[\"Started\"] = 0] = \"Started\";\n    UserActionState[UserActionState[\"Halted\"] = 1] = \"Halted\";\n    UserActionState[UserActionState[\"Cancelled\"] = 2] = \"Cancelled\";\n    UserActionState[UserActionState[\"Ended\"] = 3] = \"Ended\";\n})(UserActionState || (UserActionState = {}));\n//# sourceMappingURL=types.js.map","// This does not uses isUndefined method because it will throw an error in non-browser environments\nexport const globalObject = (typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof global !== 'undefined'\n        ? global\n        : typeof self !== 'undefined'\n            ? self\n            : undefined);\n//# sourceMappingURL=globalObject.js.map","export const internalGlobalObjectKey = '_faroInternal';\n//# sourceMappingURL=const.js.map","import { setFaroOnGlobalObject } from './faroGlobalObject';\nimport { setInternalFaroOnGlobalObject } from './internalFaroGlobalObject';\nexport let faro = {};\nexport function registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations) {\n    internalLogger.debug('Initializing Faro');\n    faro = {\n        api,\n        config,\n        instrumentations,\n        internalLogger,\n        metas,\n        pause: transports.pause,\n        transports,\n        unpatchedConsole,\n        unpause: transports.unpause,\n    };\n    setInternalFaroOnGlobalObject(faro);\n    setFaroOnGlobalObject(faro);\n    return faro;\n}\n//# sourceMappingURL=registerFaro.js.map","import { globalObject } from '../globalObject';\nimport { internalGlobalObjectKey } from './const';\nexport function getInternalFromGlobalObject() {\n    return globalObject[internalGlobalObjectKey];\n}\nexport function setInternalFaroOnGlobalObject(faro) {\n    if (!faro.config.isolate) {\n        faro.internalLogger.debug('Registering internal Faro instance on global object');\n        Object.defineProperty(globalObject, internalGlobalObjectKey, {\n            configurable: false,\n            enumerable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering internal Faro instance on global object');\n    }\n}\nexport function isInternalFaroOnGlobalObject() {\n    return internalGlobalObjectKey in globalObject;\n}\n//# sourceMappingURL=internalFaroGlobalObject.js.map","import { globalObject } from '../globalObject';\nexport function setFaroOnGlobalObject(faro) {\n    if (!faro.config.preventGlobalExposure) {\n        faro.internalLogger.debug(`Registering public faro reference in the global scope using \"${faro.config.globalObjectKey}\" key`);\n        if (faro.config.globalObjectKey in globalObject) {\n            faro.internalLogger.warn(`Skipping global registration due to key \"${faro.config.globalObjectKey}\" being used already. Please set \"globalObjectKey\" to something else or set \"preventGlobalExposure\" to \"true\"`);\n            return;\n        }\n        Object.defineProperty(globalObject, faro.config.globalObjectKey, {\n            configurable: false,\n            writable: false,\n            value: faro,\n        });\n    }\n    else {\n        faro.internalLogger.debug('Skipping registering public Faro instance in the global scope');\n    }\n}\n//# sourceMappingURL=faroGlobalObject.js.map","const alphabet = 'abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789';\nexport function genShortID(length = 10) {\n    return Array.from(Array(length))\n        .map(() => alphabet[Math.floor(Math.random() * alphabet.length)])\n        .join('');\n}\n//# sourceMappingURL=shortId.js.map","import { isFunction } from '../utils/is';\nexport class ItemBuffer {\n    constructor() {\n        this.buffer = [];\n    }\n    addItem(item) {\n        this.buffer.push(item);\n    }\n    flushBuffer(cb) {\n        if (isFunction(cb)) {\n            for (const item of this.buffer) {\n                cb(item);\n            }\n        }\n        this.buffer.length = 0;\n    }\n    size() {\n        return this.buffer.length;\n    }\n}\n//# sourceMappingURL=ItemBuffer.js.map","import {} from '../../config';\nimport { faro } from '../../sdk/registerFaro';\nimport { TransportItemType } from '../../transports';\nimport { dateNow, genShortID, Observable, stringifyObjectValues } from '../../utils';\nimport { ItemBuffer } from '../ItemBuffer';\nimport {} from '../measurements';\nimport {} from '../types';\nimport { UserActionSeverity } from './const';\nimport { UserActionState } from './types';\nconst defaultFollowUpActionTimeRange = 100;\nconst defaultHaltTimeout = 10 * 1000;\nexport default class UserAction extends Observable {\n    constructor({ name, parentId, haltTimeout, trigger, transports, attributes, trackUserActionsExcludeItem, severity = UserActionSeverity.Normal, }) {\n        super();\n        this.name = name;\n        this.attributes = attributes;\n        this.id = genShortID();\n        this.trigger = trigger;\n        this.cancelTimeout = defaultFollowUpActionTimeRange;\n        this.haltTimeout = haltTimeout !== null && haltTimeout !== void 0 ? haltTimeout : defaultHaltTimeout;\n        this.parentId = parentId !== null && parentId !== void 0 ? parentId : this.id;\n        this.trackUserActionsExcludeItem = trackUserActionsExcludeItem;\n        this.severity = severity;\n        this._itemBuffer = new ItemBuffer();\n        this._transports = transports;\n        this._haltTimeoutId = -1;\n        this._state = UserActionState.Started;\n        this._isValid = false;\n        this._start();\n    }\n    addItem(item) {\n        this._itemBuffer.addItem(item);\n    }\n    extend(haltPredicate) {\n        if (!this._isValid) {\n            this._isValid = true;\n        }\n        this._setFollowupActionTimeout(haltPredicate);\n    }\n    _setFollowupActionTimeout(haltPredicate) {\n        this._timeoutId = startTimeout(this._timeoutId, () => {\n            if (this._state === UserActionState.Started && (haltPredicate === null || haltPredicate === void 0 ? void 0 : haltPredicate())) {\n                this.halt();\n            }\n            else if (this._isValid) {\n                this.end();\n            }\n            else {\n                this.cancel();\n            }\n        }, defaultFollowUpActionTimeRange);\n    }\n    _start() {\n        this._state = UserActionState.Started;\n        if (this._state === UserActionState.Started) {\n            this.startTime = dateNow();\n        }\n        this._setFollowupActionTimeout();\n    }\n    halt() {\n        if (this._state !== UserActionState.Started) {\n            return;\n        }\n        this._state = UserActionState.Halted;\n        // If the halt timeout fires, we end the user action as\n        // it is still a valid one.\n        this._haltTimeoutId = setTimeout(() => {\n            this.end();\n        }, this.haltTimeout);\n        this.notify(this._state);\n    }\n    cancel() {\n        if (this._state === UserActionState.Started) {\n            // Empty the buffer\n            this._itemBuffer.flushBuffer();\n        }\n        this._state = UserActionState.Cancelled;\n        this.notify(this._state);\n    }\n    end() {\n        if (this._state === UserActionState.Cancelled) {\n            return;\n        }\n        // Make sure we don't end the user action twice\n        clearTimeout(this._haltTimeoutId);\n        clearTimeout(this._timeoutId);\n        const endTime = dateNow();\n        const duration = endTime - this.startTime;\n        this._state = UserActionState.Ended;\n        this._itemBuffer.flushBuffer((item) => {\n            if (isExcludeFromUserAction(item, this.trackUserActionsExcludeItem)) {\n                this._transports.execute(item);\n                return;\n            }\n            const userActionItem = Object.assign(Object.assign({}, item), { payload: Object.assign(Object.assign({}, item.payload), { action: {\n                        parentId: this.id,\n                        name: this.name,\n                    } }) });\n            this._transports.execute(userActionItem);\n        });\n        this._state = UserActionState.Ended;\n        this.notify(this._state);\n        faro.api.pushEvent(this.name, Object.assign({ userActionStartTime: this.startTime.toString(), userActionEndTime: endTime.toString(), userActionDuration: duration.toString(), userActionTrigger: this.trigger, userActionSeverity: this.severity }, stringifyObjectValues(this.attributes)), undefined, {\n            timestampOverwriteMs: this.startTime,\n            customPayloadTransformer: (payload) => {\n                payload.action = {\n                    id: this.id,\n                    name: this.name,\n                };\n                return payload;\n            },\n        });\n    }\n    getState() {\n        return this._state;\n    }\n}\nfunction isExcludeFromUserAction(item, trackUserActionsExcludeItem) {\n    return ((trackUserActionsExcludeItem === null || trackUserActionsExcludeItem === void 0 ? void 0 : trackUserActionsExcludeItem(item)) ||\n        (item.type === TransportItemType.MEASUREMENT && item.payload.type === 'web-vitals'));\n}\nfunction startTimeout(timeoutId, cb, delay) {\n    if (timeoutId) {\n        clearTimeout(timeoutId);\n    }\n    //@ts-expect-error for some reason vscode is using the node types\n    timeoutId = setTimeout(() => {\n        cb();\n    }, delay);\n    return timeoutId;\n}\n//# sourceMappingURL=userAction.js.map","import {} from '../..';\nimport { Observable } from '../../utils/reactive';\nimport { userActionStart, userActionStartByApiCallEventName } from './const';\nimport { UserActionState, } from './types';\nimport UserAction from './userAction';\nexport const userActionsMessageBus = new Observable();\nexport function initializeUserActionsAPI({ transports, internalLogger, config, }) {\n    const trackUserActionsExcludeItem = config.trackUserActionsExcludeItem;\n    // Currently running user action. It can be in either started or halted\n    // state\n    let activeUserAction;\n    // If there is a an action already running, return undefined to indicate\n    // we were not able to create one.\n    const startUserAction = (name, attributes, options) => {\n        const currentRunningUserAction = getActiveUserAction();\n        if (currentRunningUserAction === undefined) {\n            const userAction = new UserAction({\n                name,\n                transports,\n                attributes,\n                trigger: (options === null || options === void 0 ? void 0 : options.triggerName) || userActionStartByApiCallEventName,\n                trackUserActionsExcludeItem,\n            });\n            userAction\n                .filter((v) => [UserActionState.Ended, UserActionState.Cancelled].includes(v))\n                .first()\n                .subscribe(() => {\n                activeUserAction = undefined;\n            });\n            userActionsMessageBus.notify({\n                type: userActionStart,\n                userAction: userAction,\n            });\n            activeUserAction = userAction;\n            return activeUserAction;\n        }\n        else {\n            internalLogger.error('Attempted to create a new user action while one is already running. This is not possible.');\n            return undefined;\n        }\n    };\n    const getActiveUserAction = () => {\n        return activeUserAction;\n    };\n    return {\n        startUserAction,\n        getActiveUserAction,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { initializeEventsAPI } from './events';\nimport { initializeExceptionsAPI } from './exceptions';\nimport { initializeLogsAPI } from './logs';\nimport { initializeMeasurementsAPI } from './measurements';\nimport { initializeMetaAPI } from './meta';\nimport { initializeTracesAPI } from './traces';\nimport { initializeUserActionsAPI } from './userActions';\nexport function initializeAPI(unpatchedConsole, internalLogger, config, metas, transports) {\n    internalLogger.debug('Initializing API');\n    const userActionsApi = initializeUserActionsAPI({\n        transports,\n        config,\n        internalLogger,\n    });\n    const tracesApi = initializeTracesAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    const props = {\n        unpatchedConsole,\n        internalLogger,\n        userActionsApi,\n        config,\n        metas,\n        transports,\n        tracesApi,\n    };\n    return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, tracesApi), initializeExceptionsAPI(props)), initializeMetaAPI(props)), initializeLogsAPI(props)), initializeMeasurementsAPI(props)), initializeEventsAPI(props)), userActionsApi);\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nexport function initializeTracesAPI(_unpatchedConsole, internalLogger, _config, metas, transports) {\n    internalLogger.debug('Initializing traces API');\n    let otel = undefined;\n    const initOTEL = (trace, context) => {\n        internalLogger.debug('Initializing OpenTelemetry');\n        otel = {\n            trace,\n            context,\n        };\n    };\n    const getTraceContext = () => {\n        const ctx = otel === null || otel === void 0 ? void 0 : otel.trace.getSpanContext(otel.context.active());\n        return !ctx\n            ? undefined\n            : {\n                trace_id: ctx.traceId,\n                span_id: ctx.spanId,\n            };\n    };\n    const pushTraces = (payload) => {\n        try {\n            const item = {\n                type: TransportItemType.TRACE,\n                payload,\n                meta: metas.value,\n            };\n            internalLogger.debug('Pushing trace\\n', item);\n            transports.execute(item);\n        }\n        catch (err) {\n            internalLogger.error('Error pushing trace\\n', err);\n        }\n    };\n    const getOTEL = () => otel;\n    const isOTELInitialized = () => !!otel;\n    return {\n        getOTEL,\n        getTraceContext,\n        initOTEL,\n        isOTELInitialized,\n        pushTraces,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { isEmpty, isString } from '../../utils/is';\nexport function initializeMetaAPI({ internalLogger, metas, }) {\n    internalLogger.debug('Initializing meta API');\n    let metaSession = undefined;\n    let metaUser = undefined;\n    let metaView = undefined;\n    let metaPage = undefined;\n    const setUser = (user) => {\n        if (metaUser) {\n            metas.remove(metaUser);\n        }\n        metaUser = {\n            user,\n        };\n        metas.add(metaUser);\n    };\n    const setSession = (session, options) => {\n        var _a;\n        const newOverrides = options === null || options === void 0 ? void 0 : options.overrides;\n        const overrides = newOverrides\n            ? {\n                overrides: Object.assign(Object.assign({}, (_a = metaSession === null || metaSession === void 0 ? void 0 : metaSession.session) === null || _a === void 0 ? void 0 : _a.overrides), newOverrides),\n            }\n            : {};\n        if (metaSession) {\n            metas.remove(metaSession);\n        }\n        metaSession = {\n            session: Object.assign(Object.assign({}, (isEmpty(session) ? undefined : session)), overrides),\n        };\n        metas.add(metaSession);\n    };\n    const getSession = () => metas.value.session;\n    const setView = (view, options) => {\n        var _a;\n        if (options === null || options === void 0 ? void 0 : options.overrides) {\n            setSession(getSession(), { overrides: options.overrides });\n        }\n        if (((_a = metaView === null || metaView === void 0 ? void 0 : metaView.view) === null || _a === void 0 ? void 0 : _a.name) === (view === null || view === void 0 ? void 0 : view.name)) {\n            return;\n        }\n        const previousView = metaView;\n        metaView = {\n            view,\n        };\n        metas.add(metaView);\n        if (previousView) {\n            metas.remove(previousView);\n        }\n    };\n    const getView = () => metas.value.view;\n    const setPage = (page) => {\n        var _a;\n        const pageMeta = isString(page)\n            ? Object.assign(Object.assign({}, ((_a = metaPage === null || metaPage === void 0 ? void 0 : metaPage.page) !== null && _a !== void 0 ? _a : getPage())), { id: page }) : page;\n        if (metaPage) {\n            metas.remove(metaPage);\n        }\n        metaPage = {\n            page: pageMeta,\n        };\n        metas.add(metaPage);\n    };\n    const getPage = () => metas.value.page;\n    return {\n        setUser,\n        resetUser: setUser,\n        setSession,\n        resetSession: setSession,\n        getSession,\n        setView,\n        getView,\n        setPage,\n        getPage,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, defaultLogLevel, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nimport { defaultLogArgsSerializer } from './const';\nexport function initializeLogsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    var _a;\n    internalLogger.debug('Initializing logs API');\n    let lastPayload = null;\n    const logArgsSerializer = (_a = config.logArgsSerializer) !== null && _a !== void 0 ? _a : defaultLogArgsSerializer;\n    const pushLog = (args, { context, level, skipDedupe, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const ctx = stringifyObjectValues(context);\n            const item = {\n                type: TransportItemType.LOG,\n                payload: {\n                    message: logArgsSerializer(args),\n                    level: level !== null && level !== void 0 ? level : defaultLogLevel,\n                    context: isEmpty(ctx) ? undefined : ctx,\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                },\n                meta: metas.value,\n            };\n            const testingPayload = {\n                message: item.payload.message,\n                level: item.payload.level,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping log push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing log\\n', item);\n            const activeUserAction = userActionsApi.getActiveUserAction();\n            if (activeUserAction) {\n                activeUserAction.addItem(item);\n            }\n            else {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing log\\n', err);\n        }\n    };\n    return {\n        pushLog,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nexport function initializeMeasurementsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    internalLogger.debug('Initializing measurements API');\n    let lastPayload = null;\n    const pushMeasurement = (payload, { skipDedupe, context, spanContext, timestampOverwriteMs } = {}) => {\n        try {\n            const ctx = stringifyObjectValues(context);\n            const item = {\n                type: TransportItemType.MEASUREMENT,\n                payload: Object.assign(Object.assign({}, payload), { trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(), timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(), context: isEmpty(ctx) ? undefined : ctx }),\n                meta: metas.value,\n            };\n            const testingPayload = {\n                type: item.payload.type,\n                values: item.payload.values,\n                context: item.payload.context,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping measurement push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing measurement\\n', item);\n            const activeUserAction = userActionsApi.getActiveUserAction();\n            if (activeUserAction) {\n                activeUserAction.addItem(item);\n            }\n            else {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing measurement\\n', err);\n        }\n    };\n    return {\n        pushMeasurement,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { TransportItemType } from '../../transports';\nimport { deepEqual, getCurrentTimestamp, isEmpty, isNull, stringifyObjectValues } from '../../utils';\nimport { timestampToIsoString } from '../../utils/date';\nexport function initializeEventsAPI({ internalLogger, config, metas, transports, tracesApi, userActionsApi, }) {\n    let lastPayload = null;\n    const pushEvent = (name, attributes, domain, { skipDedupe, spanContext, timestampOverwriteMs, customPayloadTransformer = (payload) => payload } = {}) => {\n        try {\n            const attrs = stringifyObjectValues(attributes);\n            const item = {\n                meta: metas.value,\n                payload: customPayloadTransformer({\n                    name,\n                    domain: domain !== null && domain !== void 0 ? domain : config.eventDomain,\n                    attributes: isEmpty(attrs) ? undefined : attrs,\n                    timestamp: timestampOverwriteMs ? timestampToIsoString(timestampOverwriteMs) : getCurrentTimestamp(),\n                    trace: spanContext\n                        ? {\n                            trace_id: spanContext.traceId,\n                            span_id: spanContext.spanId,\n                        }\n                        : tracesApi.getTraceContext(),\n                }),\n                type: TransportItemType.EVENT,\n            };\n            const testingPayload = {\n                name: item.payload.name,\n                attributes: item.payload.attributes,\n                domain: item.payload.domain,\n            };\n            if (!skipDedupe && config.dedupe && !isNull(lastPayload) && deepEqual(testingPayload, lastPayload)) {\n                internalLogger.debug('Skipping event push because it is the same as the last one\\n', item.payload);\n                return;\n            }\n            lastPayload = testingPayload;\n            internalLogger.debug('Pushing event\\n', item);\n            const currentUserAction = userActionsApi.getActiveUserAction();\n            if (currentUserAction) {\n                currentUserAction.addItem(item);\n            }\n            else {\n                transports.execute(item);\n            }\n        }\n        catch (err) {\n            internalLogger.error('Error pushing event', err);\n        }\n    };\n    return {\n        pushEvent,\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","import { noop } from '../utils';\nexport var InternalLoggerLevel;\n(function (InternalLoggerLevel) {\n    InternalLoggerLevel[InternalLoggerLevel[\"OFF\"] = 0] = \"OFF\";\n    InternalLoggerLevel[InternalLoggerLevel[\"ERROR\"] = 1] = \"ERROR\";\n    InternalLoggerLevel[InternalLoggerLevel[\"WARN\"] = 2] = \"WARN\";\n    InternalLoggerLevel[InternalLoggerLevel[\"INFO\"] = 3] = \"INFO\";\n    InternalLoggerLevel[InternalLoggerLevel[\"VERBOSE\"] = 4] = \"VERBOSE\";\n})(InternalLoggerLevel || (InternalLoggerLevel = {}));\nexport const defaultInternalLoggerPrefix = 'Faro';\nexport const defaultInternalLogger = {\n    debug: noop,\n    error: noop,\n    info: noop,\n    prefix: defaultInternalLoggerPrefix,\n    warn: noop,\n};\nexport const defaultInternalLoggerLevel = InternalLoggerLevel.ERROR;\n//# sourceMappingURL=const.js.map","export const defaultUnpatchedConsole = Object.assign({}, console);\n//# sourceMappingURL=const.js.map","import { defaultUnpatchedConsole } from '../unpatchedConsole';\nimport { noop } from '../utils';\nimport { defaultInternalLogger, defaultInternalLoggerLevel, InternalLoggerLevel } from './const';\nexport function createInternalLogger(unpatchedConsole = defaultUnpatchedConsole, internalLoggerLevel = defaultInternalLoggerLevel) {\n    const internalLogger = defaultInternalLogger;\n    if (internalLoggerLevel > InternalLoggerLevel.OFF) {\n        internalLogger.error =\n            internalLoggerLevel >= InternalLoggerLevel.ERROR\n                ? function (...args) {\n                    unpatchedConsole.error(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.warn =\n            internalLoggerLevel >= InternalLoggerLevel.WARN\n                ? function (...args) {\n                    unpatchedConsole.warn(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.info =\n            internalLoggerLevel >= InternalLoggerLevel.INFO\n                ? function (...args) {\n                    unpatchedConsole.info(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n        internalLogger.debug =\n            internalLoggerLevel >= InternalLoggerLevel.VERBOSE\n                ? function (...args) {\n                    unpatchedConsole.debug(`${internalLogger.prefix}\\n`, ...args);\n                }\n                : noop;\n    }\n    return internalLogger;\n}\n//# sourceMappingURL=createInternalLogger.js.map","import { defaultInternalLogger } from './const';\nimport { createInternalLogger } from './createInternalLogger';\nexport let internalLogger = defaultInternalLogger;\nexport function initializeInternalLogger(unpatchedConsole, config) {\n    internalLogger = createInternalLogger(unpatchedConsole, config.internalLoggerLevel);\n    return internalLogger;\n}\n//# sourceMappingURL=initialize.js.map","// auto-generated by bin/genVersion.ts\nexport const VERSION = '2.0.0-beta-2';\n//# sourceMappingURL=version.js.map","const DEFAULT_SEND_TIMEOUT_MS = 250;\nconst DEFAULT_BATCH_ITEM_LIMIT = 50;\nexport class BatchExecutor {\n    constructor(sendFn, options) {\n        var _a, _b;\n        this.signalBuffer = [];\n        this.itemLimit = (_a = options === null || options === void 0 ? void 0 : options.itemLimit) !== null && _a !== void 0 ? _a : DEFAULT_BATCH_ITEM_LIMIT;\n        this.sendTimeout = (_b = options === null || options === void 0 ? void 0 : options.sendTimeout) !== null && _b !== void 0 ? _b : DEFAULT_SEND_TIMEOUT_MS;\n        this.paused = (options === null || options === void 0 ? void 0 : options.paused) || false;\n        this.sendFn = sendFn;\n        this.flushInterval = -1;\n        if (!this.paused) {\n            this.start();\n        }\n        // Send batched/buffered data when user navigates to new page, switches or closes the tab, minimizes or closes the browser.\n        // If on mobile, it also sends data if user switches from the browser to a different app.\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'hidden') {\n                this.flush();\n            }\n        });\n    }\n    addItem(item) {\n        if (this.paused) {\n            return;\n        }\n        this.signalBuffer.push(item);\n        if (this.signalBuffer.length >= this.itemLimit) {\n            this.flush();\n        }\n    }\n    start() {\n        this.paused = false;\n        if (this.sendTimeout > 0) {\n            this.flushInterval = window.setInterval(() => this.flush(), this.sendTimeout);\n        }\n    }\n    pause() {\n        this.paused = true;\n        clearInterval(this.flushInterval);\n    }\n    groupItems(items) {\n        const itemMap = new Map();\n        items.forEach((item) => {\n            const metaKey = JSON.stringify(item.meta);\n            let currentItems = itemMap.get(metaKey);\n            if (currentItems === undefined) {\n                currentItems = [item];\n            }\n            else {\n                currentItems = [...currentItems, item];\n            }\n            itemMap.set(metaKey, currentItems);\n        });\n        return Array.from(itemMap.values());\n    }\n    flush() {\n        if (this.paused || this.signalBuffer.length === 0) {\n            return;\n        }\n        const itemGroups = this.groupItems(this.signalBuffer);\n        itemGroups.forEach(this.sendFn);\n        this.signalBuffer = [];\n    }\n}\n//# sourceMappingURL=batchExecutor.js.map","import { BatchExecutor } from './batchExecutor';\nimport { TransportItemType } from './const';\nexport function initializeTransports(unpatchedConsole, internalLogger, config, metas) {\n    var _a;\n    internalLogger.debug('Initializing transports');\n    const transports = [];\n    let paused = config.paused;\n    let beforeSendHooks = [];\n    const add = (...newTransports) => {\n        internalLogger.debug('Adding transports');\n        newTransports.forEach((newTransport) => {\n            internalLogger.debug(`Adding \"${newTransport.name}\" transport`);\n            const exists = transports.some((existingTransport) => existingTransport === newTransport);\n            if (exists) {\n                internalLogger.warn(`Transport ${newTransport.name} is already added`);\n                return;\n            }\n            newTransport.unpatchedConsole = unpatchedConsole;\n            newTransport.internalLogger = internalLogger;\n            newTransport.config = config;\n            newTransport.metas = metas;\n            transports.push(newTransport);\n        });\n    };\n    const addBeforeSendHooks = (...newBeforeSendHooks) => {\n        internalLogger.debug('Adding beforeSendHooks\\n', beforeSendHooks);\n        newBeforeSendHooks.forEach((beforeSendHook) => {\n            if (beforeSendHook) {\n                beforeSendHooks.push(beforeSendHook);\n            }\n        });\n    };\n    const applyBeforeSendHooks = (items) => {\n        let filteredItems = items;\n        for (const hook of beforeSendHooks) {\n            const modified = filteredItems.map(hook).filter(Boolean);\n            if (modified.length === 0) {\n                return [];\n            }\n            filteredItems = sanitizeItems(modified, config);\n        }\n        return filteredItems;\n    };\n    const batchedSend = (items) => {\n        const filteredItems = applyBeforeSendHooks(items);\n        if (filteredItems.length === 0) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItems);\n            if (transport.isBatched()) {\n                transport.send(filteredItems);\n            }\n        }\n    };\n    const instantSend = (item) => {\n        var _a, _b;\n        // prevent all beforeSend hooks being executed twice if batching is enabled.\n        if (((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) && transports.every((transport) => transport.isBatched())) {\n            return;\n        }\n        const [filteredItem] = applyBeforeSendHooks([item]);\n        if (filteredItem === undefined) {\n            return;\n        }\n        for (const transport of transports) {\n            internalLogger.debug(`Transporting item using ${transport.name}\\n`, filteredItem);\n            if (!transport.isBatched()) {\n                transport.send(filteredItem);\n            }\n            else if (!((_b = config.batching) === null || _b === void 0 ? void 0 : _b.enabled)) {\n                transport.send([filteredItem]);\n            }\n        }\n    };\n    let batchExecutor;\n    if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n        batchExecutor = new BatchExecutor(batchedSend, {\n            sendTimeout: config.batching.sendTimeout,\n            itemLimit: config.batching.itemLimit,\n            paused,\n        });\n    }\n    // Send a signal to the appropriate transports\n    //\n    // 1. If SDK is paused, early return\n    // 2. If batching is not enabled send the signal to all transports\n    //    instantly.\n    // 3i. If batching is enabled, enqueue the signal\n    // 3ii. Send the signal instantly to all un-batched transports\n    const execute = (item) => {\n        var _a;\n        if (paused) {\n            return;\n        }\n        if ((_a = config.batching) === null || _a === void 0 ? void 0 : _a.enabled) {\n            batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.addItem(item);\n        }\n        instantSend(item);\n    };\n    const getBeforeSendHooks = () => [...beforeSendHooks];\n    const isPaused = () => paused;\n    const pause = () => {\n        internalLogger.debug('Pausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.pause();\n        paused = true;\n    };\n    const remove = (...transportsToRemove) => {\n        internalLogger.debug('Removing transports');\n        transportsToRemove.forEach((transportToRemove) => {\n            internalLogger.debug(`Removing \"${transportToRemove.name}\" transport`);\n            const existingTransportIndex = transports.indexOf(transportToRemove);\n            if (existingTransportIndex === -1) {\n                internalLogger.warn(`Transport \"${transportToRemove.name}\" is not added`);\n                return;\n            }\n            transports.splice(existingTransportIndex, 1);\n        });\n    };\n    const removeBeforeSendHooks = (...beforeSendHooksToRemove) => {\n        beforeSendHooks.filter((beforeSendHook) => !beforeSendHooksToRemove.includes(beforeSendHook));\n    };\n    const unpause = () => {\n        internalLogger.debug('Unpausing transports');\n        batchExecutor === null || batchExecutor === void 0 ? void 0 : batchExecutor.start();\n        paused = false;\n    };\n    return {\n        add,\n        addBeforeSendHooks,\n        getBeforeSendHooks,\n        execute,\n        isPaused,\n        pause,\n        remove,\n        removeBeforeSendHooks,\n        get transports() {\n            return [...transports];\n        },\n        unpause,\n    };\n}\n/**\n * Removes the `payload.originalError` property from the provided `TransportItem[]` parameter.\n */\nfunction sanitizeItems(filteredItems, config) {\n    if (config.preserveOriginalError) {\n        for (const item of filteredItems) {\n            if (item.type === TransportItemType.EXCEPTION) {\n                delete item.payload.originalError;\n            }\n        }\n    }\n    return filteredItems;\n}\n//# sourceMappingURL=initialize.js.map","import { defaultUnpatchedConsole } from './const';\nexport let unpatchedConsole = defaultUnpatchedConsole;\nexport function initializeUnpatchedConsole(config) {\n    var _a;\n    unpatchedConsole = (_a = config.unpatchedConsole) !== null && _a !== void 0 ? _a : unpatchedConsole;\n    return unpatchedConsole;\n}\n//# sourceMappingURL=initialize.js.map","import { initializeAPI } from './api';\nimport { initializeInstrumentations, registerInitialInstrumentations } from './instrumentations';\nimport { initializeInternalLogger } from './internalLogger';\nimport { initializeMetas, registerInitialMetas } from './metas';\nimport { isInternalFaroOnGlobalObject, registerFaro } from './sdk';\nimport { initializeTransports, registerInitialTransports } from './transports';\nimport { initializeUnpatchedConsole } from './unpatchedConsole';\nexport function initializeFaro(config) {\n    const unpatchedConsole = initializeUnpatchedConsole(config);\n    const internalLogger = initializeInternalLogger(unpatchedConsole, config);\n    if (isInternalFaroOnGlobalObject() && !config.isolate) {\n        internalLogger.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the \"isolate\" property');\n        return undefined;\n    }\n    internalLogger.debug('Initializing');\n    // Initializing the APIs\n    const metas = initializeMetas(unpatchedConsole, internalLogger, config);\n    const transports = initializeTransports(unpatchedConsole, internalLogger, config, metas);\n    const api = initializeAPI(unpatchedConsole, internalLogger, config, metas, transports);\n    const instrumentations = initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api);\n    const faro = registerFaro(unpatchedConsole, internalLogger, config, metas, transports, api, instrumentations);\n    // make sure Faro is initialized before registering default metas, instrumentations, transports etc.\n    registerInitialMetas(faro);\n    registerInitialTransports(faro);\n    registerInitialInstrumentations(faro);\n    return faro;\n}\n//# sourceMappingURL=initialize.js.map","import { isFunction } from '../utils';\nexport function initializeMetas(_unpatchedConsole, internalLogger, _config) {\n    let items = [];\n    let listeners = [];\n    const getValue = () => items.reduce((acc, item) => Object.assign(acc, isFunction(item) ? item() : item), {});\n    const notifyListeners = () => {\n        if (listeners.length) {\n            const value = getValue();\n            listeners.forEach((listener) => listener(value));\n        }\n    };\n    const add = (...newItems) => {\n        internalLogger.debug('Adding metas\\n', newItems);\n        items.push(...newItems);\n        notifyListeners();\n    };\n    const remove = (...itemsToRemove) => {\n        internalLogger.debug('Removing metas\\n', itemsToRemove);\n        items = items.filter((currentItem) => !itemsToRemove.includes(currentItem));\n        notifyListeners();\n    };\n    const addListener = (listener) => {\n        internalLogger.debug('Adding metas listener\\n', listener);\n        listeners.push(listener);\n    };\n    const removeListener = (listener) => {\n        internalLogger.debug('Removing metas listener\\n', listener);\n        listeners = listeners.filter((currentListener) => currentListener !== listener);\n    };\n    return {\n        add,\n        remove,\n        addListener,\n        removeListener,\n        get value() {\n            return getValue();\n        },\n    };\n}\n//# sourceMappingURL=initialize.js.map","export function initializeInstrumentations(unpatchedConsole, internalLogger, config, metas, transports, api) {\n    internalLogger.debug('Initializing instrumentations');\n    const instrumentations = [];\n    const add = (...newInstrumentations) => {\n        internalLogger.debug('Adding instrumentations');\n        newInstrumentations.forEach((newInstrumentation) => {\n            internalLogger.debug(`Adding \"${newInstrumentation.name}\" instrumentation`);\n            const exists = instrumentations.some((existingInstrumentation) => existingInstrumentation.name === newInstrumentation.name);\n            if (exists) {\n                internalLogger.warn(`Instrumentation ${newInstrumentation.name} is already added`);\n                return;\n            }\n            newInstrumentation.unpatchedConsole = unpatchedConsole;\n            newInstrumentation.internalLogger = internalLogger;\n            newInstrumentation.config = config;\n            newInstrumentation.metas = metas;\n            newInstrumentation.transports = transports;\n            newInstrumentation.api = api;\n            instrumentations.push(newInstrumentation);\n            newInstrumentation.initialize();\n        });\n    };\n    const remove = (...instrumentationsToRemove) => {\n        internalLogger.debug('Removing instrumentations');\n        instrumentationsToRemove.forEach((instrumentationToRemove) => {\n            var _a, _b;\n            internalLogger.debug(`Removing \"${instrumentationToRemove.name}\" instrumentation`);\n            const existingInstrumentationIndex = instrumentations.reduce((acc, existingInstrumentation, existingTransportIndex) => {\n                if (acc === null && existingInstrumentation.name === instrumentationToRemove.name) {\n                    return existingTransportIndex;\n                }\n                return null;\n            }, null);\n            if (existingInstrumentationIndex === null) {\n                internalLogger.warn(`Instrumentation \"${instrumentationToRemove.name}\" is not added`);\n                return;\n            }\n            (_b = (_a = instrumentations[existingInstrumentationIndex]).destroy) === null || _b === void 0 ? void 0 : _b.call(_a);\n            instrumentations.splice(existingInstrumentationIndex, 1);\n        });\n    };\n    return {\n        add,\n        get instrumentations() {\n            return [...instrumentations];\n        },\n        remove,\n    };\n}\n//# sourceMappingURL=initialize.js.map","import { getBundleId } from '../utils/sourceMaps';\nimport { VERSION } from '../version';\nexport function registerInitialMetas(faro) {\n    var _a, _b;\n    const initial = {\n        sdk: {\n            version: VERSION,\n        },\n        app: {\n            bundleId: faro.config.app.name && getBundleId(faro.config.app.name),\n        },\n    };\n    const session = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session;\n    if (session) {\n        faro.api.setSession(session);\n    }\n    if (faro.config.app) {\n        initial.app = Object.assign(Object.assign({}, faro.config.app), initial.app);\n    }\n    if (faro.config.user) {\n        initial.user = faro.config.user;\n    }\n    if (faro.config.view) {\n        initial.view = faro.config.view;\n    }\n    faro.metas.add(initial, ...((_b = faro.config.metas) !== null && _b !== void 0 ? _b : []));\n}\n//# sourceMappingURL=registerInitial.js.map","import { globalObject } from '../globalObject';\nexport function getBundleId(appName) {\n    return globalObject === null || globalObject === void 0 ? void 0 : globalObject[`__faroBundleId_${appName}`];\n}\n//# sourceMappingURL=sourceMaps.js.map","export function registerInitialTransports(faro) {\n    faro.transports.add(...faro.config.transports);\n    faro.transports.addBeforeSendHooks(faro.config.beforeSend);\n}\n//# sourceMappingURL=registerInitial.js.map","export function registerInitialInstrumentations(faro) {\n    faro.instrumentations.add(...faro.config.instrumentations);\n}\n//# sourceMappingURL=registerInitial.js.map","export const defaultGlobalObjectKey = 'faro';\nexport const defaultBatchingConfig = {\n    enabled: true,\n    sendTimeout: 250,\n    itemLimit: 50,\n};\n//# sourceMappingURL=const.js.map","export const defaultEventDomain = 'browser';\n//# sourceMappingURL=consts.js.map","export const newLineString = '\\n';\nexport const evalString = 'eval';\nexport const unknownSymbolString = '?';\nexport const atString = '@';\nexport const webkitLineRegex = /^\\s*at (?:(?![a-z]+:\\/\\/)([^(]+?) ?\\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\\/)?.*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nexport const webkitEvalRegex = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nexport const webkitEvalString = 'eval';\nexport const webkitAddressAtString = 'address at ';\nexport const webkitAddressAtStringLength = webkitAddressAtString.length;\nexport const firefoxLineRegex = /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\\/.*?|\\[native code]|[^@]*(?:bundle|\\d+\\.js)|\\/[\\w\\-. /=]+)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nexport const firefoxEvalRegex = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nexport const firefoxEvalString = ' > eval';\nexport const safariExtensionString = 'safari-extension';\nexport const safariWebExtensionString = 'safari-web-extension';\nexport const reactMinifiedRegex = /Minified React error #\\d+;/i;\n//# sourceMappingURL=const.js.map","import { unknownSymbolString } from './const';\nexport function buildStackFrame(filename, func, lineno, colno) {\n    const stackFrame = {\n        filename: filename || document.location.href,\n        function: func || unknownSymbolString,\n    };\n    if (lineno !== undefined) {\n        stackFrame.lineno = lineno;\n    }\n    if (colno !== undefined) {\n        stackFrame.colno = colno;\n    }\n    return stackFrame;\n}\n//# sourceMappingURL=buildStackFrame.js.map","import { atString, safariExtensionString, safariWebExtensionString } from './const';\nexport function getDataFromSafariExtensions(func, filename) {\n    const isSafariExtension = func === null || func === void 0 ? void 0 : func.includes(safariExtensionString);\n    const isSafariWebExtension = !isSafariExtension && (func === null || func === void 0 ? void 0 : func.includes(safariWebExtensionString));\n    if (!isSafariExtension && !isSafariWebExtension) {\n        return [func, filename];\n    }\n    return [\n        (func === null || func === void 0 ? void 0 : func.includes(atString)) ? func.split(atString)[0] : func,\n        isSafariExtension ? `${safariExtensionString}:${filename}` : `${safariWebExtensionString}:${filename}`,\n    ];\n}\n//# sourceMappingURL=getDataFromSafariExtensions.js.map","import { isNumber } from '@grafana/faro-core';\nimport { buildStackFrame } from './buildStackFrame';\nimport { evalString, firefoxEvalRegex, firefoxEvalString, firefoxLineRegex, newLineString, reactMinifiedRegex, webkitAddressAtString, webkitAddressAtStringLength, webkitEvalRegex, webkitEvalString, webkitLineRegex, } from './const';\nimport { getDataFromSafariExtensions } from './getDataFromSafariExtensions';\nexport function getStackFramesFromError(error) {\n    let lines = [];\n    if (error.stacktrace) {\n        lines = error.stacktrace.split(newLineString).filter((_line, idx) => idx % 2 === 0);\n    }\n    else if (error.stack) {\n        lines = error.stack.split(newLineString);\n    }\n    const stackFrames = lines.reduce((acc, line, idx) => {\n        let parts;\n        let func;\n        let filename;\n        let lineno;\n        let colno;\n        if ((parts = webkitLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[2];\n            lineno = parts[3];\n            colno = parts[4];\n            if (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitEvalString)) {\n                const submatch = webkitEvalRegex.exec(filename);\n                if (submatch) {\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                    colno = submatch[3];\n                }\n            }\n            filename = (filename === null || filename === void 0 ? void 0 : filename.startsWith(webkitAddressAtString))\n                ? filename.substring(webkitAddressAtStringLength)\n                : filename;\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        else if ((parts = firefoxLineRegex.exec(line))) {\n            func = parts[1];\n            filename = parts[3];\n            lineno = parts[4];\n            colno = parts[5];\n            if (!!filename && filename.includes(firefoxEvalString)) {\n                const submatch = firefoxEvalRegex.exec(filename);\n                if (submatch) {\n                    func = func || evalString;\n                    filename = submatch[1];\n                    lineno = submatch[2];\n                }\n            }\n            else if (idx === 0 && !colno && isNumber(error.columnNumber)) {\n                colno = String(error.columnNumber + 1);\n            }\n            [func, filename] = getDataFromSafariExtensions(func, filename);\n        }\n        if (filename || func) {\n            acc.push(buildStackFrame(filename, func, lineno ? Number(lineno) : undefined, colno ? Number(colno) : undefined));\n        }\n        return acc;\n    }, []);\n    if (reactMinifiedRegex.test(error.message)) {\n        return stackFrames.slice(1);\n    }\n    return stackFrames;\n}\n//# sourceMappingURL=getStackFramesFromError.js.map","import { getStackFramesFromError } from './getStackFramesFromError';\nexport function parseStacktrace(error) {\n    return {\n        frames: getStackFramesFromError(error),\n    };\n}\n//# sourceMappingURL=parseStacktrace.js.map","export const STORAGE_KEY = 'com.grafana.faro.session';\nexport const SESSION_EXPIRATION_TIME = 4 * 60 * 60 * 1000; // hrs\nexport const SESSION_INACTIVITY_TIME = 15 * 60 * 1000; // minutes\nexport const STORAGE_UPDATE_DELAY = 1 * 1000; // seconds\nexport const MAX_SESSION_PERSISTENCE_TIME = SESSION_INACTIVITY_TIME;\nexport const defaultSessionTrackingConfig = {\n    enabled: true,\n    persistent: false,\n    maxSessionPersistenceTime: MAX_SESSION_PERSISTENCE_TIME,\n};\n//# sourceMappingURL=sessionConstants.js.map","export const MESSAGE_TYPE_RESOURCE_ENTRY = 'resource-entry';\nexport const MESSAGE_TYPE_HTTP_REQUEST_START = 'http-request-start';\nexport const MESSAGE_TYPE_HTTP_REQUEST_END = 'http-request-end';\nexport const MESSAGE_TYPE_DOM_MUTATION = 'dom-mutation';\nexport const userActionDataAttributeParsed = 'faroUserActionName';\nexport const userActionDataAttribute = 'data-faro-user-action-name';\n//# sourceMappingURL=const.js.map","export const unknownString = 'unknown';\n//# sourceMappingURL=consts.js.map","import { UAParser } from 'ua-parser-js';\nimport { unknownString } from '@grafana/faro-core';\nexport const browserMeta = () => {\n    const parser = new UAParser();\n    const { name, version } = parser.getBrowser();\n    const { name: osName, version: osVersion } = parser.getOS();\n    const userAgent = parser.getUA();\n    const language = navigator.language;\n    const mobile = navigator.userAgent.includes('Mobi');\n    const brands = getBrands();\n    return {\n        browser: {\n            name: name !== null && name !== void 0 ? name : unknownString,\n            version: version !== null && version !== void 0 ? version : unknownString,\n            os: `${osName !== null && osName !== void 0 ? osName : unknownString} ${osVersion !== null && osVersion !== void 0 ? osVersion : unknownString}`,\n            userAgent: userAgent !== null && userAgent !== void 0 ? userAgent : unknownString,\n            language: language !== null && language !== void 0 ? language : unknownString,\n            mobile,\n            brands: brands !== null && brands !== void 0 ? brands : unknownString,\n            viewportWidth: `${window.innerWidth}`,\n            viewportHeight: `${window.innerHeight}`,\n        },\n    };\n    function getBrands() {\n        if (!name || !version) {\n            return undefined;\n        }\n        if ('userAgentData' in navigator && navigator.userAgentData) {\n            // userAgentData in experimental (only Chrome supports it) thus TS does not ship the respective type declarations\n            return navigator.userAgentData.brands;\n        }\n        return undefined;\n    }\n};\n//# sourceMappingURL=meta.js.map","export const k6Meta = () => {\n    const k6Properties = window.k6;\n    return {\n        k6: Object.assign({ \n            // we only add the k6 meta if Faro is running inside a k6 environment, so this is always true\n            isK6Browser: true }, ((k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId) && { testRunId: k6Properties === null || k6Properties === void 0 ? void 0 : k6Properties.testRunId })),\n    };\n};\n//# sourceMappingURL=meta.js.map","import { isFunction } from '@grafana/faro-core';\nlet currentHref;\nlet pageId;\nexport function createPageMeta({ generatePageId, initialPageMeta } = {}) {\n    const pageMeta = () => {\n        const locationHref = location.href;\n        if (isFunction(generatePageId) && currentHref !== locationHref) {\n            currentHref = locationHref;\n            pageId = generatePageId(location);\n        }\n        return {\n            page: Object.assign(Object.assign({ url: locationHref }, (pageId ? { id: pageId } : {})), initialPageMeta),\n        };\n    };\n    return pageMeta;\n}\n//# sourceMappingURL=meta.js.map","import { defaultInternalLogger } from '../internalLogger';\nimport { defaultUnpatchedConsole } from '../unpatchedConsole';\nexport class BaseExtension {\n    constructor() {\n        this.unpatchedConsole = defaultUnpatchedConsole;\n        this.internalLogger = defaultInternalLogger;\n        this.config = {};\n        this.metas = {};\n    }\n    logDebug(...args) {\n        this.internalLogger.debug(`${this.name}\\n`, ...args);\n    }\n    logInfo(...args) {\n        this.internalLogger.info(`${this.name}\\n`, ...args);\n    }\n    logWarn(...args) {\n        this.internalLogger.warn(`${this.name}\\n`, ...args);\n    }\n    logError(...args) {\n        this.internalLogger.error(`${this.name}\\n`, ...args);\n    }\n}\n//# sourceMappingURL=baseExtension.js.map","import { BaseExtension } from '../extensions';\nexport class BaseTransport extends BaseExtension {\n    isBatched() {\n        return false;\n    }\n    getIgnoreUrls() {\n        return [];\n    }\n}\n//# sourceMappingURL=base.js.map","import { TransportItemType, transportItemTypeToBodyKey } from './const';\nexport function mergeResourceSpans(traces, resourceSpans) {\n    var _a, _b;\n    if (resourceSpans === undefined) {\n        return traces;\n    }\n    if (traces === undefined) {\n        return {\n            resourceSpans,\n        };\n    }\n    const currentResource = (_a = traces.resourceSpans) === null || _a === void 0 ? void 0 : _a[0];\n    if (currentResource === undefined) {\n        return traces;\n    }\n    const currentSpans = (currentResource === null || currentResource === void 0 ? void 0 : currentResource.scopeSpans) || [];\n    const newSpans = ((_b = resourceSpans === null || resourceSpans === void 0 ? void 0 : resourceSpans[0]) === null || _b === void 0 ? void 0 : _b.scopeSpans) || [];\n    return Object.assign(Object.assign({}, traces), { resourceSpans: [\n            Object.assign(Object.assign({}, currentResource), { scopeSpans: [...currentSpans, ...newSpans] }),\n        ] });\n}\nexport function getTransportBody(item) {\n    let body = {\n        meta: {},\n    };\n    if (item[0] !== undefined) {\n        body.meta = item[0].meta;\n    }\n    item.forEach((currentItem) => {\n        switch (currentItem.type) {\n            case TransportItemType.LOG:\n            case TransportItemType.EVENT:\n            case TransportItemType.EXCEPTION:\n            case TransportItemType.MEASUREMENT:\n                const bk = transportItemTypeToBodyKey[currentItem.type];\n                const signals = body[bk];\n                body = Object.assign(Object.assign({}, body), { [bk]: signals === undefined ? [currentItem.payload] : [...signals, currentItem.payload] });\n                break;\n            case TransportItemType.TRACE:\n                body = Object.assign(Object.assign({}, body), { traces: mergeResourceSpans(body.traces, currentItem.payload.resourceSpans) });\n                break;\n        }\n    });\n    return body;\n}\n//# sourceMappingURL=utils.js.map","/**\n * Tail based throttle which caches the args of the last call and updates\n */\nexport function throttle(callback, delay) {\n    let pause = false;\n    let lastPending;\n    const timeoutBehavior = () => {\n        if (lastPending == null) {\n            pause = false;\n            return;\n        }\n        callback(...lastPending);\n        lastPending = null;\n        setTimeout(timeoutBehavior, delay);\n    };\n    return (...args) => {\n        if (pause) {\n            lastPending = args;\n            return;\n        }\n        callback(...args);\n        pause = true;\n        setTimeout(timeoutBehavior, delay);\n    };\n}\n//# sourceMappingURL=throttle.js.map","import { faro } from '@grafana/faro-core';\nexport const webStorageType = {\n    session: 'sessionStorage',\n    local: 'localStorage',\n};\n/**\n * Check if selected web storage mechanism is available.\n * @param type storage mechanism to test availability for.\n * @returns\n */\nexport function isWebStorageAvailable(type) {\n    var _a;\n    try {\n        let storage;\n        storage = window[type];\n        const testItem = '__faro_storage_test__';\n        storage.setItem(testItem, testItem);\n        storage.removeItem(testItem);\n        return true;\n    }\n    catch (error) {\n        // the above can throw\n        (_a = faro.internalLogger) === null || _a === void 0 ? void 0 : _a.info(`Web storage of type ${type} is not available. Reason: ${error}`);\n        return false;\n    }\n}\n/**\n * Get item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function getItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        return window[webStorageMechanism].getItem(key);\n    }\n    return null;\n}\n/**\n * Store item in SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param value: the item data.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function setItem(key, value, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        try {\n            window[webStorageMechanism].setItem(key, value);\n        }\n        catch (error) {\n            // do nothing\n        }\n    }\n}\n/**\n * Remove item from SessionStorage or LocalStorage.\n * @param key: the item key.\n * @param webStorageMechanism: wether the item shall be received form local storage or session storage. Defaults to local storage.\n */\nexport function removeItem(key, webStorageMechanism) {\n    if (isWebStorageTypeAvailable(webStorageMechanism)) {\n        window[webStorageMechanism].removeItem(key);\n    }\n}\nexport const isLocalStorageAvailable = isWebStorageAvailable(webStorageType.local);\nexport const isSessionStorageAvailable = isWebStorageAvailable(webStorageType.session);\nfunction isWebStorageTypeAvailable(webStorageMechanism) {\n    if (webStorageMechanism === webStorageType.local) {\n        return isLocalStorageAvailable;\n    }\n    if (webStorageMechanism === webStorageType.session) {\n        return isSessionStorageAvailable;\n    }\n    return false;\n}\n//# sourceMappingURL=webStorage.js.map","export const EVENT_CLICK = 'click';\nexport const EVENT_NAVIGATION = 'navigation';\nexport const EVENT_VIEW_CHANGED = 'view_changed';\nexport const EVENT_SESSION_START = 'session_start';\nexport const EVENT_SESSION_RESUME = 'session_resume';\nexport const EVENT_SESSION_EXTEND = 'session_extend';\nexport const EVENT_OVERRIDES_SERVICE_NAME = 'service_name_override';\nexport const EVENT_ROUTE_CHANGE = 'route_change';\n//# sourceMappingURL=semantic.js.map","import { faro } from '@grafana/faro-core';\nexport function isSampled() {\n    var _a, _b, _c;\n    const sendAllSignals = 1;\n    const sessionTracking = faro.config.sessionTracking;\n    let samplingRate = (_c = (_b = (_a = sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.sampler) === null || _a === void 0 ? void 0 : _a.call(sessionTracking, { metas: faro.metas.value })) !== null && _b !== void 0 ? _b : sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.samplingRate) !== null && _c !== void 0 ? _c : sendAllSignals;\n    if (typeof samplingRate !== 'number') {\n        const sendNoSignals = 0;\n        samplingRate = sendNoSignals;\n    }\n    return Math.random() < samplingRate;\n}\n//# sourceMappingURL=sampling.js.map","import { dateNow, deepEqual, EVENT_OVERRIDES_SERVICE_NAME, faro, genShortID, isEmpty } from '@grafana/faro-core';\nimport { isLocalStorageAvailable, isSessionStorageAvailable } from '../../../utils';\nimport { isSampled } from './sampling';\nimport { SESSION_EXPIRATION_TIME, SESSION_INACTIVITY_TIME } from './sessionConstants';\nexport function createUserSessionObject({ sessionId, started, lastActivity, isSampled = true, } = {}) {\n    var _a, _b;\n    const now = dateNow();\n    const generateSessionId = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId;\n    if (sessionId == null) {\n        sessionId = typeof generateSessionId === 'function' ? generateSessionId() : genShortID();\n    }\n    return {\n        sessionId,\n        lastActivity: lastActivity !== null && lastActivity !== void 0 ? lastActivity : now,\n        started: started !== null && started !== void 0 ? started : now,\n        isSampled: isSampled,\n    };\n}\nexport function isUserSessionValid(session) {\n    if (session == null) {\n        return false;\n    }\n    const now = dateNow();\n    const lifetimeValid = now - session.started < SESSION_EXPIRATION_TIME;\n    if (!lifetimeValid) {\n        return false;\n    }\n    const inactivityPeriodValid = now - session.lastActivity < SESSION_INACTIVITY_TIME;\n    return inactivityPeriodValid;\n}\nexport function getUserSessionUpdater({ fetchUserSession, storeUserSession, }) {\n    return function updateSession({ forceSessionExtend } = { forceSessionExtend: false }) {\n        var _a, _b, _c;\n        if (!fetchUserSession || !storeUserSession) {\n            return;\n        }\n        const sessionTrackingConfig = faro.config.sessionTracking;\n        const isPersistentSessions = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent;\n        if ((isPersistentSessions && !isLocalStorageAvailable) || (!isPersistentSessions && !isSessionStorageAvailable)) {\n            return;\n        }\n        const sessionFromStorage = fetchUserSession();\n        if (forceSessionExtend === false && isUserSessionValid(sessionFromStorage)) {\n            storeUserSession(Object.assign(Object.assign({}, sessionFromStorage), { lastActivity: dateNow() }));\n        }\n        else {\n            let newSession = addSessionMetadataToNextSession(createUserSessionObject({ isSampled: isSampled() }), sessionFromStorage);\n            storeUserSession(newSession);\n            (_a = faro.api) === null || _a === void 0 ? void 0 : _a.setSession(newSession.sessionMeta);\n            (_b = sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.onSessionChange) === null || _b === void 0 ? void 0 : _b.call(sessionTrackingConfig, (_c = sessionFromStorage === null || sessionFromStorage === void 0 ? void 0 : sessionFromStorage.sessionMeta) !== null && _c !== void 0 ? _c : null, newSession.sessionMeta);\n        }\n    };\n}\nexport function addSessionMetadataToNextSession(newSession, previousSession) {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const sessionWithMeta = Object.assign(Object.assign({}, newSession), { sessionMeta: {\n            id: newSession.sessionId,\n            attributes: Object.assign(Object.assign(Object.assign({}, (_b = (_a = faro.config.sessionTracking) === null || _a === void 0 ? void 0 : _a.session) === null || _b === void 0 ? void 0 : _b.attributes), ((_d = (_c = faro.metas.value.session) === null || _c === void 0 ? void 0 : _c.attributes) !== null && _d !== void 0 ? _d : {})), { isSampled: newSession.isSampled.toString() }),\n        } });\n    const overrides = (_f = (_e = faro.metas.value.session) === null || _e === void 0 ? void 0 : _e.overrides) !== null && _f !== void 0 ? _f : (_g = previousSession === null || previousSession === void 0 ? void 0 : previousSession.sessionMeta) === null || _g === void 0 ? void 0 : _g.overrides;\n    if (!isEmpty(overrides)) {\n        sessionWithMeta.sessionMeta.overrides = overrides;\n    }\n    const previousSessionId = previousSession === null || previousSession === void 0 ? void 0 : previousSession.sessionId;\n    if (previousSessionId != null) {\n        sessionWithMeta.sessionMeta.attributes['previousSession'] = previousSessionId;\n    }\n    return sessionWithMeta;\n}\nexport function getSessionMetaUpdateHandler({ fetchUserSession, storeUserSession, }) {\n    return function syncSessionIfChangedExternally(meta) {\n        const session = meta.session;\n        const sessionFromSessionStorage = fetchUserSession();\n        let sessionId = session === null || session === void 0 ? void 0 : session.id;\n        const sessionAttributes = session === null || session === void 0 ? void 0 : session.attributes;\n        const sessionOverrides = session === null || session === void 0 ? void 0 : session.overrides;\n        const storedSessionMeta = sessionFromSessionStorage === null || sessionFromSessionStorage === void 0 ? void 0 : sessionFromSessionStorage.sessionMeta;\n        const storedSessionMetaOverrides = storedSessionMeta === null || storedSessionMeta === void 0 ? void 0 : storedSessionMeta.overrides;\n        const hasSessionOverridesChanged = !!sessionOverrides && !deepEqual(sessionOverrides, storedSessionMetaOverrides);\n        const hasAttributesChanged = !!sessionAttributes && !deepEqual(sessionAttributes, storedSessionMeta === null || storedSessionMeta === void 0 ? void 0 : storedSessionMeta.attributes);\n        const hasSessionIdChanged = !!session && sessionId !== (sessionFromSessionStorage === null || sessionFromSessionStorage === void 0 ? void 0 : sessionFromSessionStorage.sessionId);\n        if (hasSessionIdChanged || hasAttributesChanged || hasSessionOverridesChanged) {\n            const userSession = addSessionMetadataToNextSession(createUserSessionObject({ sessionId, isSampled: isSampled() }), sessionFromSessionStorage);\n            storeUserSession(userSession);\n            sendOverrideEvent(hasSessionOverridesChanged, sessionOverrides, storedSessionMetaOverrides);\n            faro.api.setSession(userSession.sessionMeta);\n        }\n    };\n}\nfunction sendOverrideEvent(hasSessionOverridesChanged, sessionOverrides = {}, storedSessionOverrides = {}) {\n    var _a, _b, _c;\n    if (!hasSessionOverridesChanged) {\n        return;\n    }\n    const serviceName = sessionOverrides.serviceName;\n    const previousServiceName = (_c = (_a = storedSessionOverrides.serviceName) !== null && _a !== void 0 ? _a : (_b = faro.metas.value.app) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : '';\n    if (serviceName && serviceName !== previousServiceName) {\n        faro.api.pushEvent(EVENT_OVERRIDES_SERVICE_NAME, {\n            serviceName,\n            previousServiceName,\n        });\n    }\n}\n//# sourceMappingURL=sessionManagerUtils.js.map","import { faro, stringifyExternalJson } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nexport class PersistentSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: PersistentSessionsManager.fetchUserSession,\n            storeUserSession: PersistentSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, stringifyExternalJson(session), PersistentSessionsManager.storageTypeLocal);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, PersistentSessionsManager.storageTypeLocal);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(getSessionMetaUpdateHandler({\n            fetchUserSession: PersistentSessionsManager.fetchUserSession,\n            storeUserSession: PersistentSessionsManager.storeUserSession,\n        }));\n    }\n}\nPersistentSessionsManager.storageTypeLocal = webStorageType.local;\n//# sourceMappingURL=PersistentSessionsManager.js.map","import { faro, stringifyExternalJson } from '@grafana/faro-core';\nimport { throttle } from '../../../utils';\nimport { getItem, removeItem, setItem, webStorageType } from '../../../utils/webStorage';\nimport { STORAGE_KEY, STORAGE_UPDATE_DELAY } from './sessionConstants';\nimport { getSessionMetaUpdateHandler, getUserSessionUpdater } from './sessionManagerUtils';\nexport class VolatileSessionsManager {\n    constructor() {\n        this.updateSession = throttle(() => this.updateUserSession(), STORAGE_UPDATE_DELAY);\n        this.updateUserSession = getUserSessionUpdater({\n            fetchUserSession: VolatileSessionsManager.fetchUserSession,\n            storeUserSession: VolatileSessionsManager.storeUserSession,\n        });\n        this.init();\n    }\n    static removeUserSession() {\n        removeItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n    }\n    static storeUserSession(session) {\n        setItem(STORAGE_KEY, stringifyExternalJson(session), VolatileSessionsManager.storageTypeSession);\n    }\n    static fetchUserSession() {\n        const storedSession = getItem(STORAGE_KEY, VolatileSessionsManager.storageTypeSession);\n        if (storedSession) {\n            return JSON.parse(storedSession);\n        }\n        return null;\n    }\n    init() {\n        document.addEventListener('visibilitychange', () => {\n            if (document.visibilityState === 'visible') {\n                this.updateSession();\n            }\n        });\n        // Users can call the setSession() method, so we need to sync this with the local storage session\n        faro.metas.addListener(getSessionMetaUpdateHandler({\n            fetchUserSession: VolatileSessionsManager.fetchUserSession,\n            storeUserSession: VolatileSessionsManager.storeUserSession,\n        }));\n    }\n}\nVolatileSessionsManager.storageTypeSession = webStorageType.session;\n//# sourceMappingURL=VolatileSessionManager.js.map","import { PersistentSessionsManager } from './PersistentSessionsManager';\nimport { VolatileSessionsManager } from './VolatileSessionManager';\nexport function getSessionManagerByConfig(sessionTrackingConfig) {\n    return (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.persistent) ? PersistentSessionsManager : VolatileSessionsManager;\n}\n//# sourceMappingURL=getSessionManagerByConfig.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { BaseExtension, BaseTransport, createPromiseBuffer, getTransportBody, noop, VERSION } from '@grafana/faro-core';\nimport { getSessionManagerByConfig } from '../../instrumentations/session/sessionManager';\nimport { getUserSessionUpdater } from '../../instrumentations/session/sessionManager/sessionManagerUtils';\nconst DEFAULT_BUFFER_SIZE = 30;\nconst DEFAULT_CONCURRENCY = 5; // chrome supports 10 total, firefox 17\nconst DEFAULT_RATE_LIMIT_BACKOFF_MS = 5000;\nconst BEACON_BODY_SIZE_LIMIT = 60000;\nconst TOO_MANY_REQUESTS = 429;\nconst ACCEPTED = 202;\nexport class FetchTransport extends BaseTransport {\n    constructor(options) {\n        var _a, _b, _c, _d;\n        super();\n        this.options = options;\n        this.name = '@grafana/faro-web-sdk:transport-fetch';\n        this.version = VERSION;\n        this.disabledUntil = new Date();\n        this.rateLimitBackoffMs = (_a = options.defaultRateLimitBackoffMs) !== null && _a !== void 0 ? _a : DEFAULT_RATE_LIMIT_BACKOFF_MS;\n        this.getNow = (_b = options.getNow) !== null && _b !== void 0 ? _b : (() => Date.now());\n        this.promiseBuffer = createPromiseBuffer({\n            size: (_c = options.bufferSize) !== null && _c !== void 0 ? _c : DEFAULT_BUFFER_SIZE,\n            concurrency: (_d = options.concurrency) !== null && _d !== void 0 ? _d : DEFAULT_CONCURRENCY,\n        });\n    }\n    send(items) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                if (this.disabledUntil > new Date(this.getNow())) {\n                    this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`);\n                    return Promise.resolve();\n                }\n                yield this.promiseBuffer.add(() => {\n                    const body = JSON.stringify(getTransportBody(items));\n                    const { url, requestOptions, apiKey } = this.options;\n                    const _a = requestOptions !== null && requestOptions !== void 0 ? requestOptions : {}, { headers } = _a, restOfRequestOptions = __rest(_a, [\"headers\"]);\n                    let sessionId;\n                    const sessionMeta = this.metas.value.session;\n                    if (sessionMeta != null) {\n                        sessionId = sessionMeta.id;\n                    }\n                    return fetch(url, Object.assign({ method: 'POST', headers: Object.assign(Object.assign(Object.assign({ 'Content-Type': 'application/json' }, (headers !== null && headers !== void 0 ? headers : {})), (apiKey ? { 'x-api-key': apiKey } : {})), (sessionId ? { 'x-faro-session-id': sessionId } : {})), body, keepalive: body.length <= BEACON_BODY_SIZE_LIMIT }, (restOfRequestOptions !== null && restOfRequestOptions !== void 0 ? restOfRequestOptions : {})))\n                        .then((response) => __awaiter(this, void 0, void 0, function* () {\n                        if (response.status === ACCEPTED) {\n                            const sessionExpired = response.headers.get('X-Faro-Session-Status') === 'invalid';\n                            if (sessionExpired) {\n                                this.extendFaroSession(this.config, this.logDebug);\n                            }\n                        }\n                        if (response.status === TOO_MANY_REQUESTS) {\n                            this.disabledUntil = this.getRetryAfterDate(response);\n                            this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`);\n                        }\n                        // read the body so the connection can be closed\n                        response.text().catch(noop);\n                        return response;\n                    }))\n                        .catch((err) => {\n                        this.logError('Failed sending payload to the receiver\\n', JSON.parse(body), err);\n                    });\n                });\n            }\n            catch (err) {\n                this.logError(err);\n            }\n        });\n    }\n    getIgnoreUrls() {\n        var _a;\n        return [this.options.url].concat((_a = this.config.ignoreUrls) !== null && _a !== void 0 ? _a : []);\n    }\n    isBatched() {\n        return true;\n    }\n    getRetryAfterDate(response) {\n        const now = this.getNow();\n        const retryAfterHeader = response.headers.get('Retry-After');\n        if (retryAfterHeader) {\n            const delay = Number(retryAfterHeader);\n            if (!isNaN(delay)) {\n                return new Date(delay * 1000 + now);\n            }\n            const date = Date.parse(retryAfterHeader);\n            if (!isNaN(date)) {\n                return new Date(date);\n            }\n        }\n        return new Date(now + this.rateLimitBackoffMs);\n    }\n    extendFaroSession(config, logDebug) {\n        const SessionExpiredString = `Session expired`;\n        const sessionTrackingConfig = config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const { fetchUserSession, storeUserSession } = getSessionManagerByConfig(sessionTrackingConfig);\n            getUserSessionUpdater({ fetchUserSession, storeUserSession })({ forceSessionExtend: true });\n            logDebug(`${SessionExpiredString} created new session.`);\n        }\n        else {\n            logDebug(`${SessionExpiredString}.`);\n        }\n    }\n}\n//# sourceMappingURL=transport.js.map","export function createPromiseBuffer(options) {\n    const { size, concurrency } = options;\n    const buffer = []; // pending, not-yet-started tasks\n    let inProgress = 0; // counter for tasks currently in progress\n    const work = () => {\n        // if there's space for a task and buffer is not empty,\n        // take one task from buffer and run it\n        if (inProgress < concurrency && buffer.length) {\n            const { producer, resolve, reject } = buffer.shift();\n            inProgress++;\n            producer().then((result) => {\n                inProgress--;\n                work();\n                resolve(result);\n            }, (reason) => {\n                inProgress--;\n                work();\n                reject(reason);\n            });\n        }\n    };\n    const add = (promiseProducer) => {\n        if (buffer.length + inProgress >= size) {\n            throw new Error('Task buffer full');\n        }\n        return new Promise((resolve, reject) => {\n            buffer.push({\n                producer: promiseProducer,\n                resolve,\n                reject,\n            });\n            work();\n        });\n    };\n    return {\n        add,\n    };\n}\n//# sourceMappingURL=promiseBuffer.js.map","import { BaseExtension } from '../extensions';\nexport class BaseInstrumentation extends BaseExtension {\n    constructor() {\n        super(...arguments);\n        this.api = {};\n        this.transports = {};\n    }\n}\n//# sourceMappingURL=base.js.map","import { faro, isEmpty, isFunction, isString } from '@grafana/faro-core';\n/**\n * Retrieves a list of URLs to be ignored by aggregating the ignore URLs from all transports.\n *\n * @returns {string[]} An array of URLs to be ignored.\n */\nexport function getIgnoreUrls() {\n    return faro.transports.transports.flatMap((transport) => transport.getIgnoreUrls());\n}\n/**\n * Checks if the given URL should be ignored based on a list of ignored URLs.\n *\n * @param url - The URL to check.\n * @returns `true` if the URL is in the list of ignored URLs, `false` otherwise.\n */\nexport function isUrlIgnored(url = '') {\n    return getIgnoreUrls().some((ignoredUrl) => url && url.match(ignoredUrl) != null);\n}\n/**\n * Extracts a URL string from the given resource.\n *\n * @param resource - The input resource which can be a string, a URL object, or an object with a `toString` method.\n * @returns The URL as a string if the resource is a valid URL-like object, or `undefined` if the resource is not valid.\n *\n */\nexport function getUrlFromResource(resource) {\n    if (isString(resource)) {\n        return resource;\n    }\n    if (resource instanceof URL) {\n        return resource.href;\n    }\n    if (!isEmpty(resource) && isFunction(resource === null || resource === void 0 ? void 0 : resource.toString)) {\n        return resource.toString();\n    }\n    return undefined;\n}\n//# sourceMappingURL=url.js.map","import { genShortID, Observable } from '@grafana/faro-core';\nimport { getUrlFromResource, isUrlIgnored } from '../../utils/url';\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START } from './const';\nconst apiTypeFetch = 'fetch';\nconst apiTypeXhr = 'xhr';\n/**\n * Monitors if any http requests are in progress.\n */\nexport function monitorHttpRequests() {\n    const observable = new Observable();\n    function emitStartMessage(requestProps) {\n        observable.notify({\n            type: MESSAGE_TYPE_HTTP_REQUEST_START,\n            request: requestProps,\n        });\n    }\n    function emitEndMessage(requestProps) {\n        observable.notify({\n            type: MESSAGE_TYPE_HTTP_REQUEST_END,\n            request: requestProps,\n        });\n    }\n    monitorFetch({\n        onRequestStart: emitStartMessage,\n        onRequestEnd: emitEndMessage,\n    });\n    monitorXhr({\n        onRequestStart: emitStartMessage,\n        onRequestEnd: emitEndMessage,\n    });\n    return observable;\n}\nfunction monitorXhr({ onRequestStart, onRequestEnd, }) {\n    const originalOpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function () {\n        const url = arguments[1];\n        const isIgnoredUrl = isUrlIgnored(url);\n        const method = arguments[0];\n        const requestId = genShortID();\n        // request has started to load data.\n        this.addEventListener('loadstart', function () {\n            if (!isIgnoredUrl) {\n                onRequestStart({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        // transaction completes successfully.\n        this.addEventListener('load', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        this.addEventListener('error', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        this.addEventListener('abort', function () {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeXhr });\n            }\n        });\n        originalOpen.apply(this, arguments);\n    };\n}\nfunction monitorFetch({ onRequestEnd, onRequestStart, }) {\n    const originalFetch = window.fetch;\n    window.fetch = function () {\n        var _a, _b;\n        const url = (_a = getUrlFromResource(arguments[0])) !== null && _a !== void 0 ? _a : '';\n        const isIgnoredUrl = isUrlIgnored(url);\n        const method = ((_b = arguments[1]) !== null && _b !== void 0 ? _b : {}).method;\n        const requestId = genShortID();\n        if (!isIgnoredUrl) {\n            onRequestStart({ url, method, requestId, apiType: apiTypeFetch });\n        }\n        return originalFetch\n            .apply(this, arguments)\n            .then((response) => {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n            }\n            return response;\n        })\n            .catch((error) => {\n            if (!isIgnoredUrl) {\n                onRequestEnd({ url, method, requestId, apiType: apiTypeFetch });\n            }\n            throw error;\n        });\n    };\n}\n//# sourceMappingURL=httpRequestMonitor.js.map","export const NAVIGATION_ID_STORAGE_KEY = 'com.grafana.faro.lastNavigationId';\n//# sourceMappingURL=instrumentationConstants.js.map","export const NAVIGATION_ENTRY = 'navigation';\nexport const RESOURCE_ENTRY = 'resource';\n//# sourceMappingURL=performanceConstants.js.map","import { isArray, unknownString } from '@grafana/faro-core';\nconst w3cTraceparentFormat = /^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;\n// Extract traceparent from serverTiming, if present\nexport function getSpanContextFromServerTiming(serverTimings = []) {\n    for (const serverEntry of serverTimings) {\n        if (serverEntry.name === 'traceparent') {\n            if (!w3cTraceparentFormat.test(serverEntry.description)) {\n                continue;\n            }\n            const [, traceId, spanId] = serverEntry.description.split('-');\n            if (traceId != null && spanId != null) {\n                return { traceId, spanId };\n            }\n            break;\n        }\n    }\n    return undefined;\n}\nexport function performanceObserverSupported() {\n    return 'PerformanceObserver' in window;\n}\nexport function onDocumentReady(handleReady) {\n    if (document.readyState === 'complete') {\n        handleReady();\n    }\n    else {\n        const readyStateCompleteHandler = () => {\n            if (document.readyState === 'complete') {\n                handleReady();\n                document.removeEventListener('readystatechange', readyStateCompleteHandler);\n            }\n        };\n        document.addEventListener('readystatechange', readyStateCompleteHandler);\n    }\n}\nexport function includePerformanceEntry(performanceEntryJSON, allowProps = {}) {\n    for (const [allowPropKey, allowPropValue] of Object.entries(allowProps)) {\n        const perfEntryPropVal = performanceEntryJSON[allowPropKey];\n        if (perfEntryPropVal == null) {\n            return false;\n        }\n        if (isArray(allowPropValue)) {\n            return allowPropValue.includes(perfEntryPropVal);\n        }\n        return perfEntryPropVal === allowPropValue;\n    }\n    // empty object allows all\n    return true;\n}\nexport function createFaroResourceTiming(resourceEntryRaw) {\n    const { connectEnd, connectStart, decodedBodySize, domainLookupEnd, domainLookupStart, duration, encodedBodySize, fetchStart, initiatorType, name, nextHopProtocol, redirectEnd, redirectStart, \n    // @ts-expect-error the renderBlockingStatus property is not available in all browsers\n    renderBlockingStatus: rbs, requestStart, responseEnd, responseStart, responseStatus, secureConnectionStart, transferSize, workerStart, } = resourceEntryRaw;\n    return {\n        name: name,\n        duration: toFaroPerformanceTimingString(duration),\n        tcpHandshakeTime: toFaroPerformanceTimingString(connectEnd - connectStart),\n        dnsLookupTime: toFaroPerformanceTimingString(domainLookupEnd - domainLookupStart),\n        tlsNegotiationTime: toFaroPerformanceTimingString(connectEnd - secureConnectionStart),\n        responseStatus: toFaroPerformanceTimingString(responseStatus),\n        redirectTime: toFaroPerformanceTimingString(redirectEnd - redirectStart),\n        requestTime: toFaroPerformanceTimingString(responseStart - requestStart),\n        responseTime: toFaroPerformanceTimingString(responseEnd - responseStart),\n        fetchTime: toFaroPerformanceTimingString(responseEnd - fetchStart),\n        serviceWorkerTime: toFaroPerformanceTimingString(fetchStart - workerStart),\n        decodedBodySize: toFaroPerformanceTimingString(decodedBodySize),\n        encodedBodySize: toFaroPerformanceTimingString(encodedBodySize),\n        cacheHitStatus: getCacheType(),\n        renderBlockingStatus: toFaroPerformanceTimingString(rbs),\n        protocol: nextHopProtocol,\n        initiatorType: initiatorType,\n        visibilityState: document.visibilityState,\n        ttfb: toFaroPerformanceTimingString(responseStart - requestStart),\n        transferSize: toFaroPerformanceTimingString(transferSize),\n        // TODO: add in future iteration, ideally after nested objects are supported by the collector.\n        // serverTiming: resourceEntryRaw.serverTiming,\n    };\n    function getCacheType() {\n        let cacheType = 'fullLoad';\n        if (transferSize === 0) {\n            if (decodedBodySize > 0) {\n                cacheType = 'cache';\n            }\n        }\n        else {\n            if (responseStatus != null) {\n                if (responseStatus === 304) {\n                    cacheType = 'conditionalFetch';\n                }\n            }\n            else if (encodedBodySize > 0 && transferSize < encodedBodySize) {\n                cacheType = 'conditionalFetch';\n            }\n        }\n        return cacheType;\n    }\n}\nexport function createFaroNavigationTiming(navigationEntryRaw) {\n    const { activationStart, domComplete, domContentLoadedEventEnd, domContentLoadedEventStart, domInteractive, fetchStart, loadEventEnd, loadEventStart, responseStart, type, } = navigationEntryRaw;\n    const parserStart = getDocumentParsingTime();\n    return Object.assign(Object.assign({}, createFaroResourceTiming(navigationEntryRaw)), { pageLoadTime: toFaroPerformanceTimingString(domComplete - fetchStart), documentParsingTime: toFaroPerformanceTimingString(parserStart ? domInteractive - parserStart : null), domProcessingTime: toFaroPerformanceTimingString(domComplete - domInteractive), domContentLoadHandlerTime: toFaroPerformanceTimingString(domContentLoadedEventEnd - domContentLoadedEventStart), onLoadTime: toFaroPerformanceTimingString(loadEventEnd - loadEventStart), \n        // For navigation entries we can calculate the TTFB based on activationStart. We overwrite the TTFB value coming with the resource entry.\n        // For more accuracy on prerendered pages page we calculate relative top the activationStart instead of the start of the navigation.\n        // clamp to 0 if activationStart occurs after first byte is received.\n        ttfb: toFaroPerformanceTimingString(Math.max(responseStart - (activationStart !== null && activationStart !== void 0 ? activationStart : 0), 0)), type: type });\n}\nfunction getDocumentParsingTime() {\n    var _a;\n    if (((_a = performance.timing) === null || _a === void 0 ? void 0 : _a.domLoading) != null) {\n        // the browser is about to start parsing the first received bytes of the HTML document.\n        // This property is deprecated but there isn't a really good alternative atm.\n        // For now we stick with domLoading and keep researching a better alternative.\n        return performance.timing.domLoading - performance.timeOrigin;\n    }\n    return null;\n}\nfunction toFaroPerformanceTimingString(v) {\n    if (v == null) {\n        return unknownString;\n    }\n    if (typeof v === 'number') {\n        return Math.round(v > 0 ? v : 0).toString();\n    }\n    return v.toString();\n}\n//# sourceMappingURL=performanceUtils.js.map","import { faro, genShortID } from '@grafana/faro-core';\nimport { isUrlIgnored } from '../../utils/url';\nimport { RESOURCE_ENTRY } from './performanceConstants';\nimport { createFaroResourceTiming, getSpanContextFromServerTiming, includePerformanceEntry } from './performanceUtils';\nconst DEFAULT_TRACK_RESOURCES = { initiatorType: ['xmlhttprequest', 'fetch'] };\nexport function observeResourceTimings(faroNavigationId, pushEvent, observable) {\n    const trackResources = faro.config.trackResources;\n    const observer = new PerformanceObserver((observedEntries) => {\n        const entries = observedEntries.getEntries();\n        for (const resourceEntryRaw of entries) {\n            if (isUrlIgnored(resourceEntryRaw.name)) {\n                return;\n            }\n            const resourceEntryJson = resourceEntryRaw.toJSON();\n            let spanContext = getSpanContextFromServerTiming(resourceEntryJson === null || resourceEntryJson === void 0 ? void 0 : resourceEntryJson.serverTiming);\n            if ((trackResources == null && includePerformanceEntry(resourceEntryJson, DEFAULT_TRACK_RESOURCES)) ||\n                trackResources) {\n                const faroResourceEntry = Object.assign(Object.assign({}, createFaroResourceTiming(resourceEntryJson)), { faroNavigationId, faroResourceId: genShortID() });\n                if (faro.config.trackUserActionsPreview) {\n                    observable === null || observable === void 0 ? void 0 : observable.notify({\n                        type: RESOURCE_ENTRY,\n                    });\n                }\n                pushEvent('faro.performance.resource', faroResourceEntry, undefined, {\n                    spanContext,\n                    timestampOverwriteMs: performance.timeOrigin + resourceEntryJson.startTime,\n                });\n            }\n        }\n    });\n    observer.observe({\n        type: RESOURCE_ENTRY,\n        buffered: true,\n    });\n}\n//# sourceMappingURL=resource.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { BaseInstrumentation, Observable, VERSION } from '@grafana/faro-core';\nimport { getNavigationTimings } from './navigation';\nimport { onDocumentReady, performanceObserverSupported } from './performanceUtils';\nimport { observeResourceTimings } from './resource';\nexport const performanceEntriesSubscription = new Observable();\nexport class PerformanceInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-performance';\n        this.version = VERSION;\n    }\n    initialize() {\n        if (!performanceObserverSupported()) {\n            this.logDebug('performance observer not supported. Disable performance instrumentation.');\n            return;\n        }\n        onDocumentReady(() => __awaiter(this, void 0, void 0, function* () {\n            const pushEvent = this.api.pushEvent;\n            const { faroNavigationId } = yield getNavigationTimings(pushEvent);\n            if (faroNavigationId != null) {\n                observeResourceTimings(faroNavigationId, pushEvent, performanceEntriesSubscription);\n            }\n        }));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { genShortID, unknownString } from '@grafana/faro-core';\nimport { getItem, setItem, webStorageType } from '../../utils';\nimport { isUrlIgnored } from '../../utils/url';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\nimport { NAVIGATION_ENTRY } from './performanceConstants';\nimport { createFaroNavigationTiming, getSpanContextFromServerTiming } from './performanceUtils';\nexport function getNavigationTimings(pushEvent) {\n    let faroNavigationEntryResolve;\n    const faroNavigationEntryPromise = new Promise((resolve) => {\n        faroNavigationEntryResolve = resolve;\n    });\n    const observer = new PerformanceObserver((observedEntries) => {\n        var _a;\n        const [navigationEntryRaw] = observedEntries.getEntries();\n        if (navigationEntryRaw == null || isUrlIgnored(navigationEntryRaw.name)) {\n            return;\n        }\n        const navEntryJson = navigationEntryRaw.toJSON();\n        let spanContext = getSpanContextFromServerTiming(navEntryJson === null || navEntryJson === void 0 ? void 0 : navEntryJson.serverTiming);\n        const faroPreviousNavigationId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        const faroNavigationEntry = Object.assign(Object.assign({}, createFaroNavigationTiming(navEntryJson)), { faroNavigationId: genShortID(), faroPreviousNavigationId });\n        setItem(NAVIGATION_ID_STORAGE_KEY, faroNavigationEntry.faroNavigationId, webStorageType.session);\n        pushEvent('faro.performance.navigation', faroNavigationEntry, undefined, {\n            spanContext,\n            timestampOverwriteMs: performance.timeOrigin + navEntryJson.startTime,\n        });\n        faroNavigationEntryResolve(faroNavigationEntry);\n    });\n    observer.observe({\n        type: NAVIGATION_ENTRY,\n        buffered: true,\n    });\n    return faroNavigationEntryPromise;\n}\n//# sourceMappingURL=navigation.js.map","import { Observable, UserActionState } from '@grafana/faro-core';\nimport { MESSAGE_TYPE_HTTP_REQUEST_END, MESSAGE_TYPE_HTTP_REQUEST_START, userActionDataAttributeParsed as userActionDataAttribute, } from './const';\nimport { monitorDomMutations } from './domMutationMonitor';\nimport { monitorHttpRequests } from './httpRequestMonitor';\nimport { monitorPerformanceEntries } from './performanceEntriesMonitor';\nimport { convertDataAttributeName } from './util';\nexport function getUserEventHandler(faro) {\n    const { api, config } = faro;\n    const httpMonitor = monitorHttpRequests();\n    const domMutationsMonitor = monitorDomMutations();\n    const performanceEntriesMonitor = monitorPerformanceEntries();\n    function processUserEvent(event) {\n        var _a;\n        const userActionName = getUserActionNameFromElement(event.target, (_a = config.trackUserActionsDataAttributeName) !== null && _a !== void 0 ? _a : userActionDataAttribute);\n        // We don't have a data attribute\n        if (!userActionName) {\n            return;\n        }\n        const userAction = api.startUserAction(userActionName, {}, { triggerName: event.type });\n        if (userAction) {\n            proceessUserActionStarted(userAction);\n        }\n    }\n    function proceessUserActionStarted(userAction) {\n        const runningRequests = new Map();\n        const allMonitorsSub = new Observable()\n            .merge(httpMonitor, domMutationsMonitor, performanceEntriesMonitor)\n            .takeWhile(() => [UserActionState.Started, UserActionState.Halted].includes(userAction.getState()))\n            .filter((msg) => {\n            // If the user action is in halt state, we only keep listening to ended http requests\n            if (userAction.getState() === UserActionState.Halted &&\n                !(isRequestEndMessage(msg) && runningRequests.has(msg.request.requestId))) {\n                return false;\n            }\n            return true;\n        })\n            .subscribe((msg) => {\n            if (isRequestStartMessage(msg)) {\n                // An action is on halt if it has pending items, like pending HTTP requests.\n                // In this case we start a separate timeout to wait for the requests to finish\n                // If in the halt state, we stop adding Faro signals to the action's buffer (see userActionLifecycleHandler.ts)\n                // But we are still subscribed to\n                runningRequests.set(msg.request.requestId, msg.request);\n            }\n            if (isRequestEndMessage(msg)) {\n                runningRequests.delete(msg.request.requestId);\n            }\n            if (!isRequestEndMessage(msg)) {\n                userAction.extend(() => runningRequests.size > 0);\n            }\n            else if (userAction.getState() === UserActionState.Halted && runningRequests.size === 0) {\n                userAction.end();\n            }\n        });\n        userAction\n            .filter((v) => [UserActionState.Ended, UserActionState.Cancelled].includes(v))\n            .first()\n            .subscribe(() => {\n            unsubscribeAllMonitors(allMonitorsSub);\n        });\n    }\n    return { processUserEvent, proceessUserActionStarted };\n}\nexport function getUserActionNameFromElement(element, dataAttributeName) {\n    const parsedDataAttributeName = convertDataAttributeName(dataAttributeName);\n    const dataset = element.dataset;\n    for (const key in dataset) {\n        if (key === parsedDataAttributeName) {\n            return dataset[key];\n        }\n    }\n    return undefined;\n}\nexport function unsubscribeAllMonitors(allMonitorsSub) {\n    allMonitorsSub === null || allMonitorsSub === void 0 ? void 0 : allMonitorsSub.unsubscribe();\n    allMonitorsSub = undefined;\n}\nexport function isRequestStartMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_START;\n}\nexport function isRequestEndMessage(msg) {\n    return msg.type === MESSAGE_TYPE_HTTP_REQUEST_END;\n}\n//# sourceMappingURL=processUserActionEventHandler.js.map","import { Observable } from '@grafana/faro-core';\nimport { MESSAGE_TYPE_DOM_MUTATION } from './const';\nexport function monitorDomMutations() {\n    const observable = new Observable();\n    const observer = new MutationObserver((_mutationsList, _observer) => {\n        observable.notify({ type: MESSAGE_TYPE_DOM_MUTATION });\n    });\n    observer.observe(document, {\n        attributes: true,\n        childList: true,\n        subtree: true,\n        characterData: true,\n    });\n    return observable;\n}\n//# sourceMappingURL=domMutationMonitor.js.map","import { Observable } from '@grafana/faro-core';\nimport { performanceEntriesSubscription } from '../performance/instrumentation';\nimport { RESOURCE_ENTRY } from '../performance/performanceConstants';\nimport { MESSAGE_TYPE_RESOURCE_ENTRY } from './const';\nexport function monitorPerformanceEntries() {\n    const observable = new Observable();\n    performanceEntriesSubscription.subscribe((data) => {\n        if (data.type === RESOURCE_ENTRY) {\n            observable.notify({ type: MESSAGE_TYPE_RESOURCE_ENTRY });\n        }\n    });\n    return observable;\n}\n//# sourceMappingURL=performanceEntriesMonitor.js.map","/**\n * Parses the action attribute name by removing the 'data-' prefix and converting\n * the remaining string to camelCase.\n *\n * This is needed because the browser will remove the 'data-' prefix and the dashes from\n * data attributes and make then camelCase.\n */\nexport function convertDataAttributeName(userActionDataAttribute) {\n    const withoutData = userActionDataAttribute.split('data-')[1];\n    const withUpperCase = withoutData === null || withoutData === void 0 ? void 0 : withoutData.replace(/-(.)/g, (_, char) => char.toUpperCase());\n    return withUpperCase === null || withUpperCase === void 0 ? void 0 : withUpperCase.replace(/-/g, '');\n}\n//# sourceMappingURL=util.js.map","import { BaseInstrumentation, faro, userActionsMessageBus, VERSION } from '@grafana/faro-core';\nimport { getUserEventHandler } from './processUserActionEventHandler';\nexport class UserActionInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-user-action';\n        this.version = VERSION;\n    }\n    initialize() {\n        const { processUserEvent, proceessUserActionStarted } = getUserEventHandler(faro);\n        window.addEventListener('pointerdown', processUserEvent);\n        window.addEventListener('keydown', (ev) => {\n            if ([' ', 'Enter'].includes(ev.key)) {\n                processUserEvent(ev);\n            }\n        });\n        this._userActionSub = userActionsMessageBus.subscribe(({ type, userAction }) => {\n            if (type === 'user_action_start') {\n                proceessUserActionStarted(userAction);\n            }\n        });\n    }\n    destroy() {\n        var _a;\n        (_a = this._userActionSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","export const primitiveUnhandledValue = 'Non-Error promise rejection captured with value:';\nexport const primitiveUnhandledType = 'UnhandledRejection';\nexport const domErrorType = 'DOMError';\nexport const domExceptionType = 'DOMException';\nexport const objectEventValue = 'Non-Error exception captured with keys:';\nexport const unknownSymbolString = '?';\nexport const valueTypeRegex = /^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;\n//# sourceMappingURL=const.js.map","import { isDomError, isDomException, isError, isErrorEvent, isEvent, isObject, isString } from '@grafana/faro-core';\nimport { domErrorType, domExceptionType, objectEventValue, unknownSymbolString } from './const';\nimport { getValueAndTypeFromMessage } from './getValueAndTypeFromMessage';\nimport { buildStackFrame, getStackFramesFromError } from './stackFrames';\nexport function getErrorDetails(evt) {\n    let value;\n    let type;\n    let stackFrames = [];\n    let isDomErrorRes;\n    let isEventRes;\n    if (isErrorEvent(evt) && evt.error) {\n        value = evt.error.message;\n        type = evt.error.name;\n        stackFrames = getStackFramesFromError(evt.error);\n    }\n    else if ((isDomErrorRes = isDomError(evt)) || isDomException(evt)) {\n        const { name, message } = evt;\n        type = name !== null && name !== void 0 ? name : (isDomErrorRes ? domErrorType : domExceptionType);\n        value = message ? `${type}: ${message}` : type;\n    }\n    else if (isError(evt)) {\n        value = evt.message;\n        stackFrames = getStackFramesFromError(evt);\n    }\n    else if (isObject(evt) || (isEventRes = isEvent(evt))) {\n        type = isEventRes ? evt.constructor.name : undefined;\n        value = `${objectEventValue} ${Object.keys(evt)}`;\n    }\n    return [value, type, stackFrames];\n}\nexport function getDetailsFromErrorArgs(args) {\n    const [evt, source, lineno, colno, error] = args;\n    let value;\n    let type;\n    let stackFrames = [];\n    const eventIsString = isString(evt);\n    const initialStackFrame = buildStackFrame(source, unknownSymbolString, lineno, colno);\n    if (error || !eventIsString) {\n        [value, type, stackFrames] = getErrorDetails((error !== null && error !== void 0 ? error : evt));\n        if (stackFrames.length === 0) {\n            stackFrames = [initialStackFrame];\n        }\n    }\n    else if (eventIsString) {\n        [value, type] = getValueAndTypeFromMessage(evt);\n        stackFrames = [initialStackFrame];\n    }\n    return { value, type, stackFrames };\n}\nexport function getDetailsFromConsoleErrorArgs(args, serializer) {\n    if (isError(args[0])) {\n        return getDetailsFromErrorArgs(args);\n    }\n    else {\n        return { value: serializer(args) };\n    }\n}\n//# sourceMappingURL=getErrorDetails.js.map","import { defaultExceptionType } from '@grafana/faro-core';\nimport { valueTypeRegex } from './const';\nexport function getValueAndTypeFromMessage(message) {\n    var _a, _b;\n    const groups = message.match(valueTypeRegex);\n    const type = (_a = groups === null || groups === void 0 ? void 0 : groups[1]) !== null && _a !== void 0 ? _a : defaultExceptionType;\n    const value = (_b = groups === null || groups === void 0 ? void 0 : groups[2]) !== null && _b !== void 0 ? _b : message;\n    return [value, type];\n}\n//# sourceMappingURL=getValueAndTypeFromMessage.js.map","import { isPrimitive } from '@grafana/faro-core';\nimport { primitiveUnhandledType, primitiveUnhandledValue } from './const';\nimport { getErrorDetails } from './getErrorDetails';\nexport function registerOnunhandledrejection(api) {\n    window.addEventListener('unhandledrejection', (evt) => {\n        var _a, _b;\n        let error = evt;\n        if (error.reason) {\n            error = evt.reason;\n        }\n        else if ((_a = evt.detail) === null || _a === void 0 ? void 0 : _a.reason) {\n            error = (_b = evt.detail) === null || _b === void 0 ? void 0 : _b.reason;\n        }\n        let value;\n        let type;\n        let stackFrames = [];\n        if (isPrimitive(error)) {\n            value = `${primitiveUnhandledValue} ${String(error)}`;\n            type = primitiveUnhandledType;\n        }\n        else {\n            [value, type, stackFrames] = getErrorDetails(error);\n        }\n        if (value) {\n            api.pushError(new Error(value), { type, stackFrames });\n        }\n    });\n}\n//# sourceMappingURL=registerOnunhandledrejection.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { registerOnerror } from './registerOnerror';\nimport { registerOnunhandledrejection } from './registerOnunhandledrejection';\nexport class ErrorsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-errors';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        registerOnerror(this.api);\n        registerOnunhandledrejection(this.api);\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { getDetailsFromErrorArgs } from './getErrorDetails';\nexport function registerOnerror(api) {\n    const oldOnerror = window.onerror;\n    window.onerror = (...args) => {\n        try {\n            const { value, type, stackFrames } = getDetailsFromErrorArgs(args);\n            const originalError = args[4];\n            if (value) {\n                const options = { type, stackFrames };\n                if (originalError != null) {\n                    options.originalError = originalError;\n                }\n                api.pushError(new Error(value), options);\n            }\n        }\n        finally {\n            oldOnerror === null || oldOnerror === void 0 ? void 0 : oldOnerror.apply(window, args);\n        }\n    };\n}\n//# sourceMappingURL=registerOnerror.js.map","let e=-1;const t=t=>{addEventListener(\"pageshow\",(n=>{n.persisted&&(e=n.timeStamp,t(n))}),!0)},n=(e,t,n,i)=>{let s,o;return r=>{t.value>=0&&(r||i)&&(o=t.value-(s??0),(o||void 0===s)&&(s=t.value,t.delta=o,t.rating=((e,t)=>e>t[1]?\"poor\":e>t[0]?\"needs-improvement\":\"good\")(t.value,n),e(t)))}},i=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},s=()=>{const e=performance.getEntriesByType(\"navigation\")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},o=()=>{const e=s();return e?.activationStart??0},r=(t,n=-1)=>{const i=s();let r=\"navigate\";e>=0?r=\"back-forward-cache\":i&&(document.prerendering||o()>0?r=\"prerender\":document.wasDiscarded?r=\"restore\":i.type&&(r=i.type.replace(/_/g,\"-\")));return{name:t,value:n,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},c=new WeakMap;function a(e,t){return c.get(e)||c.set(e,new t),c.get(e)}class d{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],n=this.o.at(-1);this.i&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const h=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return i.observe({type:e,buffered:!0,...n}),i}}catch{}},f=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let u=-1;const l=new Set,m=()=>\"hidden\"!==document.visibilityState||document.prerendering?1/0:0,p=e=>{if(\"hidden\"===document.visibilityState){if(\"visibilitychange\"===e.type)for(const e of l)e();isFinite(u)||(u=\"visibilitychange\"===e.type?e.timeStamp:0,removeEventListener(\"prerenderingchange\",p,!0))}},v=()=>{if(u<0){const e=o(),n=document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter((t=>\"hidden\"===t.name&&t.startTime>e))[0]?.startTime;u=n??m(),addEventListener(\"visibilitychange\",p,!0),addEventListener(\"prerenderingchange\",p,!0),t((()=>{setTimeout((()=>{u=m()}))}))}return{get firstHiddenTime(){return u},onHidden(e){l.add(e)}}},g=e=>{document.prerendering?addEventListener(\"prerenderingchange\",(()=>e()),!0):e()},y=[1800,3e3],E=(e,s={})=>{g((()=>{const c=v();let a,d=r(\"FCP\");const f=h(\"paint\",(e=>{for(const t of e)\"first-contentful-paint\"===t.name&&(f.disconnect(),t.startTime<c.firstHiddenTime&&(d.value=Math.max(t.startTime-o(),0),d.entries.push(t),a(!0)))}));f&&(a=n(e,d,y,s.reportAllChanges),t((t=>{d=r(\"FCP\"),a=n(e,d,y,s.reportAllChanges),i((()=>{d.value=performance.now()-t.timeStamp,a(!0)}))})))}))},b=[.1,.25],L=(e,s={})=>{const o=v();E(f((()=>{let c,f=r(\"CLS\",0);const u=a(s,d),l=e=>{for(const t of e)u.h(t);u.i>f.value&&(f.value=u.i,f.entries=u.o,c())},m=h(\"layout-shift\",l);m&&(c=n(e,f,b,s.reportAllChanges),o.onHidden((()=>{l(m.takeRecords()),c(!0)})),t((()=>{u.i=0,f=r(\"CLS\",0),c=n(e,f,b,s.reportAllChanges),i((()=>c()))})),setTimeout(c))})))};let P=0,T=1/0,_=0;const M=e=>{for(const t of e)t.interactionId&&(T=Math.min(T,t.interactionId),_=Math.max(_,t.interactionId),P=_?(_-T)/7+1:0)};let w;const C=()=>w?P:performance.interactionCount??0,I=()=>{\"interactionCount\"in performance||w||(w=h(\"event\",M,{type:\"event\",buffered:!0,durationThreshold:0}))};let F=0;class k{u=[];l=new Map;m;p;v(){F=C(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((C()-F)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&\"first-input\"!==e.entryType)return;const t=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>t.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((e,t)=>t.P-e.P)),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(n)}}}const A=e=>{const t=globalThis.requestIdleCallback||setTimeout;\"hidden\"===document.visibilityState?e():(e=f(e),addEventListener(\"visibilitychange\",e,{once:!0,capture:!0}),t((()=>{e(),removeEventListener(\"visibilitychange\",e,{capture:!0})})))},B=[200,500],S=(e,i={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;const s=v();g((()=>{I();let o,c=r(\"INP\");const d=a(i,k),f=e=>{A((()=>{for(const t of e)d.h(t);const t=d.L();t&&t.P!==c.value&&(c.value=t.P,c.entries=t.entries,o())}))},u=h(\"event\",f,{durationThreshold:i.durationThreshold??40});o=n(e,c,B,i.reportAllChanges),u&&(u.observe({type:\"first-input\",buffered:!0}),s.onHidden((()=>{f(u.takeRecords()),o(!0)})),t((()=>{d.v(),c=r(\"INP\"),o=n(e,c,B,i.reportAllChanges)})))}))};class N{m;h(e){this.m?.(e)}}const q=[2500,4e3],x=(e,s={})=>{g((()=>{const c=v();let d,u=r(\"LCP\");const l=a(s,N),m=e=>{s.reportAllChanges||(e=e.slice(-1));for(const t of e)l.h(t),t.startTime<c.firstHiddenTime&&(u.value=Math.max(t.startTime-o(),0),u.entries=[t],d())},p=h(\"largest-contentful-paint\",m);if(p){d=n(e,u,q,s.reportAllChanges);const o=f((()=>{m(p.takeRecords()),p.disconnect(),d(!0)})),c=e=>{e.isTrusted&&(A(o),removeEventListener(e.type,c,{capture:!0}))};for(const e of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(e,c,{capture:!0});t((t=>{u=r(\"LCP\"),d=n(e,u,q,s.reportAllChanges),i((()=>{u.value=performance.now()-t.timeStamp,d(!0)}))}))}}))},H=[800,1800],O=e=>{document.prerendering?g((()=>O(e))):\"complete\"!==document.readyState?addEventListener(\"load\",(()=>O(e)),!0):setTimeout(e)},$=(e,i={})=>{let c=r(\"TTFB\"),a=n(e,c,H,i.reportAllChanges);O((()=>{const d=s();d&&(c.value=Math.max(d.responseStart-o(),0),c.entries=[d],a(!0),t((()=>{c=r(\"TTFB\",0),a=n(e,c,H,i.reportAllChanges),a(!0)})))}))};export{b as CLSThresholds,y as FCPThresholds,B as INPThresholds,q as LCPThresholds,H as TTFBThresholds,L as onCLS,E as onFCP,S as onINP,x as onLCP,$ as onTTFB};\n","import { onCLS, onFCP, onINP, onLCP, onTTFB } from 'web-vitals';\nexport class WebVitalsBasic {\n    constructor(pushMeasurement, webVitalConfig) {\n        this.pushMeasurement = pushMeasurement;\n        this.webVitalConfig = webVitalConfig;\n    }\n    initialize() {\n        Object.entries(WebVitalsBasic.mapping).forEach(([indicator, executor]) => {\n            var _a;\n            executor((metric) => {\n                this.pushMeasurement({\n                    type: 'web-vitals',\n                    values: {\n                        [indicator]: metric.value,\n                    },\n                });\n            }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n        });\n    }\n}\nWebVitalsBasic.mapping = {\n    cls: onCLS,\n    fcp: onFCP,\n    inp: onINP,\n    lcp: onLCP,\n    ttfb: onTTFB,\n};\n//# sourceMappingURL=webVitalsBasic.js.map","class t{t;o=0;i=[];u(t){if(t.hadRecentInput)return;const e=this.i[0],n=this.i.at(-1);this.o&&e&&n&&t.startTime-n.startTime<1e3&&t.startTime-e.startTime<5e3?(this.o+=t.value,this.i.push(t)):(this.o=t.value,this.i=[t]),this.t?.(t)}}const e=()=>{const t=performance.getEntriesByType(\"navigation\")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},n=t=>{if(\"loading\"===document.readyState)return\"loading\";{const n=e();if(n){if(t<n.domInteractive)return\"loading\";if(0===n.domContentLoadedEventStart||t<n.domContentLoadedEventStart)return\"dom-interactive\";if(0===n.domComplete||t<n.domComplete)return\"dom-content-loaded\"}}return\"complete\"},o=t=>{const e=t.nodeName;return 1===t.nodeType?e.toLowerCase():e.toUpperCase().replace(/^#/,\"\")},i=t=>{let e=\"\";try{for(;9!==t?.nodeType;){const n=t,i=n.id?\"#\"+n.id:[o(n),...Array.from(n.classList).sort()].join(\".\");if(e.length+i.length>99)return e||i;if(e=e?i+\">\"+e:i,n.id)break;t=n.parentNode}}catch{}return e},r=new WeakMap;function s(t,e){return r.get(t)||r.set(t,new e),r.get(t)}let a=-1;const c=()=>a,f=t=>{addEventListener(\"pageshow\",(e=>{e.persisted&&(a=e.timeStamp,t(e))}),!0)},u=(t,e,n,o)=>{let i,r;return s=>{e.value>=0&&(s||o)&&(r=e.value-(i??0),(r||void 0===i)&&(i=e.value,e.delta=r,e.rating=((t,e)=>t>e[1]?\"poor\":t>e[0]?\"needs-improvement\":\"good\")(e.value,n),t(e)))}},d=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},l=()=>{const t=e();return t?.activationStart??0},h=(t,n=-1)=>{const o=e();let i=\"navigate\";c()>=0?i=\"back-forward-cache\":o&&(document.prerendering||l()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":o.type&&(i=o.type.replace(/_/g,\"-\")));return{name:t,value:n,rating:\"good\",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},m=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const o=new PerformanceObserver((t=>{Promise.resolve().then((()=>{e(t.getEntries())}))}));return o.observe({type:t,buffered:!0,...n}),o}}catch{}},p=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let g=-1;const y=new Set,v=()=>\"hidden\"!==document.visibilityState||document.prerendering?1/0:0,b=t=>{if(\"hidden\"===document.visibilityState){if(\"visibilitychange\"===t.type)for(const t of y)t();isFinite(g)||(g=\"visibilitychange\"===t.type?t.timeStamp:0,removeEventListener(\"prerenderingchange\",b,!0))}},M=()=>{if(g<0){const t=l(),e=document.prerendering?void 0:globalThis.performance.getEntriesByType(\"visibility-state\").filter((e=>\"hidden\"===e.name&&e.startTime>t))[0]?.startTime;g=e??v(),addEventListener(\"visibilitychange\",b,!0),addEventListener(\"prerenderingchange\",b,!0),f((()=>{setTimeout((()=>{g=v()}))}))}return{get firstHiddenTime(){return g},onHidden(t){y.add(t)}}},T=t=>{document.prerendering?addEventListener(\"prerenderingchange\",(()=>t()),!0):t()},E=[1800,3e3],D=(t,e={})=>{T((()=>{const n=M();let o,i=h(\"FCP\");const r=m(\"paint\",(t=>{for(const e of t)\"first-contentful-paint\"===e.name&&(r.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries.push(e),o(!0)))}));r&&(o=u(t,i,E,e.reportAllChanges),f((n=>{i=h(\"FCP\"),o=u(t,i,E,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))})))}))},L=[.1,.25],P=t=>t.find((t=>1===t.node?.nodeType))||t[0],S=(e,o={})=>{const r=s(o=Object.assign({},o),t),a=new WeakMap;r.t=t=>{if(t?.sources?.length){const e=P(t.sources),n=e?.node;if(n){const t=o.generateTarget?.(n)??i(n);a.set(e,t)}}};((e,n={})=>{const o=M();D(p((()=>{let i,r=h(\"CLS\",0);const a=s(n,t),c=t=>{for(const e of t)a.u(e);a.o>r.value&&(r.value=a.o,r.entries=a.i,i())},l=m(\"layout-shift\",c);l&&(i=u(e,r,L,n.reportAllChanges),o.onHidden((()=>{c(l.takeRecords()),i(!0)})),f((()=>{a.o=0,r=h(\"CLS\",0),i=u(e,r,L,n.reportAllChanges),d((()=>i()))})),setTimeout(i))})))})((t=>{const o=(t=>{let e={};if(t.entries.length){const o=t.entries.reduce(((t,e)=>t.value>e.value?t:e));if(o?.sources?.length){const t=P(o.sources);t&&(e={largestShiftTarget:a.get(t),largestShiftTime:o.startTime,largestShiftValue:o.value,largestShiftSource:t,largestShiftEntry:o,loadState:n(o.startTime)})}}return Object.assign(t,{attribution:e})})(t);e(o)}),o)},w=(t,o={})=>{D((o=>{const i=(t=>{let o={timeToFirstByte:0,firstByteToFCP:t.value,loadState:n(c())};if(t.entries.length){const i=e(),r=t.entries.at(-1);if(i){const e=i.activationStart||0,s=Math.max(0,i.responseStart-e);o={timeToFirstByte:s,firstByteToFCP:t.value-s,loadState:n(t.entries[0].startTime),navigationEntry:i,fcpEntry:r}}}return Object.assign(t,{attribution:o})})(o);t(i)}),o)};let _=0,F=1/0,k=0;const B=t=>{for(const e of t)e.interactionId&&(F=Math.min(F,e.interactionId),k=Math.max(k,e.interactionId),_=k?(k-F)/7+1:0)};let C;const O=()=>C?_:performance.interactionCount??0,j=()=>{\"interactionCount\"in performance||C||(C=m(\"event\",B,{type:\"event\",buffered:!0,durationThreshold:0}))};let I=0;class A{l=[];h=new Map;m;p;v(){I=O(),this.l.length=0,this.h.clear()}M(){const t=Math.min(this.l.length-1,Math.floor((O()-I)/50));return this.l[t]}u(t){if(this.m?.(t),!t.interactionId&&\"first-input\"!==t.entryType)return;const e=this.l.at(-1);let n=this.h.get(t.interactionId);if(n||this.l.length<10||t.duration>e.T){if(n?t.duration>n.T?(n.entries=[t],n.T=t.duration):t.duration===n.T&&t.startTime===n.entries[0].startTime&&n.entries.push(t):(n={id:t.interactionId,entries:[t],T:t.duration},this.h.set(n.id,n),this.l.push(n)),this.l.sort(((t,e)=>e.T-t.T)),this.l.length>10){const t=this.l.splice(10);for(const e of t)this.h.delete(e.id)}this.p?.(n)}}}const W=t=>{const e=globalThis.requestIdleCallback||setTimeout;\"hidden\"===document.visibilityState?t():(t=p(t),addEventListener(\"visibilitychange\",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener(\"visibilitychange\",t,{capture:!0})})))},q=[200,500],x=(t,e={})=>{const o=s(e=Object.assign({},e),A);let r=[],a=[],c=0;const d=new WeakMap,l=new WeakMap;let p=!1;const g=()=>{p||(W(y),p=!0)},y=()=>{const t=o.l.map((t=>d.get(t.entries[0]))),e=a.length-50;a=a.filter(((n,o)=>o>=e||t.includes(n)));const n=new Set;for(const t of a){const e=v(t.startTime,t.processingEnd);for(const t of e)n.add(t)}const i=r.length-1-50;r=r.filter(((t,e)=>t.startTime>c&&e>i||n.has(t))),p=!1};o.m=t=>{const e=t.startTime+t.duration;let n;c=Math.max(c,t.processingEnd);for(let o=a.length-1;o>=0;o--){const i=a[o];if(Math.abs(e-i.renderTime)<=8){n=i,n.startTime=Math.min(t.startTime,n.startTime),n.processingStart=Math.min(t.processingStart,n.processingStart),n.processingEnd=Math.max(t.processingEnd,n.processingEnd),n.entries.push(t);break}}n||(n={startTime:t.startTime,processingStart:t.processingStart,processingEnd:t.processingEnd,renderTime:e,entries:[t]},a.push(n)),(t.interactionId||\"first-input\"===t.entryType)&&d.set(t,n),g()},o.p=t=>{if(!l.get(t)){const n=t.entries[0].target;if(n){const o=e.generateTarget?.(n)??i(n);l.set(t,o)}}};const v=(t,e)=>{const n=[];for(const o of r)if(!(o.startTime+o.duration<t)){if(o.startTime>e)break;n.push(o)}return n},b=t=>{const e=t.entries[0],i=d.get(e),r=e.processingStart,s=Math.max(e.startTime+e.duration,r),a=Math.min(i.processingEnd,s),c=i.entries.sort(((t,e)=>t.processingStart-e.processingStart)),f=v(e.startTime,a),u=o.h.get(e.interactionId),h={interactionTarget:l.get(u),interactionType:e.name.startsWith(\"key\")?\"keyboard\":\"pointer\",interactionTime:e.startTime,nextPaintTime:s,processedEventEntries:c,longAnimationFrameEntries:f,inputDelay:r-e.startTime,processingDuration:a-r,presentationDelay:s-a,loadState:n(e.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0};(t=>{if(!t.longAnimationFrameEntries?.length)return;const e=t.interactionTime,n=t.inputDelay,o=t.processingDuration;let i,r,s=0,a=0,c=0,f=0;for(const c of t.longAnimationFrameEntries){a=a+c.startTime+c.duration-c.styleAndLayoutStart;for(const t of c.scripts){const c=t.startTime+t.duration;if(c<e)continue;const u=c-Math.max(e,t.startTime),d=t.duration?u/t.duration*t.forcedStyleAndLayoutDuration:0;s+=u-d,a+=d,u>f&&(r=t.startTime<e+n?\"input-delay\":t.startTime>=e+n+o?\"presentation-delay\":\"processing-duration\",i=t,f=u)}}const u=t.longAnimationFrameEntries.at(-1),d=u?u.startTime+u.duration:0;d>=e+n+o&&(c=t.nextPaintTime-d),i&&r&&(t.longestScript={entry:i,subpart:r,intersectingDuration:f}),t.totalScriptDuration=s,t.totalStyleAndLayoutDuration=a,t.totalPaintDuration=c,t.totalUnattributedDuration=t.nextPaintTime-e-s-a-c})(h);return Object.assign(t,{attribution:h})};m(\"long-animation-frame\",(t=>{r=r.concat(t),g()})),((t,e={})=>{if(!globalThis.PerformanceEventTiming||!(\"interactionId\"in PerformanceEventTiming.prototype))return;const n=M();T((()=>{j();let o,i=h(\"INP\");const r=s(e,A),a=t=>{W((()=>{for(const e of t)r.u(e);const e=r.M();e&&e.T!==i.value&&(i.value=e.T,i.entries=e.entries,o())}))},c=m(\"event\",a,{durationThreshold:e.durationThreshold??40});o=u(t,i,q,e.reportAllChanges),c&&(c.observe({type:\"first-input\",buffered:!0}),n.onHidden((()=>{a(c.takeRecords()),o(!0)})),f((()=>{r.v(),i=h(\"INP\"),o=u(t,i,q,e.reportAllChanges)})))}))})((e=>{const n=b(e);t(n)}),e)};class N{m;u(t){this.m?.(t)}}const H=[2500,4e3],R=(t,n={})=>{const o=s(n=Object.assign({},n),N),r=new WeakMap;o.m=t=>{const e=t.element;if(e){const o=n.generateTarget?.(e)??i(e);r.set(t,o)}};((t,e={})=>{T((()=>{const n=M();let o,i=h(\"LCP\");const r=s(e,N),a=t=>{e.reportAllChanges||(t=t.slice(-1));for(const e of t)r.u(e),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-l(),0),i.entries=[e],o())},c=m(\"largest-contentful-paint\",a);if(c){o=u(t,i,H,e.reportAllChanges);const n=p((()=>{a(c.takeRecords()),c.disconnect(),o(!0)})),r=t=>{t.isTrusted&&(W(n),removeEventListener(t.type,r,{capture:!0}))};for(const t of[\"keydown\",\"click\",\"visibilitychange\"])addEventListener(t,r,{capture:!0});f((n=>{i=h(\"LCP\"),o=u(t,i,H,e.reportAllChanges),d((()=>{i.value=performance.now()-n.timeStamp,o(!0)}))}))}}))})((n=>{const o=(t=>{let n={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:t.value};if(t.entries.length){const o=e();if(o){const e=o.activationStart||0,i=t.entries.at(-1),s=i.url&&performance.getEntriesByType(\"resource\").filter((t=>t.name===i.url))[0],a=Math.max(0,o.responseStart-e),c=Math.max(a,s?(s.requestStart||s.startTime)-e:0),f=Math.min(t.value,Math.max(c,s?s.responseEnd-e:0));n={target:r.get(i),timeToFirstByte:a,resourceLoadDelay:c-a,resourceLoadDuration:f-c,elementRenderDelay:t.value-f,navigationEntry:o,lcpEntry:i},i.url&&(n.url=i.url),s&&(n.lcpResourceEntry=s)}}return Object.assign(t,{attribution:n})})(n);t(o)}),n)},U=[800,1800],V=t=>{document.prerendering?T((()=>V(t))):\"complete\"!==document.readyState?addEventListener(\"load\",(()=>V(t)),!0):setTimeout(t)},$=(t,n={})=>{((t,n={})=>{let o=h(\"TTFB\"),i=u(t,o,U,n.reportAllChanges);V((()=>{const r=e();r&&(o.value=Math.max(r.responseStart-l(),0),o.entries=[r],i(!0),f((()=>{o=h(\"TTFB\",0),i=u(t,o,U,n.reportAllChanges),i(!0)})))}))})((e=>{const n=(t=>{let e={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(t.entries.length){const n=t.entries[0],o=n.activationStart||0,i=Math.max((n.workerStart||n.fetchStart)-o,0),r=Math.max(n.domainLookupStart-o,0),s=Math.max(n.connectStart-o,0),a=Math.max(n.connectEnd-o,0);e={waitingDuration:i,cacheDuration:r-i,dnsDuration:s-r,connectionDuration:a-s,requestDuration:t.value-a,navigationEntry:n}}return Object.assign(t,{attribution:e})})(e);t(n)}),n)};export{L as CLSThresholds,E as FCPThresholds,q as INPThresholds,H as LCPThresholds,U as TTFBThresholds,S as onCLS,w as onFCP,x as onINP,R as onLCP,$ as onTTFB};\n","import { onCLS, onFCP, onINP, onLCP, onTTFB } from 'web-vitals/attribution';\nimport { unknownString } from '@grafana/faro-core';\nimport { getItem, webStorageType } from '../../utils';\nimport { NAVIGATION_ID_STORAGE_KEY } from '../instrumentationConstants';\n// duplicate keys saved in variables to save bundle size\n// refs: https://github.com/grafana/faro-web-sdk/pull/595#discussion_r1615833968\nconst loadStateKey = 'load_state';\nconst timeToFirstByteKey = 'time_to_first_byte';\nexport class WebVitalsWithAttribution {\n    constructor(corePushMeasurement, webVitalConfig) {\n        this.corePushMeasurement = corePushMeasurement;\n        this.webVitalConfig = webVitalConfig;\n    }\n    initialize() {\n        this.measureCLS();\n        this.measureFCP();\n        this.measureINP();\n        this.measureLCP();\n        this.measureTTFB();\n    }\n    measureCLS() {\n        var _a;\n        onCLS((metric) => {\n            const { loadState, largestShiftValue, largestShiftTime, largestShiftTarget } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'largest_shift_value', largestShiftValue);\n            this.addIfPresent(values, 'largest_shift_time', largestShiftTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'largest_shift_target', largestShiftTarget);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureFCP() {\n        var _a;\n        onFCP((metric) => {\n            const { firstByteToFCP, timeToFirstByte, loadState } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'first_byte_to_fcp', firstByteToFCP);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureINP() {\n        var _a;\n        onINP((metric) => {\n            const { interactionTime, presentationDelay, inputDelay, processingDuration, nextPaintTime, loadState, interactionTarget, interactionType, } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'interaction_time', interactionTime);\n            this.addIfPresent(values, 'presentation_delay', presentationDelay);\n            this.addIfPresent(values, 'input_delay', inputDelay);\n            this.addIfPresent(values, 'processing_duration', processingDuration);\n            this.addIfPresent(values, 'next_paint_time', nextPaintTime);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, loadStateKey, loadState);\n            this.addIfPresent(context, 'interaction_target', interactionTarget);\n            this.addIfPresent(context, 'interaction_type', interactionType);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureLCP() {\n        var _a;\n        onLCP((metric) => {\n            const { elementRenderDelay, resourceLoadDelay, resourceLoadDuration, timeToFirstByte, target } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'element_render_delay', elementRenderDelay);\n            this.addIfPresent(values, 'resource_load_delay', resourceLoadDelay);\n            this.addIfPresent(values, 'resource_load_duration', resourceLoadDuration);\n            this.addIfPresent(values, timeToFirstByteKey, timeToFirstByte);\n            const context = this.buildInitialContext(metric);\n            this.addIfPresent(context, 'element', target);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    measureTTFB() {\n        var _a;\n        onTTFB((metric) => {\n            const { dnsDuration, connectionDuration, requestDuration, waitingDuration, cacheDuration } = metric.attribution;\n            const values = this.buildInitialValues(metric);\n            this.addIfPresent(values, 'dns_duration', dnsDuration);\n            this.addIfPresent(values, 'connection_duration', connectionDuration);\n            this.addIfPresent(values, 'request_duration', requestDuration);\n            this.addIfPresent(values, 'waiting_duration', waitingDuration);\n            this.addIfPresent(values, 'cache_duration', cacheDuration);\n            const context = this.buildInitialContext(metric);\n            this.pushMeasurement(values, context);\n        }, { reportAllChanges: (_a = this.webVitalConfig) === null || _a === void 0 ? void 0 : _a.reportAllChanges });\n    }\n    buildInitialValues(metric) {\n        const indicator = metric.name.toLowerCase();\n        return {\n            [indicator]: metric.value,\n            delta: metric.delta,\n        };\n    }\n    buildInitialContext(metric) {\n        var _a;\n        const navigationEntryId = (_a = getItem(NAVIGATION_ID_STORAGE_KEY, webStorageType.session)) !== null && _a !== void 0 ? _a : unknownString;\n        return {\n            id: metric.id,\n            rating: metric.rating,\n            navigation_type: metric.navigationType,\n            navigation_entry_id: navigationEntryId,\n        };\n    }\n    pushMeasurement(values, context) {\n        const type = 'web-vitals';\n        this.corePushMeasurement({ type, values }, { context });\n    }\n    addIfPresent(source, key, metric) {\n        if (metric) {\n            source[key] = metric;\n        }\n    }\n}\n//# sourceMappingURL=webVitalsWithAttribution.js.map","import { BaseInstrumentation, VERSION } from '@grafana/faro-core';\nimport { WebVitalsBasic } from './webVitalsBasic';\nimport { WebVitalsWithAttribution } from './webVitalsWithAttribution';\nexport class WebVitalsInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-web-vitals';\n        this.version = VERSION;\n    }\n    initialize() {\n        this.logDebug('Initializing');\n        const webVitals = this.intializeWebVitalsInstrumentation();\n        webVitals.initialize();\n    }\n    intializeWebVitalsInstrumentation() {\n        var _a, _b, _c;\n        if (((_a = this.config) === null || _a === void 0 ? void 0 : _a.trackWebVitalsAttribution) === false ||\n            ((_c = (_b = this.config) === null || _b === void 0 ? void 0 : _b.webVitalsInstrumentation) === null || _c === void 0 ? void 0 : _c.trackAttribution) === false) {\n            return new WebVitalsBasic(this.api.pushMeasurement, this.config.webVitalsInstrumentation);\n        }\n        return new WebVitalsWithAttribution(this.api.pushMeasurement, this.config.webVitalsInstrumentation);\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { BaseInstrumentation, dateNow, EVENT_SESSION_EXTEND, EVENT_SESSION_RESUME, EVENT_SESSION_START, VERSION, } from '@grafana/faro-core';\nimport { createSession } from '../../metas';\nimport { getSessionManagerByConfig, isSampled } from './sessionManager';\nimport { PersistentSessionsManager } from './sessionManager/PersistentSessionsManager';\nimport { createUserSessionObject, isUserSessionValid } from './sessionManager/sessionManagerUtils';\nexport class SessionInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-session';\n        this.version = VERSION;\n    }\n    sendSessionStartEvent(meta) {\n        var _a, _b;\n        const session = meta.session;\n        if (session && session.id !== ((_a = this.notifiedSession) === null || _a === void 0 ? void 0 : _a.id)) {\n            if (this.notifiedSession && this.notifiedSession.id === ((_b = session.attributes) === null || _b === void 0 ? void 0 : _b['previousSession'])) {\n                this.api.pushEvent(EVENT_SESSION_EXTEND, {}, undefined, { skipDedupe: true });\n                this.notifiedSession = session;\n                return;\n            }\n            this.notifiedSession = session;\n            // no need to add attributes and session id, they are included as part of meta\n            // automatically\n            this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n        }\n    }\n    createInitialSession(SessionManager, sessionsConfig) {\n        var _a, _b, _c, _d, _e, _f;\n        let storedUserSession = SessionManager.fetchUserSession();\n        if (sessionsConfig.persistent && sessionsConfig.maxSessionPersistenceTime && storedUserSession) {\n            const now = dateNow();\n            const shouldClearPersistentSession = storedUserSession.lastActivity < now - sessionsConfig.maxSessionPersistenceTime;\n            if (shouldClearPersistentSession) {\n                PersistentSessionsManager.removeUserSession();\n                storedUserSession = null;\n            }\n        }\n        let lifecycleType;\n        let initialSession;\n        if (isUserSessionValid(storedUserSession)) {\n            const sessionId = storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.sessionId;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: storedUserSession.isSampled || false,\n                started: storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.started,\n            });\n            const storedUserSessionMeta = storedUserSession === null || storedUserSession === void 0 ? void 0 : storedUserSession.sessionMeta;\n            // For resumed sessions we want to merge the previous overrides with the configured ones.\n            // If the same key is present in both, the new one will override the old one.\n            const overrides = Object.assign(Object.assign({}, (_a = sessionsConfig.session) === null || _a === void 0 ? void 0 : _a.overrides), storedUserSessionMeta === null || storedUserSessionMeta === void 0 ? void 0 : storedUserSessionMeta.overrides);\n            initialSession.sessionMeta = Object.assign(Object.assign({}, sessionsConfig.session), { id: sessionId, attributes: Object.assign(Object.assign(Object.assign({}, (_b = sessionsConfig.session) === null || _b === void 0 ? void 0 : _b.attributes), storedUserSessionMeta === null || storedUserSessionMeta === void 0 ? void 0 : storedUserSessionMeta.attributes), { \n                    // For valid resumed sessions we do not want to recalculate the sampling decision on each init phase.\n                    isSampled: initialSession.isSampled.toString() }), overrides });\n            lifecycleType = EVENT_SESSION_RESUME;\n        }\n        else {\n            const sessionId = (_d = (_c = sessionsConfig.session) === null || _c === void 0 ? void 0 : _c.id) !== null && _d !== void 0 ? _d : createSession().id;\n            initialSession = createUserSessionObject({\n                sessionId,\n                isSampled: isSampled(),\n            });\n            const overrides = (_e = sessionsConfig.session) === null || _e === void 0 ? void 0 : _e.overrides;\n            initialSession.sessionMeta = Object.assign({ id: sessionId, attributes: Object.assign({ isSampled: initialSession.isSampled.toString() }, (_f = sessionsConfig.session) === null || _f === void 0 ? void 0 : _f.attributes) }, (overrides ? { overrides } : {}));\n            lifecycleType = EVENT_SESSION_START;\n        }\n        return { initialSession, lifecycleType };\n    }\n    registerBeforeSendHook(SessionManager) {\n        var _a;\n        const { updateSession } = new SessionManager();\n        (_a = this.transports) === null || _a === void 0 ? void 0 : _a.addBeforeSendHooks((item) => {\n            var _a, _b, _c;\n            updateSession();\n            const attributes = (_a = item.meta.session) === null || _a === void 0 ? void 0 : _a.attributes;\n            if (attributes && (attributes === null || attributes === void 0 ? void 0 : attributes['isSampled']) === 'true') {\n                let newItem = JSON.parse(JSON.stringify(item));\n                const newAttributes = (_b = newItem.meta.session) === null || _b === void 0 ? void 0 : _b.attributes;\n                newAttributes === null || newAttributes === void 0 ? true : delete newAttributes['isSampled'];\n                if (Object.keys(newAttributes !== null && newAttributes !== void 0 ? newAttributes : {}).length === 0) {\n                    (_c = newItem.meta.session) === null || _c === void 0 ? true : delete _c.attributes;\n                }\n                return newItem;\n            }\n            return null;\n        });\n    }\n    initialize() {\n        this.logDebug('init session instrumentation');\n        const sessionTrackingConfig = this.config.sessionTracking;\n        if (sessionTrackingConfig === null || sessionTrackingConfig === void 0 ? void 0 : sessionTrackingConfig.enabled) {\n            const SessionManager = getSessionManagerByConfig(sessionTrackingConfig);\n            this.registerBeforeSendHook(SessionManager);\n            const { initialSession, lifecycleType } = this.createInitialSession(SessionManager, sessionTrackingConfig);\n            SessionManager.storeUserSession(initialSession);\n            const initialSessionMeta = initialSession.sessionMeta;\n            this.notifiedSession = initialSessionMeta;\n            this.api.setSession(initialSessionMeta);\n            if (lifecycleType === EVENT_SESSION_START) {\n                this.api.pushEvent(EVENT_SESSION_START, {}, undefined, { skipDedupe: true });\n            }\n            if (lifecycleType === EVENT_SESSION_RESUME) {\n                this.api.pushEvent(EVENT_SESSION_RESUME, {}, undefined, { skipDedupe: true });\n            }\n        }\n        this.metas.addListener(this.sendSessionStartEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { faro, genShortID } from '@grafana/faro-core';\nexport function createSession(attributes) {\n    var _a, _b, _c, _d;\n    return {\n        id: (_d = (_c = (_b = (_a = faro.config) === null || _a === void 0 ? void 0 : _a.sessionTracking) === null || _b === void 0 ? void 0 : _b.generateSessionId) === null || _c === void 0 ? void 0 : _c.call(_b)) !== null && _d !== void 0 ? _d : genShortID(),\n        attributes,\n    };\n}\n//# sourceMappingURL=createSession.js.map","import { BaseInstrumentation, EVENT_VIEW_CHANGED, unknownString, VERSION } from '@grafana/faro-core';\n// all this does is send VIEW_CHANGED event\nexport class ViewInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-view';\n        this.version = VERSION;\n    }\n    sendViewChangedEvent(meta) {\n        var _a, _b, _c, _d;\n        const view = meta.view;\n        if (view && view.name !== ((_a = this.notifiedView) === null || _a === void 0 ? void 0 : _a.name)) {\n            this.api.pushEvent(EVENT_VIEW_CHANGED, {\n                fromView: (_c = (_b = this.notifiedView) === null || _b === void 0 ? void 0 : _b.name) !== null && _c !== void 0 ? _c : unknownString,\n                toView: (_d = view.name) !== null && _d !== void 0 ? _d : unknownString,\n            }, undefined, { skipDedupe: true });\n            this.notifiedView = view;\n        }\n    }\n    initialize() {\n        this.metas.addListener(this.sendViewChangedEvent.bind(this));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { BaseInstrumentation, stringifyObjectValues, VERSION } from '@grafana/faro-core';\nexport class CSPInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super();\n        this.name = '@grafana/faro-web-sdk:instrumentation-csp';\n        this.version = VERSION;\n    }\n    initialize() {\n        document.addEventListener('securitypolicyviolation', this.securitypolicyviolationHandler.bind(this));\n    }\n    destroy() {\n        document.removeEventListener('securitypolicyviolation', this.securitypolicyviolationHandler);\n    }\n    securitypolicyviolationHandler(ev) {\n        this.api.pushEvent('securitypolicyviolation', stringifyObjectValues(ev));\n    }\n}\n//# sourceMappingURL=instrumentation.js.map","import { allLogLevels, BaseInstrumentation, defaultErrorArgsSerializer, defaultLogArgsSerializer, LogLevel, VERSION, } from '@grafana/faro-core';\nimport { getDetailsFromConsoleErrorArgs } from '../errors/getErrorDetails';\nexport class ConsoleInstrumentation extends BaseInstrumentation {\n    constructor() {\n        super(...arguments);\n        this.name = '@grafana/faro-web-sdk:instrumentation-console';\n        this.version = VERSION;\n        this.errorSerializer = defaultLogArgsSerializer;\n    }\n    initialize() {\n        var _a;\n        const instrumentationOptions = this.config.consoleInstrumentation;\n        const serializeErrors = (instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.serializeErrors) || !!(instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.errorSerializer);\n        this.errorSerializer = serializeErrors\n            ? ((_a = instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.errorSerializer) !== null && _a !== void 0 ? _a : defaultErrorArgsSerializer)\n            : defaultLogArgsSerializer;\n        allLogLevels\n            .filter((level) => { var _a; return !((_a = instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.disabledLevels) !== null && _a !== void 0 ? _a : ConsoleInstrumentation.defaultDisabledLevels).includes(level); })\n            .forEach((level) => {\n            /* eslint-disable-next-line no-console */\n            console[level] = (...args) => {\n                try {\n                    if (level === LogLevel.ERROR && !(instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.consoleErrorAsLog)) {\n                        const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n                        if (value && !type && !stackFrames) {\n                            this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value));\n                            return;\n                        }\n                        this.api.pushError(new Error(ConsoleInstrumentation.consoleErrorPrefix + value), { type, stackFrames });\n                    }\n                    else if (level === LogLevel.ERROR && (instrumentationOptions === null || instrumentationOptions === void 0 ? void 0 : instrumentationOptions.consoleErrorAsLog)) {\n                        const { value, type, stackFrames } = getDetailsFromConsoleErrorArgs(args, this.errorSerializer);\n                        this.api.pushLog(value ? [ConsoleInstrumentation.consoleErrorPrefix + value] : args, {\n                            level,\n                            context: {\n                                value: value !== null && value !== void 0 ? value : '',\n                                type: type !== null && type !== void 0 ? type : '',\n                                stackFrames: (stackFrames === null || stackFrames === void 0 ? void 0 : stackFrames.length) ? defaultErrorArgsSerializer(stackFrames) : '',\n                            },\n                        });\n                    }\n                    else {\n                        this.api.pushLog(args, { level });\n                    }\n                }\n                catch (err) {\n                    this.logError(err);\n                }\n                finally {\n                    this.unpatchedConsole[level](...args);\n                }\n            };\n        });\n    }\n}\nConsoleInstrumentation.defaultDisabledLevels = [LogLevel.DEBUG, LogLevel.TRACE, LogLevel.LOG];\nConsoleInstrumentation.consoleErrorPrefix = 'console.error: ';\n//# sourceMappingURL=instrumentation.js.map","import { ConsoleInstrumentation, CSPInstrumentation, ErrorsInstrumentation, PerformanceInstrumentation, SessionInstrumentation, UserActionInstrumentation, ViewInstrumentation, WebVitalsInstrumentation, } from '../instrumentations';\nexport function getWebInstrumentations(options = {}) {\n    const instrumentations = [\n        new UserActionInstrumentation(),\n        new ErrorsInstrumentation(),\n        new WebVitalsInstrumentation(),\n        new SessionInstrumentation(),\n        new ViewInstrumentation(),\n    ];\n    if (options.enablePerformanceInstrumentation !== false) {\n        // unshift to ensure that initialization starts before the other instrumentations\n        instrumentations.unshift(new PerformanceInstrumentation());\n    }\n    if (options.enableContentSecurityPolicyInstrumentation !== false) {\n        instrumentations.push(new CSPInstrumentation());\n    }\n    if (options.captureConsole !== false) {\n        instrumentations.push(new ConsoleInstrumentation());\n    }\n    return instrumentations;\n}\n//# sourceMappingURL=getWebInstrumentations.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createInternalLogger, defaultBatchingConfig, defaultGlobalObjectKey, defaultInternalLoggerLevel, defaultLogArgsSerializer, defaultUnpatchedConsole, isBoolean, isEmpty, isObject, } from '@grafana/faro-core';\nimport { defaultEventDomain } from '../consts';\nimport { parseStacktrace } from '../instrumentations';\nimport { defaultSessionTrackingConfig } from '../instrumentations/session';\nimport { userActionDataAttribute } from '../instrumentations/userActions/const';\nimport { browserMeta } from '../metas';\nimport { k6Meta } from '../metas/k6';\nimport { createPageMeta } from '../metas/page';\nimport { FetchTransport } from '../transports';\nimport { getWebInstrumentations } from './getWebInstrumentations';\nexport function makeCoreConfig(browserConfig) {\n    var _a;\n    const transports = [];\n    const internalLogger = createInternalLogger(browserConfig.unpatchedConsole, browserConfig.internalLoggerLevel);\n    if (browserConfig.transports) {\n        if (browserConfig.url || browserConfig.apiKey) {\n            internalLogger.error('if \"transports\" is defined, \"url\" and \"apiKey\" should not be defined');\n        }\n        transports.push(...browserConfig.transports);\n    }\n    else if (browserConfig.url) {\n        transports.push(new FetchTransport({\n            url: browserConfig.url,\n            apiKey: browserConfig.apiKey,\n        }));\n    }\n    else {\n        internalLogger.error('either \"url\" or \"transports\" must be defined');\n    }\n    const { \n    // properties with default values\n    dedupe = true, eventDomain = defaultEventDomain, globalObjectKey = defaultGlobalObjectKey, instrumentations = getWebInstrumentations(), internalLoggerLevel = defaultInternalLoggerLevel, isolate = false, logArgsSerializer = defaultLogArgsSerializer, metas = createDefaultMetas(browserConfig), paused = false, preventGlobalExposure = false, unpatchedConsole = defaultUnpatchedConsole, trackUserActionsPreview = false, trackUserActionsDataAttributeName = userActionDataAttribute, url: browserConfigUrl } = browserConfig, \n    // Properties without default values or which aren't used to create derived config\n    restProperties = __rest(browserConfig, [\"dedupe\", \"eventDomain\", \"globalObjectKey\", \"instrumentations\", \"internalLoggerLevel\", \"isolate\", \"logArgsSerializer\", \"metas\", \"paused\", \"preventGlobalExposure\", \"unpatchedConsole\", \"trackUserActionsPreview\", \"trackUserActionsDataAttributeName\", \"url\"]);\n    return Object.assign(Object.assign({}, restProperties), { batching: Object.assign(Object.assign({}, defaultBatchingConfig), browserConfig.batching), dedupe: dedupe, globalObjectKey, instrumentations: getFilteredInstrumentations(instrumentations, browserConfig), internalLoggerLevel,\n        isolate,\n        logArgsSerializer,\n        metas,\n        parseStacktrace,\n        paused,\n        preventGlobalExposure,\n        transports,\n        unpatchedConsole,\n        eventDomain, ignoreUrls: [\n            ...((_a = browserConfig.ignoreUrls) !== null && _a !== void 0 ? _a : []),\n            // ignore configured cloud collector url by default\n            ...(browserConfigUrl ? [browserConfigUrl] : []),\n            // Try our best to exclude collector URLs form other Faro instances. By default these are URLs ending with /collect or /collect/ followed by alphanumeric characters.\n            /\\/collect(?:\\/[\\w]*)?$/,\n        ], sessionTracking: Object.assign(Object.assign(Object.assign({}, defaultSessionTrackingConfig), browserConfig.sessionTracking), crateSessionMeta({\n            trackGeolocation: browserConfig.trackGeolocation,\n            sessionTracking: browserConfig.sessionTracking,\n        })), trackUserActionsPreview,\n        trackUserActionsDataAttributeName });\n}\nfunction getFilteredInstrumentations(instrumentations, { trackUserActionsPreview }) {\n    return instrumentations.filter((instr) => {\n        if (instr.name === '@grafana/faro-web-sdk:instrumentation-user-action' && !trackUserActionsPreview) {\n            return false;\n        }\n        return true;\n    });\n}\nfunction createDefaultMetas(browserConfig) {\n    var _a, _b;\n    const { page, generatePageId } = (_a = browserConfig === null || browserConfig === void 0 ? void 0 : browserConfig.pageTracking) !== null && _a !== void 0 ? _a : {};\n    const initialMetas = [\n        browserMeta,\n        createPageMeta({ generatePageId, initialPageMeta: page }),\n        ...((_b = browserConfig.metas) !== null && _b !== void 0 ? _b : []),\n    ];\n    const isK6BrowserSession = isObject(window.k6);\n    if (isK6BrowserSession) {\n        return [...initialMetas, k6Meta];\n    }\n    return initialMetas;\n}\nfunction crateSessionMeta({ trackGeolocation, sessionTracking, }) {\n    var _a;\n    const overrides = {};\n    if (isBoolean(trackGeolocation)) {\n        overrides.geoLocationTrackingEnabled = trackGeolocation;\n    }\n    if (isEmpty(overrides)) {\n        return {};\n    }\n    return {\n        session: Object.assign(Object.assign({}, ((_a = sessionTracking === null || sessionTracking === void 0 ? void 0 : sessionTracking.session) !== null && _a !== void 0 ? _a : {})), { overrides }),\n    };\n}\n//# sourceMappingURL=makeCoreConfig.js.map","import { initializeFaro as coreInit } from '@grafana/faro-core';\nimport { makeCoreConfig } from './config';\nexport function initializeFaro(config) {\n    const coreConfig = makeCoreConfig(config);\n    if (!coreConfig) {\n        return undefined;\n    }\n    return coreInit(coreConfig);\n}\n//# sourceMappingURL=initialize.js.map","import { type Environment } from '../getEnvironment';\nimport { type FaroEnvironment } from './getFaroEnvironment';\n\nexport const FARO_ENVIRONMENTS = new Map<Environment, FaroEnvironment>([\n  // Uncomment this map entry to test from your local machine\n  // [\n  //   'local',\n  //   {\n  //     environment: 'local',\n  //     appName: 'grafana-metricsdrilldown-app-local',\n  //     faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/b854cd2319527968f415fd44ea01fe8a',\n  //   },\n  // ],\n  // Always keep the options below\n  [\n    'dev',\n    {\n      environment: 'dev',\n      appName: 'grafana-metricsdrilldown-app-dev',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/8c57b32175ba39d35dfaccee7cd793c7',\n    },\n  ],\n  [\n    'ops',\n    {\n      environment: 'ops',\n      appName: 'grafana-metricsdrilldown-app-ops',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/d65ab91eb9c5e8c51b474d9313ba28f4',\n    },\n  ],\n  [\n    'prod',\n    {\n      environment: 'prod',\n      appName: 'grafana-metricsdrilldown-app-prod',\n      faroUrl: 'https://faro-collector-ops-eu-south-0.grafana-ops.net/collect/0f4f1bbc97c9e2db4fa85ef75a559885',\n    },\n  ],\n]);\n","import { getWebInstrumentations, initializeFaro, type Faro } from '@grafana/faro-web-sdk';\nimport { config } from '@grafana/runtime';\n\nimport { getFaroEnvironment } from './getFaroEnvironment';\nimport { GIT_COMMIT } from '../../../version';\nimport { PLUGIN_BASE_URL, PLUGIN_ID } from '../../constants/plugin';\n\nlet faro: Faro | null = null;\n\nexport const getFaro = () => faro;\nexport const setFaro = (instance: Faro | null) => (faro = instance);\n\nexport function initFaro() {\n  if (getFaro()) {\n    return;\n  }\n\n  const faroEnvironment = getFaroEnvironment();\n  if (!faroEnvironment) {\n    return;\n  }\n\n  const { environment, faroUrl, appName } = faroEnvironment;\n  const { apps, bootData } = config;\n  const appRelease = apps[PLUGIN_ID].version;\n  const userEmail = bootData.user.email;\n\n  setFaro(\n    initializeFaro({\n      url: faroUrl,\n      app: {\n        name: appName,\n        release: appRelease,\n        version: GIT_COMMIT,\n        environment,\n      },\n      user: {\n        email: userEmail,\n      },\n      instrumentations: [\n        ...getWebInstrumentations({\n          captureConsole: false,\n        }),\n      ],\n      isolate: true,\n      beforeSend: (event) => {\n        if ((event.meta.page?.url ?? '').includes(PLUGIN_BASE_URL)) {\n          return event;\n        }\n\n        return null;\n      },\n    })\n  );\n}\n","import { getEnvironment, type Environment } from '../getEnvironment';\nimport { FARO_ENVIRONMENTS } from './faro-environments';\n\nexport type FaroEnvironment = { environment: Environment; appName: string; faroUrl: string };\n\nexport function getFaroEnvironment() {\n  const environment = getEnvironment();\n\n  if (!environment || !FARO_ENVIRONMENTS.has(environment)) {\n    return;\n  }\n\n  return FARO_ENVIRONMENTS.get(environment) as FaroEnvironment;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3241__;","export const ROUTES = {\n  Trail: 'trail',\n  Drilldown: 'drilldown',\n};\n","import { config } from '@grafana/runtime';\n\n\"use strict\";\nfunction interpolateQueryExpr(value = [], variable) {\n  if (!variable.multi && !variable.includeAll) {\n    return prometheusRegularEscape(value);\n  }\n  if (typeof value === \"string\") {\n    return prometheusSpecialRegexEscape(value);\n  }\n  const escapedValues = value.map((val) => prometheusSpecialRegexEscape(val));\n  if (escapedValues.length === 1) {\n    return escapedValues[0];\n  }\n  return \"(\" + escapedValues.join(\"|\") + \")\";\n}\nfunction prometheusRegularEscape(value) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (config.featureToggles.prometheusSpecialCharsInLabelValues) {\n    if (/^\\w+(=|!=|=~|!~)\".*\"$/.test(value)) {\n      return value;\n    }\n    return value.replace(/\\\\/g, \"\\\\\\\\\").replace(/\"/g, '\\\\\"');\n  }\n  return value.replace(/\\\\/g, \"\\\\\\\\\").replace(/'/g, \"\\\\\\\\'\");\n}\nfunction prometheusSpecialRegexEscape(value) {\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  if (config.featureToggles.prometheusSpecialCharsInLabelValues) {\n    return value.replace(/\\\\/g, \"\\\\\\\\\\\\\\\\\").replace(/\"/g, '\\\\\\\\\\\\\"').replace(/[$^*{}\\[\\]\\'+?.()|]/g, \"\\\\\\\\$&\");\n  }\n  return value.replace(/\\\\/g, \"\\\\\\\\\\\\\\\\\").replace(/[$^*{}\\[\\]+?.()|]/g, \"\\\\\\\\$&\");\n}\nconst RE2_METACHARACTERS = /[*+?()|\\\\.\\[\\]{}^$]/g;\nfunction escapePrometheusRegexp(value) {\n  return value.replace(RE2_METACHARACTERS, \"\\\\$&\");\n}\nfunction escapeLabelValueInExactSelector(labelValue) {\n  return labelValue.replace(/\\\\/g, \"\\\\\\\\\").replace(/\\n/g, \"\\\\n\").replace(/\"/g, '\\\\\"');\n}\nfunction escapeLabelValueInRegexSelector(labelValue) {\n  return escapeLabelValueInExactSelector(escapePrometheusRegexp(labelValue));\n}\n\nexport { escapeLabelValueInExactSelector, escapeLabelValueInRegexSelector, interpolateQueryExpr, prometheusRegularEscape, prometheusSpecialRegexEscape };\n//# sourceMappingURL=escaping.mjs.map\n","type Filter = {\n  key: string;\n  operator: '=' | '!=' | '=~' | '!~' | '<' | '>';\n  value: string;\n};\n\nconst LABEL_REGEX = '[a-zA-Z_]\\\\w*'; // see https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels\nconst OPERATOR_REGEX = '>|<|!~|=~|!=|=';\nconst VALUE_REGEX = '.+';\n\nconst MATCHER_REGEX = new RegExp(`(${LABEL_REGEX})(${OPERATOR_REGEX})(${VALUE_REGEX})`);\n\nexport function parseMatcher(matcher: string): Filter {\n  // eslint-disable-next-line sonarjs/slow-regex\n  const [, rawKey, rawOperator, rawValue] = matcher.match(MATCHER_REGEX) || [, '', '', ''];\n  return {\n    key: rawKey.trim(),\n    value: rawValue.replace(/['\" ]/g, ''),\n    operator: rawOperator.trim() as Filter['operator'],\n  };\n}\n","// CAUTION: Imports in this file will contribute to the module.tsx bundle size\nimport {\n  PluginExtensionPoints,\n  type PluginExtensionAddedLinkConfig,\n  type PluginExtensionPanelContext,\n} from '@grafana/data';\nimport { interpolateQueryExpr } from '@grafana/prometheus';\nimport { getTemplateSrv } from '@grafana/runtime';\nimport { type DataQuery } from '@grafana/schema';\n\nimport { PLUGIN_BASE_URL } from 'shared/constants/plugin';\nimport { ROUTES } from 'shared/constants/routes';\nimport { logger } from 'shared/logger/logger';\n\nimport { parseMatcher } from './parseMatcher';\nimport { processLabelMatcher, type ParsedPromQLQuery, type PromQLLabelMatcher } from '../shared/utils/utils.promql';\n\nconst PRODUCT_NAME = 'Grafana Metrics Drilldown';\nconst title = `Open in ${PRODUCT_NAME}`;\nconst description = `Open current query in the ${PRODUCT_NAME} view`;\nconst category = 'metrics-drilldown';\nconst icon = 'gf-prometheus';\n\nconst ASSISTANT_TARGET_V0 = 'grafana-metricsdrilldown-app/grafana-assistant-app/navigateToDrilldown/v0-alpha';\nconst ASSISTANT_TARGET_V1 = 'grafana-assistant-app/navigateToDrilldown/v1';\n\nconst ADHOC_URL_DELIMITER = '|';\n\nexport const linkConfigs: Array<PluginExtensionAddedLinkConfig<PluginExtensionPanelContext>> = [\n  {\n    title,\n    description,\n    category,\n    icon,\n    path: createAppUrl(ROUTES.Drilldown),\n    targets: [\n      PluginExtensionPoints.DashboardPanelMenu,\n      PluginExtensionPoints.ExploreToolbarAction,\n      // for testing purposes, this will be the target for the alerting rule query editor once the PR in grafana is merged\n      // PluginExtensionPoints.AlertingRuleQueryEditor,\n      'grafana/alerting/alertingrule/queryeditor',\n      ASSISTANT_TARGET_V1,\n    ],\n    configure: configureDrilldownLinkForAsync,\n    onClick: async (_, helpers) => {\n      const context = helpers.context;\n      const url = await buildDrilldownUrlAsync(context);\n      if (url) {\n        window.location.href = url;\n      }\n    },\n  },\n  {\n    targets: [ASSISTANT_TARGET_V0],\n    title: 'Navigate to metrics drilldown',\n    description: 'Build a url path to the metrics drilldown',\n    path: createAppUrl(ROUTES.Drilldown),\n    configure: (context) => {\n      if (typeof context === 'undefined') {\n        return;\n      }\n\n      const { navigateToMetrics, datasource_uid, label_filters, metric, start, end } =\n        context as unknown as GrafanaAssistantMetricsDrilldownContext;\n      // parse the labels to the PromQL format\n      const parsedLabels = parseFiltersToLabelMatchers(label_filters);\n      // create the PromURLObject for building params\n      const promURLObject = createPromURLObject(datasource_uid, parsedLabels, metric, start, end);\n      // build the params for the navigateToMetrics\n      const params = navigateToMetrics ? buildNavigateToMetricsParams(promURLObject) : undefined;\n\n      return {\n        path: createAppUrl(ROUTES.Drilldown, params),\n      };\n    },\n  },\n];\n\n// Simplified configure function for async onClick approach\nexport function configureDrilldownLinkForAsync<T extends PluginExtensionPanelContext>(context?: T) {\n  if (typeof context === 'undefined') {\n    return;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return;\n  }\n\n  // Just return a basic config - the real URL building happens in onClick\n  return {};\n}\n\n// Async URL building function that uses lazy-loaded lezer parser\nexport async function buildDrilldownUrlAsync<T extends PluginExtensionPanelContext>(\n  context?: T\n): Promise<string | null> {\n  if (typeof context === 'undefined') {\n    return null;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return null;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return null;\n  }\n\n  const prometheusQuery = queries[0] as PromQuery;\n\n  const templateSrv = getTemplateSrv();\n  const datasourceUid = templateSrv.replace(prometheusQuery.datasource?.uid, context.scopedVars);\n\n  // allow the user to navigate to the drilldown without a query (metrics reducer view)\n  if (!prometheusQuery.expr) {\n    return createAppUrl(ROUTES.Drilldown);\n  }\n\n  const expr = templateSrv.replace(prometheusQuery.expr, context.scopedVars, interpolateQueryExpr);\n\n  try {\n    const { metric, labels, hasErrors, errors } = await parsePromQLQuery(expr);\n\n    if (hasErrors) {\n      logger.warn(`PromQL query has parsing errors: ${errors.join(', ')}`);\n    }\n\n    const timeRange =\n      'timeRange' in context &&\n      typeof context.timeRange === 'object' &&\n      context.timeRange != null &&\n      'from' in context.timeRange &&\n      'to' in context.timeRange\n        ? (context.timeRange as { from: string; to: string })\n        : undefined;\n\n    const promURLObject = createPromURLObject(datasourceUid, labels, metric, timeRange?.from, timeRange?.to);\n\n    const params = buildNavigateToMetricsParams(promURLObject);\n\n    return createAppUrl(ROUTES.Drilldown, params);\n  } catch (error) {\n    logger.error(new Error(`[Metrics Drilldown] Error parsing PromQL query: ${error}`));\n\n    return createAppUrl(ROUTES.Drilldown);\n  }\n}\n\n// Legacy synchronous configure function (kept for compatibility)\n// Note: This doesn't parse PromQL - use the async onClick approach above for full functionality\nexport function configureDrilldownLink<T extends PluginExtensionPanelContext>(context?: T) {\n  if (typeof context === 'undefined') {\n    return;\n  }\n\n  if ('pluginId' in context && context.pluginId !== 'timeseries') {\n    return;\n  }\n\n  const queries = context.targets.filter(isPromQuery);\n\n  if (!queries.length) {\n    return;\n  }\n\n  // Just return a basic path without PromQL parsing\n  return {\n    path: createAppUrl(ROUTES.Drilldown),\n  };\n}\n\n// Async PromQL parser using lazy-loaded lezer parser\n// lazy loading the parser to reduce the initial bundle size by ~52kB\nexport async function parsePromQLQuery(expr: string): Promise<ParsedPromQLQuery> {\n  // Use dynamic import for lazy loading to reduce initial bundle size\n  const { parser } = await import('@prometheus-io/lezer-promql');\n  const tree = parser.parse(expr);\n  let metric = '';\n  const labels: PromQLLabelMatcher[] = [];\n  let hasErrors = false;\n  const errors: string[] = [];\n\n  // Use tree.iterate() - much simpler than manual cursor traversal\n  tree.iterate({\n    enter: (node) => {\n      // Check if this is an error node\n      if (node.type.isError || node.name === '⚠') {\n        hasErrors = true;\n        const errorText = expr.slice(node.from, node.to);\n        const errorMsg = errorText\n          ? `Parse error at position ${node.from}-${node.to}: \"${errorText}\"`\n          : `Parse error at position ${node.from}`;\n        errors.push(errorMsg);\n      }\n\n      // Get the first metric name from any VectorSelector > Identifier\n      if (!metric && node.name === 'Identifier' && node.node.parent?.type.name === 'VectorSelector') {\n        metric = expr.slice(node.from, node.to);\n      }\n\n      // Extract label matchers using helper function\n      const labelData = processLabelMatcher(node, expr);\n      if (labelData) {\n        labels.push(labelData);\n      }\n    },\n  });\n\n  return { metric, labels, hasErrors, errors };\n}\n\n/**\n * Scenes adhoc variable filters requires a | delimiter\n * between the label, operator, and value (see AdHocFiltersVariableUrlSyncHandler.ts in Scenes)\n */\nfunction filterToUrlParameter(filter: PromQLLabelMatcher): [UrlParameterType, string] {\n  return [\n    UrlParameters.Filters,\n    `${filter.label}${ADHOC_URL_DELIMITER}${filter.op}${ADHOC_URL_DELIMITER}${escapeUrlPipeDelimiters(filter.value)}`,\n  ] as [UrlParameterType, string];\n}\n\n// Type for the metrics drilldown context from Grafana Assistant\nexport type GrafanaAssistantMetricsDrilldownContext = {\n  navigateToMetrics: boolean;\n  datasource_uid: string;\n  label_filters?: string[];\n  metric?: string;\n  start?: string;\n  end?: string;\n};\n\ntype PromURLObject = {\n  datasource_uid?: string;\n  label_filters?: PromQLLabelMatcher[];\n  metric?: string;\n  start?: string;\n  end?: string;\n};\n\nexport function createPromURLObject(\n  datasource_uid?: string,\n  label_filters?: PromQLLabelMatcher[],\n  metric?: string,\n  start?: string,\n  end?: string\n): PromURLObject {\n  return {\n    datasource_uid,\n    label_filters: label_filters ?? [],\n    metric,\n    start,\n    end,\n  };\n}\n\nexport function buildNavigateToMetricsParams(promURLObject: PromURLObject): URLSearchParams {\n  const { metric, start, end, datasource_uid, label_filters } = promURLObject;\n\n  const filters = label_filters ?? [];\n\n  // Use the structured context data to build parameters\n  return appendUrlParameters([\n    [UrlParameters.Metric, metric],\n    [UrlParameters.TimeRangeFrom, start],\n    [UrlParameters.TimeRangeTo, end],\n    [UrlParameters.DatasourceId, datasource_uid],\n    ...filters.map(filterToUrlParameter),\n  ]);\n}\n\nexport function parseFiltersToLabelMatchers(label_filters?: string[]): PromQLLabelMatcher[] {\n  if (!label_filters) {\n    return [];\n  }\n\n  return label_filters.map((filter) => {\n    const matcher = parseMatcher(filter);\n    return {\n      label: matcher.key,\n      op: matcher.operator,\n      value: matcher.value,\n    };\n  });\n}\n\nexport function createAppUrl(route: string, urlParams?: URLSearchParams): string {\n  const urlParamsAsString = urlParams ? `?${urlParams.toString()}` : '';\n  return `${PLUGIN_BASE_URL}/${route}${urlParamsAsString}`;\n}\n\n// We can't use `src/shared.ts` vars here because of the impacts of its imports on the module.tsx bundle size\nexport const UrlParameters = {\n  TimeRangeFrom: 'from',\n  TimeRangeTo: 'to',\n  Metric: 'metric',\n  DatasourceId: `var-ds`,\n  Filters: `var-filters`,\n} as const;\n\ntype UrlParameterType = (typeof UrlParameters)[keyof typeof UrlParameters];\n\nfunction appendUrlParameters(\n  params: Array<[UrlParameterType, string | undefined]>,\n  initialParams?: URLSearchParams\n): URLSearchParams {\n  const searchParams = new URLSearchParams(initialParams?.toString());\n\n  params.forEach(([key, value]) => {\n    if (value) {\n      searchParams.append(key, value);\n    }\n  });\n\n  return searchParams;\n}\n\ntype PromQuery = DataQuery & { expr: string };\n\nfunction isPromQuery(query: DataQuery): query is PromQuery {\n  const { datasource } = query;\n  return datasource?.type === 'prometheus';\n}\n\n// Need to export this function from scenes because importing scenesUtils is increasing the bundle entry point size by 522.51kB\nexport function escapeUrlPipeDelimiters(value: string | undefined): string {\n  if (value == null) {\n    return '';\n  }\n\n  // Replace the pipe due to using it as a filter separator\n  return /\\|/g[Symbol.replace](value, '__gfp__');\n}\n","export type Environment = 'local' | 'dev' | 'ops' | 'prod';\n\nconst MATCHERS: Array<{ regExp: RegExp; environment: Environment }> = [\n  {\n    regExp: /localhost/,\n    environment: 'local',\n  },\n  {\n    regExp: /grafana-dev\\.net/,\n    environment: 'dev',\n  },\n  {\n    regExp: /grafana-ops\\.net/,\n    environment: 'ops',\n  },\n  {\n    regExp: /grafana\\.net/,\n    environment: 'prod',\n  },\n];\n\nexport function getEnvironment(): Environment | null {\n  if (!window?.location?.host) {\n    return null;\n  }\n\n  const found = MATCHERS.find(({ regExp }) => regExp.test(window.location.host));\n\n  return found ? found.environment : null;\n}\n","export const GIT_COMMIT = '30a64f5d462774cf62331602826804aea1711071';\n","export var LogLevel;\n(function (LogLevel) {\n    LogLevel[\"TRACE\"] = \"trace\";\n    LogLevel[\"DEBUG\"] = \"debug\";\n    LogLevel[\"INFO\"] = \"info\";\n    LogLevel[\"LOG\"] = \"log\";\n    LogLevel[\"WARN\"] = \"warn\";\n    LogLevel[\"ERROR\"] = \"error\";\n})(LogLevel || (LogLevel = {}));\nexport const defaultLogLevel = LogLevel.LOG;\nexport const allLogLevels = [\n    LogLevel.TRACE,\n    LogLevel.DEBUG,\n    LogLevel.INFO,\n    LogLevel.LOG,\n    LogLevel.WARN,\n    LogLevel.ERROR,\n];\n//# sourceMappingURL=logLevels.js.map","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","import { type TreeCursor } from '@lezer/common';\nexport interface PromQLLabelMatcher {\n  label: string;\n  op: string;\n  value: string;\n}\n\nexport interface ParsedPromQLQuery {\n  metric: string;\n  labels: PromQLLabelMatcher[];\n  hasErrors: boolean;\n  errors: string[];\n}\n\n/**\n * Extracts all metric names from a PromQL expression\n * @param {string} promqlExpression - The PromQL expression to parse\n * @returns {string[]} An array of unique metric names found in the expression\n */\nexport async function extractMetricNames(promqlExpression: string): Promise<string[]> {\n  const { parser } = await import('@prometheus-io/lezer-promql');\n  const tree = parser.parse(promqlExpression);\n  const metricNames = new Set<string>();\n  const cursor = tree.cursor();\n\n  do {\n    // have we found a VectorSelector? does it have a first child?\n    if (!cursor.type.is('VectorSelector') || !cursor.firstChild()) {\n      continue;\n    }\n\n    do {\n      // if so, let's look for any Identifier node\n      if (cursor.type.is('Identifier')) {\n        processIdentifier(promqlExpression, cursor, metricNames);\n      }\n    } while (cursor.nextSibling());\n\n    cursor.parent();\n  } while (cursor.next());\n\n  return Array.from(metricNames);\n}\n\nfunction processIdentifier(promqlExpression: string, cursor: TreeCursor, metricNames: Set<string>) {\n  const metricName = promqlExpression.slice(cursor.from, cursor.to);\n  if (metricName) {\n    metricNames.add(metricName);\n  }\n}\n\n// Helper function to process label matcher nodes\nexport function processLabelMatcher(node: any, expr: string): PromQLLabelMatcher | null {\n  if (node.name !== 'UnquotedLabelMatcher') {\n    return null;\n  }\n\n  const labelNode = node.node;\n  let labelName = '';\n  let op = '';\n  let value = '';\n\n  // Get children of UnquotedLabelMatcher\n  for (let child = labelNode.firstChild; child; child = child.nextSibling) {\n    if (child.type.name === 'LabelName') {\n      labelName = expr.slice(child.from, child.to);\n    } else if (child.type.name === 'MatchOp') {\n      op = expr.slice(child.from, child.to);\n    } else if (child.type.name === 'StringLiteral') {\n      value = expr.slice(child.from + 1, child.to - 1); // Remove quotes\n    }\n  }\n\n  if (labelName && op) {\n    // Allow empty string values\n    return { label: labelName, op, value };\n  }\n  return null;\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.40\n   Copyright © 2012-2024 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.40',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /(?:honor)([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, 'Honor'], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (imo) ((?!tab)[\\w ]+?)(?: bui|\\))/i,                             // IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[05][fnuw]?s?)\\b/i                                   // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS/OpenHarmony\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8398__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","import { LogLevel } from '@grafana/faro-web-sdk';\n\nimport { getFaro } from './faro/faro';\nimport { getEnvironment, type Environment } from './getEnvironment';\n\nexport type ErrorContext = Record<string, string>;\n\n/**\n * Logger class that handles logging to both console and Grafana Faro.\n *\n * This class provides a unified logging interface that:\n * - Logs to console in non-production environments\n * - Sends logs to Faro for remote monitoring and error tracking\n * - Supports different log levels (trace, debug, info, log, warn, error)\n * - Handles error contexts for better error tracking\n *\n * Used throughout the application for consistent logging and error reporting.\n */\n\nclass Logger {\n  #environment: Environment | null;\n\n  constructor() {\n    this.#environment = getEnvironment();\n  }\n\n  #callConsole(methodName: 'trace' | 'debug' | 'info' | 'log' | 'warn' | 'error', args: any[]) {\n    // silence console in production\n    if (this.#environment !== 'prod') {\n      // eslint-disable-next-line no-console, no-restricted-syntax\n      console[methodName](...args);\n    }\n  }\n\n  trace() {\n    this.#callConsole('trace', []);\n\n    getFaro()?.api.pushLog([], {\n      level: LogLevel.TRACE,\n    });\n  }\n\n  debug(...args: any) {\n    this.#callConsole('debug', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.DEBUG,\n    });\n  }\n\n  info(...args: any) {\n    this.#callConsole('info', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.INFO,\n    });\n  }\n\n  log(...args: any) {\n    this.#callConsole('log', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.LOG,\n    });\n  }\n\n  warn(...args: any) {\n    this.#callConsole('warn', args);\n\n    getFaro()?.api.pushLog(args, {\n      level: LogLevel.WARN,\n    });\n  }\n\n  error(error: Error, context?: ErrorContext) {\n    this.#callConsole('error', [error]);\n\n    if (context) {\n      this.#callConsole('error', ['Error context', context]);\n    }\n\n    // does not report an error, but an exception ;)\n    getFaro()?.api.pushError(error, {\n      context,\n    });\n  }\n}\n\nexport const logger = new Logger();\n","import pluginJson from '../../plugin.json';\n\nexport const PLUGIN_ID = pluginJson.id;\nexport const PLUGIN_BASE_URL = `/a/${pluginJson.id}`;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js?_cache=\" + {\"2\":\"6bc4878d4d9e63c12da9\",\"64\":\"e38a98b9fe41eb70b8fc\",\"70\":\"41af3bfdf4de62b9fbd7\",\"74\":\"860a490cbab4209e465b\",\"92\":\"3d656f8d170a92cdb67f\",\"150\":\"27876e62d816cb9590a5\",\"156\":\"dcd383229c5404d776bf\",\"190\":\"3e794f4d59b662c5c922\",\"206\":\"4720daabdf402e20df3a\",\"220\":\"974ff4e5d0fc7706c85c\",\"290\":\"91bfb31e190fe1da1985\",\"327\":\"c43cad31d28436cfa250\",\"341\":\"439352a98d26cc4e2775\",\"353\":\"abd436cb48a10de1ece9\",\"377\":\"ca03625d5daff36cb068\",\"509\":\"e476fb30202886e2bdfa\",\"520\":\"8e5854bd4ef7d767bdcb\",\"549\":\"c021be7a5841105f985a\",\"582\":\"68b7b01dcf4894e7a09b\",\"605\":\"b377ed0c9a21dfecf5e8\",\"644\":\"8aeba062dbcfb1d7daa4\",\"660\":\"9b299df16cf279f6f22b\",\"697\":\"fbbc9b6cf8f8f0f32362\",\"767\":\"a8ab42dd2e5816a647cd\",\"782\":\"35041ce5d612c8c83ccf\",\"792\":\"79c48dbde1c722d712fa\",\"851\":\"6cfdc72d68c2c3754b46\",\"876\":\"d73f0775b5b69abe604d\",\"944\":\"b4c7bab5d72bcf4cb8cf\",\"980\":\"683eed83543c656fdbc1\"}[chunkId] + \"\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"public/plugins/grafana-metricsdrilldown-app/\";","\n__webpack_require__.sriHashes = {\"2\":\"*-*-*-CHUNK-SRI-HASH-KxNH5obYlaW+JIxVYXIF3l/pEoEIo=\",\"64\":\"*-*-*-CHUNK-SRI-HASH-vvn0BuWiqRwTVtSNskzASY3JWWAmM=\",\"70\":\"*-*-*-CHUNK-SRI-HASH-xWY8doE1DeLaJIFCgLMPYsD8HihIE=\",\"74\":\"*-*-*-CHUNK-SRI-HASH-skm3VwtRP9NPbFQdsfQ/Uy4dHqxbE=\",\"92\":\"*-*-*-CHUNK-SRI-HASH-rZnQz5EotePozNNSF4eZ4hJRPVmbY=\",\"150\":\"*-*-*-CHUNK-SRI-HASH-E+ZTFEbbKUgQemR1JnK804vNGQjkk=\",\"156\":\"*-*-*-CHUNK-SRI-HASH-WJmP/duASTPVeH/OvHeiWm+SND7Ec=\",\"190\":\"*-*-*-CHUNK-SRI-HASH-rcoc/4A13kdAxL9r9KoniYNj/vtcw=\",\"206\":\"*-*-*-CHUNK-SRI-HASH-7PNiM9mPFm6C4aghznMp1ZHWpqZeQ=\",\"220\":\"*-*-*-CHUNK-SRI-HASH-sfCYb85hcih1PMaboIql0g/Z3wGHI=\",\"290\":\"*-*-*-CHUNK-SRI-HASH-moY5rFKPt2HsdEwk31ylqcV/G3N2c=\",\"327\":\"*-*-*-CHUNK-SRI-HASH-9zMyS+diS2CyXaoRqNdc/NbCYv6oA=\",\"341\":\"*-*-*-CHUNK-SRI-HASH-siU9z7Fk8PJe2H4v/JPs960N+cKCk=\",\"353\":\"*-*-*-CHUNK-SRI-HASH-tgN5/QOMm8ifd8033CuZOHps9gF6A=\",\"377\":\"*-*-*-CHUNK-SRI-HASH-Zgn1vHNE3/WssCBD3JyphwR9I21uA=\",\"509\":\"*-*-*-CHUNK-SRI-HASH-eknqhCNsIs1kja95EgpFuKajOJ/do=\",\"520\":\"*-*-*-CHUNK-SRI-HASH-eMwPIEjEkhyqhcs009wFxpIrz47fk=\",\"549\":\"*-*-*-CHUNK-SRI-HASH-YfO3ingByoiwIRIBQ3v9rdV0FEv2o=\",\"582\":\"*-*-*-CHUNK-SRI-HASH-EkDdVQ8/qjxubh09/7fUAzY9yI3uQ=\",\"605\":\"*-*-*-CHUNK-SRI-HASH-8TKufQEPAhs/ZqWzmt8781dnfU1kc=\",\"644\":\"*-*-*-CHUNK-SRI-HASH-HLXY6EmvZRln0lQHo6omPffglC5AA=\",\"660\":\"*-*-*-CHUNK-SRI-HASH-1ly/20R4RqQr5zvwxTDMSaeS/XJTc=\",\"697\":\"*-*-*-CHUNK-SRI-HASH-WsrimxVu+QuwfDMblpzpy9Rfwm4x4=\",\"767\":\"*-*-*-CHUNK-SRI-HASH-jEdaJjIgLKHmuiiv6R1fFNJ1L0eGE=\",\"782\":\"*-*-*-CHUNK-SRI-HASH-odLPJerJpn4iC56V9j3CNWvDvPf1k=\",\"792\":\"*-*-*-CHUNK-SRI-HASH-7HG1O/LOKz+UC+hz0pF3F9g1MvUDY=\",\"851\":\"*-*-*-CHUNK-SRI-HASH-2Z8hSgIqQuKIVvX+ccym2XcKUrtoE=\",\"876\":\"*-*-*-CHUNK-SRI-HASH-mMbqRLoGPYdDBz0JZlF3EBhcttSgI=\",\"944\":\"*-*-*-CHUNK-SRI-HASH-9Nvrh568fe5XpRS5Cb19/W6QCSzAA=\",\"980\":\"*-*-*-CHUNK-SRI-HASH-zPx4fI1achF6v46my37UzjKWrbUts=\"};","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t231: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkgrafana_metricsdrilldown_app\"] = self[\"webpackChunkgrafana_metricsdrilldown_app\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","\nimport amdMetaModule from 'amd-module';\n\n__webpack_public_path__ =\n  amdMetaModule && amdMetaModule.uri\n    ? amdMetaModule.uri.slice(0, amdMetaModule.uri.lastIndexOf('/') + 1)\n    : 'public/plugins/grafana-metricsdrilldown-app/';\n","import React, { lazy, Suspense } from 'react';\n\nimport { type LabelBreakdownProps } from './LabelBreakdown';\n\nconst LabelBreakdown = lazy(() => import('./LabelBreakdown'));\n\nexport const LazyLabelBreakdown = (props: LabelBreakdownProps) => (\n  <Suspense fallback={<div>Loading...</div>}>\n    <LabelBreakdown {...props} />\n  </Suspense>\n);\n","import { type PluginExtensionExposedComponentConfig } from '@grafana/data';\n\nimport { type LabelBreakdownProps } from './LabelBreakdown';\nimport { LazyLabelBreakdown } from './LazyLabelBreakdown';\nimport pluginJson from '../../plugin.json';\n\nexport const labelBreakdownConfig = {\n  id: `${pluginJson.id}/label-breakdown-component/v1`,\n  title: 'Label Breakdown',\n  description: 'A metrics label breakdown view from the Metrics Drilldown app.',\n  component: LazyLabelBreakdown,\n} as const satisfies PluginExtensionExposedComponentConfig<LabelBreakdownProps>;\n","import { type PluginExtensionExposedComponentConfig } from '@grafana/data';\n\nimport { labelBreakdownConfig } from './LabelBreakdown/config';\n\ntype ExposedComponentConfigs = Array<PluginExtensionExposedComponentConfig<any>>;\n\n// When creating a new exposed component, add its config to this array\nexport const exposedComponentConfigs = [labelBreakdownConfig] satisfies ExposedComponentConfigs;\n\nexport type ExposedComponentName = (typeof exposedComponentConfigs)[number]['title'];\n","import { AppPlugin, type AppRootProps } from '@grafana/data';\nimport { LoadingPlaceholder } from '@grafana/ui';\nimport React, { lazy, Suspense } from 'react';\n\nimport { exposedComponentConfigs } from 'exposedComponents/components';\nimport { linkConfigs } from 'extensions/links';\nimport { logger } from 'shared/logger/logger';\n\nconst LazyApp = lazy(async () => {\n  const { wasmSupported } = await import('./shared/services/sorting');\n  const { default: initOutlier } = await import('@bsull/augurs/outlier');\n\n  if (wasmSupported()) {\n    try {\n      await initOutlier();\n    } catch (e) {\n      logger.error(e as Error, { message: 'Error while initializing outlier detection' });\n    }\n  } else {\n    logger.warn('WASM not supported, outlier detection will not work');\n  }\n\n  return import('./App/App');\n});\n\nconst App = (props: AppRootProps) => (\n  <Suspense fallback={<LoadingPlaceholder text=\"\" />}>\n    <LazyApp {...props} />\n  </Suspense>\n);\n\nexport const plugin = new AppPlugin<{}>().setRootPage(App);\n\nfor (const linkConfig of linkConfigs) {\n  plugin.addLink(linkConfig);\n}\n\nfor (const exposedComponent of exposedComponentConfigs) {\n  plugin.exposeComponent(exposedComponent);\n}\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","module","exports","__WEBPACK_EXTERNAL_MODULE__1159__","__WEBPACK_EXTERNAL_MODULE__1269__","__WEBPACK_EXTERNAL_MODULE__1308__","__WEBPACK_EXTERNAL_MODULE__2007__","TransportItemType","transportItemTypeToBodyKey","EXCEPTION","LOG","MEASUREMENT","TRACE","EVENT","isTypeof","value","type","isToString","Object","prototype","toString","call","isInstanceOf","reference","err","isNull","isString","isNumber","isNaN","isBoolean","isObject","isFunction","isArray","isEventDefined","Event","isErrorDefined","Error","isError","isEmpty","length","keys","stringifyExternalJson","json","JSON","stringify","valueSeen","WeakSet","_key","has","add","getCircularDependencyReplacer","stringifyObjectValues","obj","o","key","entries","String","dateNow","Date","now","getCurrentTimestamp","toISOString","timestampToIsoString","deepEqual","a","b","aIsArray","bIsArray","idx","aIsObject","bIsObject","aKeys","bKeys","aKey","includes","defaultExceptionType","defaultErrorArgsSerializer","args","map","arg","join","stacktraceParser","initializeExceptionsAPI","internalLogger","config","metas","transports","tracesApi","userActionsApi","_a","debug","lastPayload","parseStacktrace","changeStacktraceParser","newStacktraceParser","ignoreErrors","preserveOriginalError","getStacktraceParser","pushError","error","skipDedupe","stackFrames","context","spanContext","timestampOverwriteMs","originalError","message","name","stack","patterns","msg","some","pattern","match","isErrorIgnored","ctx","assign","cause","parseCause","item","meta","payload","timestamp","trace","trace_id","traceId","span_id","spanId","getTraceContext","frames","undefined","stacktrace","testingPayload","stackTrace","dedupe","activeUserAction","getActiveUserAction","addItem","execute","defaultLogArgsSerializer","Observable","constructor","this","subscribers","subscribe","subscriber","push","unsubscribe","filter","sub","notify","forEach","first","result","internalSubscriber","data","subscription","resultUnsubscribeFn","bind","withUnsubscribeOverride","takeWhile","predicate","merge","observables","mergerObservable","subscriptions","observable","originalUnsubscribeAll","unsubscribeAll","userActionStartByApiCallEventName","userActionStart","UserActionSeverity","UserActionState","globalThis","g","self","faro","registerFaro","unpatchedConsole","api","instrumentations","pause","unpause","isolate","defineProperty","configurable","enumerable","writable","setInternalFaroOnGlobalObject","preventGlobalExposure","globalObjectKey","warn","setFaroOnGlobalObject","alphabet","genShortID","Array","from","Math","floor","random","ItemBuffer","buffer","flushBuffer","cb","size","UserAction","parentId","haltTimeout","trigger","attributes","trackUserActionsExcludeItem","severity","Normal","super","id","cancelTimeout","_itemBuffer","_transports","_haltTimeoutId","_state","Started","_isValid","_start","extend","haltPredicate","_setFollowupActionTimeout","_timeoutId","timeoutId","delay","clearTimeout","setTimeout","startTimeout","halt","end","cancel","startTime","Halted","Cancelled","endTime","duration","Ended","isExcludeFromUserAction","userActionItem","action","pushEvent","userActionStartTime","userActionEndTime","userActionDuration","userActionTrigger","userActionSeverity","customPayloadTransformer","getState","userActionsMessageBus","initializeAPI","startUserAction","options","userAction","triggerName","v","initializeUserActionsAPI","_unpatchedConsole","_config","otel","getOTEL","getSpanContext","active","initOTEL","isOTELInitialized","pushTraces","initializeTracesAPI","props","metaSession","metaUser","metaView","metaPage","setUser","user","remove","setSession","session","newOverrides","overrides","getSession","getPage","page","resetUser","resetSession","setView","view","previousView","getView","setPage","pageMeta","initializeMetaAPI","logArgsSerializer","pushLog","level","initializeLogsAPI","pushMeasurement","values","initializeMeasurementsAPI","domain","attrs","eventDomain","currentUserAction","initializeEventsAPI","noop","InternalLoggerLevel","defaultInternalLogger","info","prefix","defaultInternalLoggerLevel","ERROR","defaultUnpatchedConsole","console","createInternalLogger","internalLoggerLevel","OFF","WARN","INFO","VERBOSE","initializeInternalLogger","VERSION","BatchExecutor","sendFn","_b","signalBuffer","itemLimit","sendTimeout","paused","flushInterval","start","document","addEventListener","visibilityState","flush","window","setInterval","clearInterval","groupItems","items","itemMap","Map","metaKey","currentItems","get","set","initializeTransports","beforeSendHooks","applyBeforeSendHooks","filteredItems","hook","modified","Boolean","sanitizeItems","batchedSend","transport","isBatched","send","batchExecutor","batching","enabled","newTransports","newTransport","existingTransport","addBeforeSendHooks","newBeforeSendHooks","beforeSendHook","getBeforeSendHooks","every","filteredItem","instantSend","isPaused","transportsToRemove","transportToRemove","existingTransportIndex","indexOf","splice","removeBeforeSendHooks","beforeSendHooksToRemove","initializeUnpatchedConsole","initializeFaro","listeners","getValue","reduce","acc","notifyListeners","listener","newItems","itemsToRemove","currentItem","addListener","removeListener","currentListener","initializeMetas","newInstrumentations","newInstrumentation","existingInstrumentation","initialize","instrumentationsToRemove","instrumentationToRemove","existingInstrumentationIndex","destroy","initializeInstrumentations","initial","sdk","version","app","bundleId","appName","sessionTracking","registerInitialMetas","beforeSend","registerInitialTransports","registerInitialInstrumentations","defaultGlobalObjectKey","defaultBatchingConfig","defaultEventDomain","newLineString","evalString","unknownSymbolString","atString","webkitLineRegex","webkitEvalRegex","webkitEvalString","webkitAddressAtString","webkitAddressAtStringLength","firefoxLineRegex","firefoxEvalRegex","firefoxEvalString","safariExtensionString","safariWebExtensionString","reactMinifiedRegex","buildStackFrame","filename","func","lineno","colno","stackFrame","location","href","function","getDataFromSafariExtensions","isSafariExtension","isSafariWebExtension","split","getStackFramesFromError","lines","_line","line","parts","exec","startsWith","submatch","substring","columnNumber","Number","test","slice","STORAGE_KEY","SESSION_INACTIVITY_TIME","defaultSessionTrackingConfig","persistent","maxSessionPersistenceTime","MESSAGE_TYPE_HTTP_REQUEST_START","MESSAGE_TYPE_HTTP_REQUEST_END","userActionDataAttribute","unknownString","browserMeta","parser","UAParser","getBrowser","osName","osVersion","getOS","userAgent","getUA","language","navigator","mobile","brands","userAgentData","getBrands","browser","os","viewportWidth","innerWidth","viewportHeight","innerHeight","k6Meta","k6Properties","k6","isK6Browser","testRunId","currentHref","pageId","createPageMeta","generatePageId","initialPageMeta","locationHref","url","BaseExtension","logDebug","logInfo","logWarn","logError","BaseTransport","getIgnoreUrls","mergeResourceSpans","traces","resourceSpans","currentResource","currentSpans","scopeSpans","newSpans","throttle","callback","lastPending","timeoutBehavior","webStorageType","isWebStorageAvailable","storage","testItem","setItem","removeItem","getItem","webStorageMechanism","isWebStorageTypeAvailable","isLocalStorageAvailable","isSessionStorageAvailable","EVENT_SESSION_START","EVENT_SESSION_RESUME","EVENT_OVERRIDES_SERVICE_NAME","isSampled","_c","samplingRate","sampler","createUserSessionObject","sessionId","started","lastActivity","generateSessionId","isUserSessionValid","getUserSessionUpdater","fetchUserSession","storeUserSession","forceSessionExtend","sessionTrackingConfig","isPersistentSessions","sessionFromStorage","newSession","addSessionMetadataToNextSession","sessionMeta","onSessionChange","previousSession","_d","_e","_f","_g","sessionWithMeta","previousSessionId","getSessionMetaUpdateHandler","sessionFromSessionStorage","sessionAttributes","sessionOverrides","storedSessionMeta","storedSessionMetaOverrides","hasSessionOverridesChanged","hasAttributesChanged","userSession","storedSessionOverrides","serviceName","previousServiceName","sendOverrideEvent","PersistentSessionsManager","updateSession","updateUserSession","init","removeUserSession","storageTypeLocal","storedSession","parse","VolatileSessionsManager","storageTypeSession","getSessionManagerByConfig","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","then","apply","__rest","s","t","p","hasOwnProperty","getOwnPropertySymbols","i","propertyIsEnumerable","FetchTransport","disabledUntil","rateLimitBackoffMs","defaultRateLimitBackoffMs","getNow","promiseBuffer","concurrency","work","producer","shift","reason","promiseProducer","createPromiseBuffer","bufferSize","body","bk","signals","getTransportBody","requestOptions","apiKey","headers","restOfRequestOptions","fetch","method","keepalive","response","status","extendFaroSession","getRetryAfterDate","text","catch","concat","ignoreUrls","retryAfterHeader","date","SessionExpiredString","BaseInstrumentation","arguments","isUrlIgnored","flatMap","ignoredUrl","apiTypeFetch","apiTypeXhr","monitorHttpRequests","emitStartMessage","requestProps","request","emitEndMessage","onRequestEnd","onRequestStart","originalFetch","resource","URL","isIgnoredUrl","requestId","apiType","monitorFetch","originalOpen","XMLHttpRequest","open","monitorXhr","NAVIGATION_ID_STORAGE_KEY","RESOURCE_ENTRY","w3cTraceparentFormat","getSpanContextFromServerTiming","serverTimings","serverEntry","description","includePerformanceEntry","performanceEntryJSON","allowProps","allowPropKey","allowPropValue","perfEntryPropVal","createFaroResourceTiming","resourceEntryRaw","connectEnd","connectStart","decodedBodySize","domainLookupEnd","domainLookupStart","encodedBodySize","fetchStart","initiatorType","nextHopProtocol","redirectEnd","redirectStart","renderBlockingStatus","rbs","requestStart","responseEnd","responseStart","responseStatus","secureConnectionStart","transferSize","workerStart","toFaroPerformanceTimingString","tcpHandshakeTime","dnsLookupTime","tlsNegotiationTime","redirectTime","requestTime","responseTime","fetchTime","serviceWorkerTime","cacheHitStatus","cacheType","getCacheType","protocol","ttfb","createFaroNavigationTiming","navigationEntryRaw","activationStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","loadEventEnd","loadEventStart","parserStart","performance","timing","domLoading","timeOrigin","getDocumentParsingTime","pageLoadTime","documentParsingTime","domProcessingTime","domContentLoadHandlerTime","onLoadTime","max","round","DEFAULT_TRACK_RESOURCES","performanceEntriesSubscription","PerformanceInstrumentation","handleReady","readyState","readyStateCompleteHandler","removeEventListener","onDocumentReady","faroNavigationId","faroNavigationEntryResolve","faroNavigationEntryPromise","PerformanceObserver","observedEntries","getEntries","navEntryJson","toJSON","serverTiming","faroPreviousNavigationId","faroNavigationEntry","observe","buffered","getNavigationTimings","trackResources","resourceEntryJson","faroResourceEntry","faroResourceId","trackUserActionsPreview","observeResourceTimings","getUserEventHandler","httpMonitor","domMutationsMonitor","MutationObserver","_mutationsList","_observer","childList","subtree","characterData","monitorDomMutations","performanceEntriesMonitor","monitorPerformanceEntries","proceessUserActionStarted","runningRequests","allMonitorsSub","isRequestEndMessage","isRequestStartMessage","delete","unsubscribeAllMonitors","processUserEvent","event","userActionName","element","dataAttributeName","parsedDataAttributeName","withoutData","withUpperCase","replace","_","char","toUpperCase","convertDataAttributeName","dataset","getUserActionNameFromElement","target","trackUserActionsDataAttributeName","UserActionInstrumentation","ev","_userActionSub","valueTypeRegex","getErrorDetails","evt","isDomErrorRes","isEventRes","isErrorEvent","isDomError","isDomException","isEvent","getDetailsFromErrorArgs","source","eventIsString","initialStackFrame","groups","getValueAndTypeFromMessage","getDetailsFromConsoleErrorArgs","serializer","registerOnunhandledrejection","detail","isPrimitive","ErrorsInstrumentation","oldOnerror","onerror","registerOnerror","n","persisted","timeStamp","r","delta","rating","requestAnimationFrame","getEntriesByType","prerendering","wasDiscarded","navigationType","c","WeakMap","d","h","hadRecentInput","at","supportedEntryTypes","f","u","l","Set","m","isFinite","firstHiddenTime","onHidden","y","E","disconnect","reportAllChanges","T","M","interactionId","min","w","C","interactionCount","F","k","clear","L","entryType","sort","A","requestIdleCallback","once","capture","B","N","q","H","O","WebVitalsBasic","webVitalConfig","mapping","indicator","executor","metric","cls","takeRecords","fcp","inp","PerformanceEventTiming","durationThreshold","lcp","isTrusted","nodeName","nodeType","toLowerCase","classList","parentNode","D","find","node","W","processingEnd","abs","renderTime","processingStart","generateTarget","interactionTarget","interactionType","interactionTime","nextPaintTime","processedEventEntries","longAnimationFrameEntries","inputDelay","processingDuration","presentationDelay","loadState","longestScript","totalScriptDuration","totalStyleAndLayoutDuration","totalPaintDuration","totalUnattributedDuration","styleAndLayoutStart","scripts","forcedStyleAndLayoutDuration","entry","subpart","intersectingDuration","attribution","U","V","loadStateKey","timeToFirstByteKey","WebVitalsWithAttribution","corePushMeasurement","measureCLS","measureFCP","measureINP","measureLCP","measureTTFB","sources","largestShiftTarget","largestShiftTime","largestShiftValue","largestShiftSource","largestShiftEntry","buildInitialValues","addIfPresent","buildInitialContext","timeToFirstByte","firstByteToFCP","navigationEntry","fcpEntry","resourceLoadDelay","resourceLoadDuration","elementRenderDelay","lcpEntry","lcpResourceEntry","waitingDuration","cacheDuration","dnsDuration","connectionDuration","requestDuration","navigationEntryId","navigation_type","navigation_entry_id","WebVitalsInstrumentation","intializeWebVitalsInstrumentation","trackWebVitalsAttribution","webVitalsInstrumentation","trackAttribution","SessionInstrumentation","sendSessionStartEvent","notifiedSession","createInitialSession","SessionManager","sessionsConfig","lifecycleType","initialSession","storedUserSession","storedUserSessionMeta","createSession","registerBeforeSendHook","newItem","newAttributes","initialSessionMeta","ViewInstrumentation","sendViewChangedEvent","notifiedView","fromView","toView","CSPInstrumentation","securitypolicyviolationHandler","ConsoleInstrumentation","errorSerializer","instrumentationOptions","consoleInstrumentation","serializeErrors","disabledLevels","defaultDisabledLevels","consoleErrorAsLog","consoleErrorPrefix","getWebInstrumentations","enablePerformanceInstrumentation","unshift","enableContentSecurityPolicyInstrumentation","captureConsole","DEBUG","getFilteredInstrumentations","instr","createDefaultMetas","browserConfig","pageTracking","initialMetas","crateSessionMeta","trackGeolocation","geoLocationTrackingEnabled","coreConfig","browserConfigUrl","restProperties","makeCoreConfig","FARO_ENVIRONMENTS","environment","faroUrl","getFaro","setFaro","instance","initFaro","faroEnvironment","getEnvironment","getFaroEnvironment","apps","bootData","appRelease","PLUGIN_ID","userEmail","email","release","GIT_COMMIT","PLUGIN_BASE_URL","__WEBPACK_EXTERNAL_MODULE__3241__","ROUTES","Trail","Drilldown","interpolateQueryExpr","variable","multi","includeAll","featureToggles","prometheusSpecialCharsInLabelValues","prometheusRegularEscape","prometheusSpecialRegexEscape","escapedValues","val","MATCHER_REGEX","RegExp","PRODUCT_NAME","linkConfigs","title","category","icon","path","createAppUrl","targets","PluginExtensionPoints","DashboardPanelMenu","ExploreToolbarAction","configure","pluginId","isPromQuery","onClick","helpers","prometheusQuery","queries","templateSrv","getTemplateSrv","datasourceUid","datasource","uid","scopedVars","expr","labels","hasErrors","errors","parsePromQLQuery","logger","timeRange","params","buildNavigateToMetricsParams","createPromURLObject","to","buildDrilldownUrlAsync","navigateToMetrics","datasource_uid","label_filters","parsedLabels","matcher","rawKey","rawOperator","rawValue","trim","operator","parseMatcher","label","op","parseFiltersToLabelMatchers","promURLObject","tree","iterate","enter","errorText","errorMsg","parent","labelData","processLabelMatcher","filterToUrlParameter","UrlParameters","Filters","escapeUrlPipeDelimiters","filters","initialParams","searchParams","URLSearchParams","append","appendUrlParameters","Metric","TimeRangeFrom","TimeRangeTo","DatasourceId","route","urlParams","urlParamsAsString","query","Symbol","MATCHERS","regExp","host","found","LogLevel","defaultLogLevel","allLogLevels","__WEBPACK_EXTERNAL_MODULE__5959__","__WEBPACK_EXTERNAL_MODULE__6089__","extractMetricNames","promqlExpression","metricNames","cursor","is","firstChild","processIdentifier","nextSibling","metricName","labelName","child","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","SUFFIX_BROWSER","enumerize","arr","enums","str1","str2","lowerize","str","len","rgxMapper","ua","arrays","j","matches","regex","strMapper","windowsVersionMap","regexes","cpu","device","engine","EDGE","extensions","getResult","_navigator","_ua","_uach","_rgxmap","mergedRegexes","_isSelfNav","_browser","brave","isBrave","getCPU","_cpu","getDevice","_device","standalone","maxTouchPoints","getEngine","_engine","_os","platform","setUA","CPU","DEVICE","ENGINE","OS","$","jQuery","Zepto","prop","__WEBPACK_EXTERNAL_MODULE__7781__","__WEBPACK_EXTERNAL_MODULE__8398__","__WEBPACK_EXTERNAL_MODULE__8531__","methodName","log","pluginJson","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","amdO","getter","__esModule","getPrototypeOf","mode","ns","create","def","current","getOwnPropertyNames","definition","chunkId","all","promises","Function","script","needAttach","getElementsByTagName","getAttribute","createElement","charset","timeout","nc","setAttribute","src","origin","crossOrigin","integrity","sriHashes","onScriptComplete","prev","onload","doneFns","removeChild","fn","head","appendChild","toStringTag","nmd","paths","children","baseURI","installedChunks","installedChunkData","promise","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","lastIndexOf","LabelBreakdown","lazy","exposedComponentConfigs","component","Suspense","fallback","div","LazyApp","wasmSupported","default","initOutlier","plugin","AppPlugin","setRootPage","LoadingPlaceholder","linkConfig","addLink","exposedComponent","exposeComponent"],"sourceRoot":""}